<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>iOS Pentesting</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ios-pentesting"><a class="header" href="#ios-pentesting">iOS Pentesting</a></h1>
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>
<p><br />
ä½¿ç”¨ <a href="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=text&amp;utm_campaign=ppc&amp;utm_term=trickest&amp;utm_content=ios-pentesting"><strong>Trickest</strong></a> è½»æ¾æ„å»ºå’Œ <strong>è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹</strong>ï¼Œç”±ä¸–ç•Œä¸Š <strong>æœ€å…ˆè¿›</strong> çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚<br />
ç«‹å³è·å–è®¿é—®æƒé™ï¼š</p>
<p>{% embed url="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=banner&amp;utm_campaign=ppc&amp;utm_content=ios-pentesting" %}</p>
<p>{% hint style="success" %}
å­¦ä¹ å’Œå®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
å­¦ä¹ å’Œå®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>æ”¯æŒ HackTricks</summary>
<ul>
<li>æŸ¥çœ‹ <a href="https://github.com/sponsors/carlospolop"><strong>è®¢é˜…è®¡åˆ’</strong></a>!</li>
<li><strong>åŠ å…¥</strong> ğŸ’¬ <a href="https://discord.gg/hRep4RUj7f"><strong>Discord ç¾¤ç»„</strong></a> æˆ– <a href="https://t.me/peass"><strong>Telegram ç¾¤ç»„</strong></a> æˆ– <strong>å…³æ³¨</strong> æˆ‘ä»¬çš„ <strong>Twitter</strong> ğŸ¦ <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>é€šè¿‡å‘</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> å’Œ <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚</li>
</ul>
</details>
{% endhint %}
{% endhint %}
<h2 id="ios-åŸºç¡€"><a class="header" href="#ios-åŸºç¡€">iOS åŸºç¡€</a></h2>
<p>{% content-ref url="ios-basics.md" %}
<a href="ios-basics.html">ios-basics.md</a>
{% endcontent-ref %}</p>
<h2 id="æµ‹è¯•ç¯å¢ƒ"><a class="header" href="#æµ‹è¯•ç¯å¢ƒ">æµ‹è¯•ç¯å¢ƒ</a></h2>
<p>åœ¨æ­¤é¡µé¢ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°æœ‰å…³ <strong>iOS æ¨¡æ‹Ÿå™¨</strong>ã€<strong>ä»¿çœŸå™¨</strong>å’Œ <strong>è¶Šç‹±</strong>çš„ä¿¡æ¯ï¼š</p>
<p>{% content-ref url="ios-testing-environment.md" %}
<a href="ios-testing-environment.html">ios-testing-environment.md</a>
{% endcontent-ref %}</p>
<h2 id="åˆæ­¥åˆ†æ"><a class="header" href="#åˆæ­¥åˆ†æ">åˆæ­¥åˆ†æ</a></h2>
<h3 id="åŸºæœ¬-ios-æµ‹è¯•æ“ä½œ"><a class="header" href="#åŸºæœ¬-ios-æµ‹è¯•æ“ä½œ">åŸºæœ¬ iOS æµ‹è¯•æ“ä½œ</a></h3>
<p>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ <strong>å°†å»ºè®®è¿›è¡Œå‡ é¡¹æ“ä½œ</strong>ï¼ˆè¿æ¥è®¾å¤‡ã€è¯»/å†™/ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶ã€ä½¿ç”¨ä¸€äº›å·¥å…·...ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨ä¸çŸ¥é“å¦‚ä½•æ‰§è¡Œè¿™äº›æ“ä½œä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œè¯· <strong>å¼€å§‹é˜…è¯»æ­¤é¡µé¢</strong>ï¼š</p>
<p>{% content-ref url="basic-ios-testing-operations.md" %}
<a href="basic-ios-testing-operations.html">basic-ios-testing-operations.md</a>
{% endcontent-ref %}</p>
<p>{% hint style="info" %}
å¯¹äºä»¥ä¸‹æ­¥éª¤ <strong>åº”ç”¨ç¨‹åºåº”å·²å®‰è£…</strong> åœ¨è®¾å¤‡ä¸Šï¼Œå¹¶ä¸”åº”å·²è·å¾— <strong>IPA æ–‡ä»¶</strong>ã€‚<br />
é˜…è¯» <a href="basic-ios-testing-operations.html">åŸºæœ¬ iOS æµ‹è¯•æ“ä½œ</a> é¡µé¢ä»¥äº†è§£å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚
{% endhint %}</p>
<h3 id="åŸºæœ¬é™æ€åˆ†æ"><a class="header" href="#åŸºæœ¬é™æ€åˆ†æ">åŸºæœ¬é™æ€åˆ†æ</a></h3>
<p>å»ºè®®ä½¿ç”¨å·¥å…· <a href="https://github.com/MobSF/Mobile-Security-Framework-MobSF"><strong>MobSF</strong></a> å¯¹ IPA æ–‡ä»¶è¿›è¡Œè‡ªåŠ¨é™æ€åˆ†æã€‚</p>
<p>è¯†åˆ« <strong>äºŒè¿›åˆ¶æ–‡ä»¶ä¸­å­˜åœ¨çš„ä¿æŠ¤</strong>ï¼š</p>
<ul>
<li><strong>PIEï¼ˆä½ç½®æ— å…³å¯æ‰§è¡Œæ–‡ä»¶ï¼‰</strong>ï¼šå¯ç”¨æ—¶ï¼Œåº”ç”¨ç¨‹åºæ¯æ¬¡å¯åŠ¨æ—¶åŠ è½½åˆ°éšæœºå†…å­˜åœ°å€ï¼Œä½¿å…¶åˆå§‹å†…å­˜åœ°å€æ›´éš¾é¢„æµ‹ã€‚</li>
</ul>
<pre><code class="language-bash">otool -hv &lt;app-binary&gt; | grep PIE   # åº”è¯¥åŒ…å« PIE æ ‡å¿—
</code></pre>
<ul>
<li><strong>æ ˆé‡‘ä¸é›€</strong>ï¼šä¸ºäº†éªŒè¯æ ˆçš„å®Œæ•´æ€§ï¼Œåœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰å°†ä¸€ä¸ªâ€œé‡‘ä¸é›€â€å€¼æ”¾ç½®åœ¨æ ˆä¸Šï¼Œå¹¶åœ¨å‡½æ•°ç»“æŸæ—¶å†æ¬¡éªŒè¯ã€‚</li>
</ul>
<pre><code class="language-bash">otool -I -v &lt;app-binary&gt; | grep stack_chk   # åº”è¯¥åŒ…å«ç¬¦å·ï¼šstack_chk_guard å’Œ stack_chk_fail
</code></pre>
<ul>
<li><strong>ARCï¼ˆè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼‰</strong>ï¼šé˜²æ­¢å¸¸è§çš„å†…å­˜æŸåç¼ºé™·</li>
</ul>
<pre><code class="language-bash">otool -I -v &lt;app-binary&gt; | grep objc_release   # åº”è¯¥åŒ…å« _objc_release ç¬¦å·
</code></pre>
<ul>
<li><strong>åŠ å¯†äºŒè¿›åˆ¶æ–‡ä»¶</strong>ï¼šäºŒè¿›åˆ¶æ–‡ä»¶åº”è¢«åŠ å¯†</li>
</ul>
<pre><code class="language-bash">otool -arch all -Vl &lt;app-binary&gt; | grep -A5 LC_ENCRYPT   # cryptid åº”è¯¥ä¸º 1
</code></pre>
<p><strong>è¯†åˆ«æ•æ„Ÿ/ä¸å®‰å…¨å‡½æ•°</strong></p>
<ul>
<li><strong>å¼±å“ˆå¸Œç®—æ³•</strong></li>
</ul>
<pre><code class="language-bash"># åœ¨ iOS è®¾å¤‡ä¸Š
otool -Iv &lt;app&gt; | grep -w "_CC_MD5"
otool -Iv &lt;app&gt; | grep -w "_CC_SHA1"

# åœ¨ Linux ä¸Š
grep -iER "_CC_MD5"
grep -iER "_CC_SHA1"
</code></pre>
<ul>
<li><strong>ä¸å®‰å…¨çš„éšæœºå‡½æ•°</strong></li>
</ul>
<pre><code class="language-bash"># åœ¨ iOS è®¾å¤‡ä¸Š
otool -Iv &lt;app&gt; | grep -w "_random"
otool -Iv &lt;app&gt; | grep -w "_srand"
otool -Iv &lt;app&gt; | grep -w "_rand"

# åœ¨ Linux ä¸Š
grep -iER "_random"
grep -iER "_srand"
grep -iER "_rand"
</code></pre>
<ul>
<li><strong>ä¸å®‰å…¨çš„ â€˜Mallocâ€™ å‡½æ•°</strong></li>
</ul>
<pre><code class="language-bash"># åœ¨ iOS è®¾å¤‡ä¸Š
otool -Iv &lt;app&gt; | grep -w "_malloc"

# åœ¨ Linux ä¸Š
grep -iER "_malloc"
</code></pre>
<ul>
<li><strong>ä¸å®‰å…¨å’Œæ˜“å—æ”»å‡»çš„å‡½æ•°</strong></li>
</ul>
<pre><code class="language-bash"># åœ¨ iOS è®¾å¤‡ä¸Š
otool -Iv &lt;app&gt; | grep -w "_gets"
otool -Iv &lt;app&gt; | grep -w "_memcpy"
otool -Iv &lt;app&gt; | grep -w "_strncpy"
otool -Iv &lt;app&gt; | grep -w "_strlen"
otool -Iv &lt;app&gt; | grep -w "_vsnprintf"
otool -Iv &lt;app&gt; | grep -w "_sscanf"
otool -Iv &lt;app&gt; | grep -w "_strtok"
otool -Iv &lt;app&gt; | grep -w "_alloca"
otool -Iv &lt;app&gt; | grep -w "_sprintf"
otool -Iv &lt;app&gt; | grep -w "_printf"
otool -Iv &lt;app&gt; | grep -w "_vsprintf"

# åœ¨ Linux ä¸Š
grep -R "_gets"
grep -iER "_memcpy"
grep -iER "_strncpy"
grep -iER "_strlen"
grep -iER "_vsnprintf"
grep -iER "_sscanf"
grep -iER "_strtok"
grep -iER "_alloca"
grep -iER "_sprintf"
grep -iER "_printf"
grep -iER "_vsprintf"
</code></pre>
<h3 id="åŸºæœ¬åŠ¨æ€åˆ†æ"><a class="header" href="#åŸºæœ¬åŠ¨æ€åˆ†æ">åŸºæœ¬åŠ¨æ€åˆ†æ</a></h3>
<p>æŸ¥çœ‹ <a href="https://github.com/MobSF/Mobile-Security-Framework-MobSF"><strong>MobSF</strong></a> æ‰§è¡Œçš„åŠ¨æ€åˆ†æã€‚æ‚¨éœ€è¦æµè§ˆä¸åŒçš„è§†å›¾å¹¶ä¸ä¹‹äº’åŠ¨ï¼Œä½†å®ƒå°†åœ¨æ‰§è¡Œå…¶ä»–æ“ä½œæ—¶æŒ‚é’©å¤šä¸ªç±»ï¼Œå¹¶åœ¨å®Œæˆåå‡†å¤‡æŠ¥å‘Šã€‚</p>
<h3 id="åˆ—å‡ºå·²å®‰è£…çš„åº”ç”¨ç¨‹åº"><a class="header" href="#åˆ—å‡ºå·²å®‰è£…çš„åº”ç”¨ç¨‹åº">åˆ—å‡ºå·²å®‰è£…çš„åº”ç”¨ç¨‹åº</a></h3>
<p>ä½¿ç”¨å‘½ä»¤ <code>frida-ps -Uai</code> ç¡®å®šå·²å®‰è£…åº”ç”¨ç¨‹åºçš„ <strong>åŒ…æ ‡è¯†ç¬¦</strong>ï¼š</p>
<pre><code class="language-bash">$ frida-ps -Uai
PID  Name                 Identifier
----  -------------------  -----------------------------------------
6847  Calendar             com.apple.mobilecal
6815  Mail                 com.apple.mobilemail
-  App Store            com.apple.AppStore
-  Apple Store          com.apple.store.Jolly
-  Calculator           com.apple.calculator
-  Camera               com.apple.camera
-  iGoat-Swift          OWASP.iGoat-Swift
</code></pre>
<h3 id="åŸºæœ¬æšä¸¾ä¸é’©å­"><a class="header" href="#åŸºæœ¬æšä¸¾ä¸é’©å­">åŸºæœ¬æšä¸¾ä¸é’©å­</a></h3>
<p>å­¦ä¹ å¦‚ä½•<strong>æšä¸¾åº”ç”¨ç¨‹åºçš„ç»„ä»¶</strong>ä»¥åŠå¦‚ä½•ä½¿ç”¨objectionè½»æ¾<strong>é’©ä½æ–¹æ³•å’Œç±»</strong>ï¼š</p>
<p>{% content-ref url="ios-hooking-with-objection.md" %}
<a href="ios-hooking-with-objection.html">ios-hooking-with-objection.md</a>
{% endcontent-ref %}</p>
<h3 id="ipaç»“æ„"><a class="header" href="#ipaç»“æ„">IPAç»“æ„</a></h3>
<p><strong>IPAæ–‡ä»¶</strong>çš„ç»“æ„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>å‹ç¼©åŒ…</strong>ã€‚é€šè¿‡å°†å…¶æ‰©å±•åé‡å‘½åä¸º<code>.zip</code>ï¼Œå¯ä»¥<strong>è§£å‹ç¼©</strong>ä»¥æ­ç¤ºå…¶å†…å®¹ã€‚åœ¨æ­¤ç»“æ„ä¸­ï¼Œ<strong>Bundle</strong>è¡¨ç¤ºä¸€ä¸ªå‡†å¤‡å®‰è£…çš„å®Œæ•´æ‰“åŒ…åº”ç”¨ç¨‹åºã€‚åœ¨å…¶ä¸­ï¼Œæ‚¨ä¼šæ‰¾åˆ°ä¸€ä¸ªåä¸º<code>&lt;NAME&gt;.app</code>çš„ç›®å½•ï¼Œå…¶ä¸­å°è£…äº†åº”ç”¨ç¨‹åºçš„èµ„æºã€‚</p>
<ul>
<li><strong><code>Info.plist</code></strong>ï¼šæ­¤æ–‡ä»¶åŒ…å«åº”ç”¨ç¨‹åºçš„ç‰¹å®šé…ç½®è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li><strong><code>_CodeSignature/</code></strong>ï¼šæ­¤ç›®å½•åŒ…å«ä¸€ä¸ªplistæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«ç­¾åï¼Œç¡®ä¿åŒ…ä¸­æ‰€æœ‰æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚</li>
<li><strong><code>Assets.car</code></strong>ï¼šä¸€ä¸ªå‹ç¼©æ¡£æ¡ˆï¼Œå­˜å‚¨å›¾æ ‡ç­‰èµ„äº§æ–‡ä»¶ã€‚</li>
<li><strong><code>Frameworks/</code></strong>ï¼šæ­¤æ–‡ä»¶å¤¹åŒ…å«åº”ç”¨ç¨‹åºçš„æœ¬åœ°åº“ï¼Œå¯èƒ½ä»¥<code>.dylib</code>æˆ–<code>.framework</code>æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ã€‚</li>
<li><strong><code>PlugIns/</code></strong>ï¼šè¿™å¯èƒ½åŒ…æ‹¬åº”ç”¨ç¨‹åºçš„æ‰©å±•ï¼Œç§°ä¸º<code>.appex</code>æ–‡ä»¶ï¼Œå°½ç®¡å®ƒä»¬å¹¶ä¸æ€»æ˜¯å­˜åœ¨ã€‚ * <a href="https://developer.apple.com/documentation/coredata"><strong><code>Core Data</code></strong></a>ï¼šç”¨äºä¿å­˜åº”ç”¨ç¨‹åºçš„æ°¸ä¹…æ•°æ®ä»¥ä¾›ç¦»çº¿ä½¿ç”¨ï¼Œç¼“å­˜ä¸´æ—¶æ•°æ®ï¼Œå¹¶ä¸ºæ‚¨çš„åº”ç”¨åœ¨å•ä¸ªè®¾å¤‡ä¸Šæ·»åŠ æ’¤æ¶ˆåŠŸèƒ½ã€‚è¦åœ¨å•ä¸ªiCloudå¸æˆ·ä¸­çš„å¤šä¸ªè®¾å¤‡ä¹‹é—´åŒæ­¥æ•°æ®ï¼ŒCore Dataä¼šè‡ªåŠ¨å°†æ‚¨çš„æ¶æ„é•œåƒåˆ°CloudKitå®¹å™¨ä¸­ã€‚</li>
<li><a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/ConfigApplications.html"><strong><code>PkgInfo</code></strong></a>ï¼š<code>PkgInfo</code>æ–‡ä»¶æ˜¯æŒ‡å®šåº”ç”¨ç¨‹åºæˆ–åŒ…çš„ç±»å‹å’Œåˆ›å»ºè€…ä»£ç çš„å¦ä¸€ç§æ–¹å¼ã€‚</li>
<li><strong>en.lproj, fr.proj, Base.lproj</strong>ï¼šæ˜¯åŒ…å«ç‰¹å®šè¯­è¨€èµ„æºçš„è¯­è¨€åŒ…ï¼Œä»¥åŠåœ¨ä¸æ”¯æŒæŸç§è¯­è¨€æ—¶çš„é»˜è®¤èµ„æºã€‚</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼š<code>_CodeSignature/</code>ç›®å½•é€šè¿‡æ•°å­—ç­¾åéªŒè¯æ‰€æœ‰æ‰“åŒ…æ–‡ä»¶çš„å®Œæ•´æ€§ï¼Œåœ¨åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚</li>
<li><strong>èµ„äº§ç®¡ç†</strong>ï¼š<code>Assets.car</code>æ–‡ä»¶ä½¿ç”¨å‹ç¼©æœ‰æ•ˆç®¡ç†å›¾å½¢èµ„äº§ï¼Œå¯¹äºä¼˜åŒ–åº”ç”¨ç¨‹åºæ€§èƒ½å’Œå‡å°‘æ•´ä½“å¤§å°è‡³å…³é‡è¦ã€‚</li>
<li><strong>æ¡†æ¶å’Œæ’ä»¶</strong>ï¼šè¿™äº›ç›®å½•å¼ºè°ƒäº†iOSåº”ç”¨ç¨‹åºçš„æ¨¡å—åŒ–ï¼Œå…è®¸å¼€å‘äººå‘˜åŒ…å«å¯é‡ç”¨çš„ä»£ç åº“ï¼ˆ<code>Frameworks/</code>ï¼‰å¹¶æ‰©å±•åº”ç”¨ç¨‹åºåŠŸèƒ½ï¼ˆ<code>PlugIns/</code>ï¼‰ã€‚</li>
<li><strong>æœ¬åœ°åŒ–</strong>ï¼šè¯¥ç»“æ„æ”¯æŒå¤šç§è¯­è¨€ï¼Œé€šè¿‡åŒ…å«ç‰¹å®šè¯­è¨€åŒ…çš„èµ„æºï¼Œä¿ƒè¿›å…¨çƒåº”ç”¨ç¨‹åºçš„è¦†ç›–ã€‚</li>
</ul>
<p><strong>Info.plist</strong></p>
<p><strong>Info.plist</strong>æ˜¯iOSåº”ç”¨ç¨‹åºçš„åŸºçŸ³ï¼Œä»¥<strong>é”®å€¼</strong>å¯¹çš„å½¢å¼å°è£…å…³é”®é…ç½®æ•°æ®ã€‚æ­¤æ–‡ä»¶ä¸ä»…æ˜¯åº”ç”¨ç¨‹åºçš„å¿…éœ€å“ï¼Œä¹Ÿæ˜¯æ†ç»‘åœ¨å†…çš„åº”ç”¨æ‰©å±•å’Œæ¡†æ¶çš„å¿…éœ€å“ã€‚å®ƒä»¥XMLæˆ–äºŒè¿›åˆ¶æ ¼å¼ç»“æ„åŒ–ï¼ŒåŒ…å«ä»åº”ç”¨æƒé™åˆ°å®‰å…¨é…ç½®çš„å…³é”®ä¿¡æ¯ã€‚æœ‰å…³å¯ç”¨é”®çš„è¯¦ç»†æ¢ç´¢ï¼Œå¯ä»¥å‚è€ƒ<a href="https://developer.apple.com/documentation/bundleresources/information_property_list?language=objc"><strong>Apple Developer Documentation</strong></a>ã€‚</p>
<p>å¯¹äºå¸Œæœ›ä»¥æ›´æ˜“äºè®¿é—®çš„æ ¼å¼å¤„ç†æ­¤æ–‡ä»¶çš„ç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡åœ¨macOSä¸Šä½¿ç”¨<code>plutil</code>ï¼ˆåœ¨10.2åŠæ›´é«˜ç‰ˆæœ¬ä¸­åŸç”Ÿå¯ç”¨ï¼‰æˆ–åœ¨Linuxä¸Šä½¿ç”¨<code>plistutil</code>è½»æ¾å®ç°XMLè½¬æ¢ã€‚è½¬æ¢çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å¯¹äºmacOS</strong>ï¼š</li>
</ul>
<pre><code class="language-bash">$ plutil -convert xml1 Info.plist
</code></pre>
<ul>
<li><strong>å¯¹äºLinux</strong>:</li>
</ul>
<pre><code class="language-bash">$ apt install libplist-utils
$ plistutil -i Info.plist -o Info_xml.plist
</code></pre>
<p>åœ¨<strong>Info.plist</strong>æ–‡ä»¶å¯ä»¥é€éœ²çš„ä¼—å¤šä¿¡æ¯ä¸­ï¼Œæ˜¾è‘—æ¡ç›®åŒ…æ‹¬åº”ç”¨æƒé™å­—ç¬¦ä¸²ï¼ˆ<code>UsageDescription</code>ï¼‰ã€è‡ªå®šä¹‰URLæ–¹æ¡ˆï¼ˆ<code>CFBundleURLTypes</code>ï¼‰ä»¥åŠåº”ç”¨ä¼ è¾“å®‰å…¨é…ç½®ï¼ˆ<code>NSAppTransportSecurity</code>ï¼‰ã€‚è¿™äº›æ¡ç›®ï¼Œä»¥åŠå…¶ä»–å¦‚å¯¼å‡º/å¯¼å…¥çš„è‡ªå®šä¹‰æ–‡æ¡£ç±»å‹ï¼ˆ<code>UTExportedTypeDeclarations</code> / <code>UTImportedTypeDeclarations</code>ï¼‰ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥æ–‡ä»¶æˆ–ä½¿ç”¨ç®€å•çš„<code>grep</code>å‘½ä»¤è½»æ¾æ‰¾åˆ°ï¼š</p>
<pre><code class="language-bash">$ grep -i &lt;keyword&gt; Info.plist
</code></pre>
<p><strong>æ•°æ®è·¯å¾„</strong></p>
<p>åœ¨ iOS ç¯å¢ƒä¸­ï¼Œç›®å½•ä¸“é—¨ç”¨äº <strong>ç³»ç»Ÿåº”ç”¨ç¨‹åº</strong> å’Œ <strong>ç”¨æˆ·å®‰è£…çš„åº”ç”¨ç¨‹åº</strong>ã€‚ç³»ç»Ÿåº”ç”¨ç¨‹åºä½äº <code>/Applications</code> ç›®å½•ä¸‹ï¼Œè€Œç”¨æˆ·å®‰è£…çš„åº”ç”¨ç¨‹åºåˆ™æ”¾ç½®åœ¨ <code>/var/mobile/containers/Data/Application/</code> ä¸‹ã€‚è¿™äº›åº”ç”¨ç¨‹åºè¢«åˆ†é…ä¸€ä¸ªç§°ä¸º <strong>128-bit UUID</strong> çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä½¿å¾—æ‰‹åŠ¨å®šä½åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹çš„ä»»åŠ¡å› ç›®å½•åç§°çš„éšæœºæ€§è€Œå˜å¾—å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</p>
<p>{% hint style="warning" %}
ç”±äº iOS ä¸­çš„åº”ç”¨ç¨‹åºå¿…é¡»è¿›è¡Œæ²™ç®±å¤„ç†ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºåœ¨ <strong><code>$HOME/Library/Containers</code></strong> ä¸­ä¹Ÿä¼šæœ‰ä¸€ä¸ªä»¥åº”ç”¨ç¨‹åºçš„ <strong><code>CFBundleIdentifier</code></strong> ä½œä¸ºæ–‡ä»¶å¤¹åç§°çš„æ–‡ä»¶å¤¹ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼ˆæ•°æ®å’Œå®¹å™¨æ–‡ä»¶å¤¹ï¼‰éƒ½æœ‰æ–‡ä»¶ <strong><code>.com.apple.mobile_container_manager.metadata.plist</code></strong>ï¼Œè¯¥æ–‡ä»¶åœ¨é”® <code>MCMetadataIdentifier</code> ä¸­é“¾æ¥äº†è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚
{% endhint %}</p>
<p>ä¸ºäº†æ–¹ä¾¿å‘ç°ç”¨æˆ·å®‰è£…çš„åº”ç”¨ç¨‹åºçš„å®‰è£…ç›®å½•ï¼Œ<strong>objection å·¥å…·</strong> æä¾›äº†ä¸€ä¸ªæœ‰ç”¨çš„å‘½ä»¤ <code>env</code>ã€‚è¯¥å‘½ä»¤æ­ç¤ºäº†ç›¸å…³åº”ç”¨ç¨‹åºçš„è¯¦ç»†ç›®å½•ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨æ­¤å‘½ä»¤çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-bash">OWASP.iGoat-Swift on (iPhone: 11.1.2) [usb] # env

Name               Path
-----------------  -------------------------------------------------------------------------------------------
BundlePath         /var/containers/Bundle/Application/3ADAF47D-A734-49FA-B274-FBCA66589E67/iGoat-Swift.app
CachesDirectory    /var/mobile/Containers/Data/Application/8C8E7EB0-BC9B-435B-8EF8-8F5560EB0693/Library/Caches
DocumentDirectory  /var/mobile/Containers/Data/Application/8C8E7EB0-BC9B-435B-8EF8-8F5560EB0693/Documents
LibraryDirectory   /var/mobile/Containers/Data/Application/8C8E7EB0-BC9B-435B-8EF8-8F5560EB0693/Library
</code></pre>
<p>æˆ–è€…ï¼Œå¯ä»¥ä½¿ç”¨ <code>find</code> å‘½ä»¤åœ¨ <code>/private/var/containers</code> ä¸­æœç´¢åº”ç”¨ç¨‹åºåç§°ï¼š</p>
<pre><code class="language-bash">find /private/var/containers -name "Progname*"
</code></pre>
<p>å‘½ä»¤å¦‚ <code>ps</code> å’Œ <code>lsof</code> ä¹Ÿå¯ä»¥ç”¨æ¥è¯†åˆ«åº”ç”¨ç¨‹åºçš„è¿›ç¨‹å’Œåˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶ï¼Œä»è€Œæä¾›æœ‰å…³åº”ç”¨ç¨‹åºæ´»åŠ¨ç›®å½•è·¯å¾„çš„è§è§£ï¼š</p>
<pre><code class="language-bash">ps -ef | grep -i &lt;app-name&gt;
lsof -p &lt;pid&gt; | grep -i "/containers" | head -n 1
</code></pre>
<p><strong>Bundle directory:</strong></p>
<ul>
<li><strong>AppName.app</strong></li>
<li>è¿™æ˜¯åœ¨IPAä¸­çœ‹åˆ°çš„åº”ç”¨ç¨‹åºåŒ…ï¼Œå®ƒåŒ…å«äº†åŸºæœ¬çš„åº”ç”¨ç¨‹åºæ•°æ®ã€é™æ€å†…å®¹ä»¥åŠåº”ç”¨ç¨‹åºçš„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li>
<li>è¯¥ç›®å½•å¯¹ç”¨æˆ·å¯è§ï¼Œä½†<strong>ç”¨æˆ·æ— æ³•å†™å…¥</strong>ã€‚</li>
<li>æ­¤ç›®å½•ä¸­çš„å†…å®¹<strong>ä¸è¢«å¤‡ä»½</strong>ã€‚</li>
<li>æ­¤æ–‡ä»¶å¤¹çš„å†…å®¹ç”¨äº<strong>éªŒè¯ä»£ç ç­¾å</strong>ã€‚</li>
</ul>
<p><strong>Data directory:</strong></p>
<ul>
<li><strong>Documents/</strong></li>
<li>åŒ…å«æ‰€æœ‰ç”¨æˆ·ç”Ÿæˆçš„æ•°æ®ã€‚åº”ç”¨ç¨‹åºæœ€ç»ˆç”¨æˆ·å‘èµ·æ­¤æ•°æ®çš„åˆ›å»ºã€‚</li>
<li>å¯¹ç”¨æˆ·å¯è§ï¼Œ<strong>ç”¨æˆ·å¯ä»¥å†™å…¥</strong>ã€‚</li>
<li>æ­¤ç›®å½•ä¸­çš„å†…å®¹<strong>è¢«å¤‡ä»½</strong>ã€‚</li>
<li>åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è®¾ç½®<code>NSURLIsExcludedFromBackupKey</code>æ¥ç¦ç”¨è·¯å¾„ã€‚</li>
<li><strong>Library/</strong></li>
<li>åŒ…å«æ‰€æœ‰<strong>éç”¨æˆ·ç‰¹å®š</strong>çš„<strong>æ–‡ä»¶</strong>ï¼Œä¾‹å¦‚<strong>ç¼“å­˜</strong>ã€<strong>åå¥½è®¾ç½®</strong>ã€<strong>cookies</strong>å’Œå±æ€§åˆ—è¡¨ï¼ˆplistï¼‰é…ç½®æ–‡ä»¶ã€‚</li>
<li>iOSåº”ç”¨ç¨‹åºé€šå¸¸ä½¿ç”¨<code>Application Support</code>å’Œ<code>Caches</code>å­ç›®å½•ï¼Œä½†åº”ç”¨ç¨‹åºå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰å­ç›®å½•ã€‚</li>
<li><strong>Library/Caches/</strong></li>
<li>åŒ…å«<strong>åŠæŒä¹…çš„ç¼“å­˜æ–‡ä»¶</strong>ã€‚</li>
<li>å¯¹ç”¨æˆ·ä¸å¯è§ï¼Œ<strong>ç”¨æˆ·æ— æ³•å†™å…¥</strong>ã€‚</li>
<li>æ­¤ç›®å½•ä¸­çš„å†…å®¹<strong>ä¸è¢«å¤‡ä»½</strong>ã€‚</li>
<li>å½“åº”ç”¨ç¨‹åºæœªè¿è¡Œä¸”å­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šè‡ªåŠ¨åˆ é™¤æ­¤ç›®å½•çš„æ–‡ä»¶ã€‚</li>
<li><strong>Library/Application Support/</strong></li>
<li>åŒ…å«è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„<strong>æŒä¹…****æ–‡ä»¶</strong>ã€‚</li>
<li>å¯¹<strong>ç”¨æˆ·ä¸å¯è§</strong>ï¼Œç”¨æˆ·æ— æ³•å†™å…¥ã€‚</li>
<li>æ­¤ç›®å½•ä¸­çš„å†…å®¹<strong>è¢«å¤‡ä»½</strong>ã€‚</li>
<li>åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è®¾ç½®<code>NSURLIsExcludedFromBackupKey</code>æ¥ç¦ç”¨è·¯å¾„ã€‚</li>
<li><strong>Library/Preferences/</strong></li>
<li>ç”¨äºå­˜å‚¨å³ä½¿åœ¨åº”ç”¨ç¨‹åºé‡æ–°å¯åŠ¨åä¹Ÿèƒ½<strong>æŒä¹…</strong>çš„å±æ€§ã€‚</li>
<li>ä¿¡æ¯ä»¥æœªåŠ å¯†çš„å½¢å¼ä¿å­˜åœ¨åº”ç”¨ç¨‹åºæ²™ç®±ä¸­çš„ä¸€ä¸ªåä¸º[BUNDLE_ID].plistçš„plistæ–‡ä»¶ä¸­ã€‚</li>
<li>ä½¿ç”¨<code>NSUserDefaults</code>å­˜å‚¨çš„æ‰€æœ‰é”®/å€¼å¯¹éƒ½å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚</li>
<li><strong>tmp/</strong></li>
<li>ä½¿ç”¨æ­¤ç›®å½•å†™å…¥<strong>ä¸´æ—¶æ–‡ä»¶</strong>ï¼Œè¿™äº›æ–‡ä»¶åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨ä¹‹é—´ä¸éœ€è¦æŒä¹…åŒ–ã€‚</li>
<li>åŒ…å«éæŒä¹…çš„ç¼“å­˜æ–‡ä»¶ã€‚</li>
<li>å¯¹ç”¨æˆ·<strong>ä¸å¯è§</strong>ã€‚</li>
<li>æ­¤ç›®å½•ä¸­çš„å†…å®¹ä¸è¢«å¤‡ä»½ã€‚</li>
<li>å½“åº”ç”¨ç¨‹åºæœªè¿è¡Œä¸”å­˜å‚¨ç©ºé—´ä¸è¶³æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šè‡ªåŠ¨åˆ é™¤æ­¤ç›®å½•çš„æ–‡ä»¶ã€‚</li>
</ul>
<p>è®©æˆ‘ä»¬æ›´ä»”ç»†åœ°çœ‹çœ‹iGoat-Swiftçš„åº”ç”¨ç¨‹åºåŒ…ï¼ˆ.appï¼‰ç›®å½•ï¼Œä½äºåŒ…ç›®å½•å†…ï¼ˆ<code>/var/containers/Bundle/Application/3ADAF47D-A734-49FA-B274-FBCA66589E67/iGoat-Swift.app</code>ï¼‰ï¼š</p>
<pre><code class="language-bash">OWASP.iGoat-Swift on (iPhone: 11.1.2) [usb] # ls
NSFileType      Perms  NSFileProtection    ...  Name
------------  -------  ------------------  ...  --------------------------------------
Regular           420  None                ...  rutger.html
Regular           420  None                ...  mansi.html
Regular           420  None                ...  splash.html
Regular           420  None                ...  about.html

Regular           420  None                ...  LICENSE.txt
Regular           420  None                ...  Sentinel.txt
Regular           420  None                ...  README.txt
</code></pre>
<h3 id="binary-reversing"><a class="header" href="#binary-reversing">Binary Reversing</a></h3>
<p>åœ¨ <code>&lt;application-name&gt;.app</code> æ–‡ä»¶å¤¹ä¸­ï¼Œæ‚¨ä¼šæ‰¾åˆ°ä¸€ä¸ªåä¸º <code>&lt;application-name&gt;</code> çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™æ˜¯å°†è¢« <strong>æ‰§è¡Œ</strong> çš„æ–‡ä»¶ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å·¥å…· <strong><code>otool</code></strong> å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡ŒåŸºæœ¬æ£€æŸ¥ï¼š</p>
<pre><code class="language-bash">otool -Vh DVIA-v2 #Check some compilation attributes
magic  cputype cpusubtype  caps    filetype ncmds sizeofcmds      flags
MH_MAGIC_64    ARM64        ALL  0x00     EXECUTE    65       7112   NOUNDEFS DYLDLINK TWOLEVEL WEAK_DEFINES BINDS_TO_WEAK PIE

otool -L DVIA-v2 #Get third party libraries
DVIA-v2:
/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 400.9.1)
/usr/lib/libsqlite3.dylib (compatibility version 9.0.0, current version 274.6.0)
/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.11)
@rpath/Bolts.framework/Bolts (compatibility version 1.0.0, current version 1.0.0)
[...]
</code></pre>
<p><strong>æ£€æŸ¥åº”ç”¨æ˜¯å¦åŠ å¯†</strong></p>
<p>æŸ¥çœ‹æ˜¯å¦æœ‰ä»»ä½•è¾“å‡ºï¼š</p>
<pre><code class="language-bash">otool -l &lt;app-binary&gt; | grep -A 4 LC_ENCRYPTION_INFO
</code></pre>
<p><strong>åæ±‡ç¼–äºŒè¿›åˆ¶æ–‡ä»¶</strong></p>
<p>åæ±‡ç¼–æ–‡æœ¬æ®µï¼š</p>
<pre><code class="language-bash">otool -tV DVIA-v2
DVIA-v2:
(__TEXT,__text) section
+[DDLog initialize]:
0000000100004ab8    sub    sp, sp, #0x60
0000000100004abc    stp    x29, x30, [sp, #0x50]   ; Latency: 6
0000000100004ac0    add    x29, sp, #0x50
0000000100004ac4    sub    x8, x29, #0x10
0000000100004ac8    mov    x9, #0x0
0000000100004acc    adrp    x10, 1098 ; 0x10044e000
0000000100004ad0    add    x10, x10, #0x268
</code></pre>
<p>è¦æ‰“å°ç¤ºä¾‹åº”ç”¨ç¨‹åºçš„ <strong>Objective-C æ®µ</strong>ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<pre><code class="language-bash">otool -oV DVIA-v2
DVIA-v2:
Contents of (__DATA,__objc_classlist) section
00000001003dd5b8 0x1004423d0 _OBJC_CLASS_$_DDLog
isa        0x1004423a8 _OBJC_METACLASS_$_DDLog
superclass 0x0 _OBJC_CLASS_$_NSObject
cache      0x0 __objc_empty_cache
vtable     0x0
data       0x1003de748
flags          0x80
instanceStart  8
</code></pre>
<p>ä¸ºäº†è·å¾—æ›´ç´§å‡‘çš„ Objective-C ä»£ç ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <a href="http://stevenygard.com/projects/class-dump/"><strong>class-dump</strong></a>:</p>
<pre><code class="language-bash">class-dump some-app
//
//     Generated by class-dump 3.5 (64 bit).
//
//     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2013 by Steve Nygard.
//

#pragma mark Named Structures

struct CGPoint {
double _field1;
double _field2;
};

struct CGRect {
struct CGPoint _field1;
struct CGSize _field2;
};

struct CGSize {
double _field1;
double _field2;
};
</code></pre>
<p>ç„¶è€Œï¼Œåæ±‡ç¼–äºŒè¿›åˆ¶æ–‡ä»¶çš„æœ€ä½³é€‰é¡¹æ˜¯ï¼š<a href="https://www.hopperapp.com/download.html?"><strong>Hopper</strong></a> å’Œ <a href="https://www.hex-rays.com/products/ida/support/download_freeware/"><strong>IDA</strong></a>ã€‚</p>
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>
<p><br />
ä½¿ç”¨ <a href="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=text&amp;utm_campaign=ppc&amp;utm_term=trickest&amp;utm_content=ios-pentesting"><strong>Trickest</strong></a> è½»æ¾æ„å»ºå’Œ <strong>è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹</strong>ï¼Œç”±ä¸–ç•Œä¸Š <strong>æœ€å…ˆè¿›</strong> çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚<br />
ä»Šå¤©å°±è·å–è®¿é—®æƒé™ï¼š</p>
<p>{% embed url="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=banner&amp;utm_campaign=ppc&amp;utm_content=ios-pentesting" %}</p>
<h2 id="æ•°æ®å­˜å‚¨"><a class="header" href="#æ•°æ®å­˜å‚¨">æ•°æ®å­˜å‚¨</a></h2>
<p>è¦äº†è§£ iOS å¦‚ä½•åœ¨è®¾å¤‡ä¸­å­˜å‚¨æ•°æ®ï¼Œè¯·é˜…è¯»æ­¤é¡µé¢ï¼š</p>
<p>{% content-ref url="ios-basics.md" %}
<a href="ios-basics.html">ios-basics.md</a>
{% endcontent-ref %}</p>
<p>{% hint style="warning" %}
ä»¥ä¸‹å­˜å‚¨ä¿¡æ¯çš„åœ°æ–¹åº”åœ¨ <strong>å®‰è£…åº”ç”¨ç¨‹åºåç«‹å³</strong> æ£€æŸ¥ï¼Œ<strong>æ£€æŸ¥åº”ç”¨ç¨‹åºçš„æ‰€æœ‰åŠŸèƒ½å</strong>ï¼Œç”šè‡³åœ¨ <strong>ä»ä¸€ä¸ªç”¨æˆ·æ³¨é”€å¹¶ç™»å½•åˆ°å¦ä¸€ä¸ªç”¨æˆ·å</strong>ã€‚<br />
ç›®æ ‡æ˜¯æ‰¾åˆ°åº”ç”¨ç¨‹åºçš„ <strong>æœªä¿æŠ¤æ•æ„Ÿä¿¡æ¯</strong>ï¼ˆå¯†ç ã€ä»¤ç‰Œï¼‰ã€å½“å‰ç”¨æˆ·å’Œä¹‹å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ã€‚
{% endhint %}</p>
<h3 id="plist"><a class="header" href="#plist">Plist</a></h3>
<p><strong>plist</strong> æ–‡ä»¶æ˜¯ç»“æ„åŒ–çš„ XML æ–‡ä»¶ï¼Œ<strong>åŒ…å«é”®å€¼å¯¹</strong>ã€‚è¿™æ˜¯ä¸€ç§å­˜å‚¨æŒä¹…æ•°æ®çš„æ–¹å¼ï¼Œå› æ­¤æœ‰æ—¶æ‚¨å¯èƒ½ä¼šåœ¨è¿™äº›æ–‡ä»¶ä¸­æ‰¾åˆ° <strong>æ•æ„Ÿä¿¡æ¯</strong>ã€‚å»ºè®®åœ¨å®‰è£…åº”ç”¨ç¨‹åºåä»¥åŠåœ¨å¯†é›†ä½¿ç”¨åæ£€æŸ¥è¿™äº›æ–‡ä»¶ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦å†™å…¥äº†æ–°æ•°æ®ã€‚</p>
<p>åœ¨ plist æ–‡ä»¶ä¸­æŒä¹…åŒ–æ•°æ®çš„æœ€å¸¸è§æ–¹å¼æ˜¯é€šè¿‡ä½¿ç”¨ <strong>NSUserDefaults</strong>ã€‚æ­¤ plist æ–‡ä»¶ä¿å­˜åœ¨åº”ç”¨ç¨‹åºæ²™ç®±ä¸­çš„ <strong><code>Library/Preferences/&lt;appBundleID&gt;.plist</code></strong></p>
<p><a href="https://developer.apple.com/documentation/foundation/nsuserdefaults"><code>NSUserDefaults</code></a> ç±»æä¾›äº†ä¸é»˜è®¤ç³»ç»Ÿäº¤äº’çš„ç¼–ç¨‹æ¥å£ã€‚é»˜è®¤ç³»ç»Ÿå…è®¸åº”ç”¨ç¨‹åºæ ¹æ® <strong>ç”¨æˆ·åå¥½</strong> è‡ªå®šä¹‰å…¶è¡Œä¸ºã€‚é€šè¿‡ <code>NSUserDefaults</code> ä¿å­˜çš„æ•°æ®å¯ä»¥åœ¨åº”ç”¨ç¨‹åºåŒ…ä¸­æŸ¥çœ‹ã€‚æ­¤ç±»å°† <strong>æ•°æ®</strong> å­˜å‚¨åœ¨ <strong>plist</strong> <strong>æ–‡ä»¶</strong> ä¸­ï¼Œä½†æ—¨åœ¨ç”¨äºå°‘é‡æ•°æ®ã€‚</p>
<p>æ­¤æ•°æ®ä¸èƒ½å†é€šè¿‡å—ä¿¡ä»»çš„è®¡ç®—æœºç›´æ¥è®¿é—®ï¼Œä½†å¯ä»¥é€šè¿‡æ‰§è¡Œ <strong>å¤‡ä»½</strong> è¿›è¡Œè®¿é—®ã€‚</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ objection çš„ <code>ios nsuserdefaults get</code> æ¥ <strong>è½¬å‚¨</strong> ä½¿ç”¨ <strong><code>NSUserDefaults</code></strong> ä¿å­˜çš„ä¿¡æ¯ã€‚</p>
<p>è¦æ‰¾åˆ°åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰ plistï¼Œæ‚¨å¯ä»¥è®¿é—® <code>/private/var/mobile/Containers/Data/Application/{APPID}</code> å¹¶è¿è¡Œï¼š</p>
<pre><code class="language-bash">find ./ -name "*.plist"
</code></pre>
<p>è¦å°†æ–‡ä»¶ä» <strong>XML æˆ–äºŒè¿›åˆ¶ (bplist)</strong> æ ¼å¼è½¬æ¢ä¸º XMLï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„æ“ä½œç³»ç»Ÿä½¿ç”¨å„ç§æ–¹æ³•ï¼š</p>
<p><strong>å¯¹äº macOS ç”¨æˆ·ï¼š</strong> ä½¿ç”¨ <code>plutil</code> å‘½ä»¤ã€‚å®ƒæ˜¯ macOS (10.2+) ä¸­çš„å†…ç½®å·¥å…·ï¼Œä¸“ä¸ºæ­¤ç›®çš„è®¾è®¡ï¼š</p>
<pre><code class="language-bash">$ plutil -convert xml1 Info.plist
</code></pre>
<p><strong>å¯¹äºLinuxç”¨æˆ·ï¼š</strong> é¦–å…ˆå®‰è£… <code>libplist-utils</code>ï¼Œç„¶åä½¿ç”¨ <code>plistutil</code> è½¬æ¢æ‚¨çš„æ–‡ä»¶ï¼š</p>
<pre><code class="language-bash">$ apt install libplist-utils
$ plistutil -i Info.plist -o Info_xml.plist
</code></pre>
<p><strong>åœ¨ Objection ä¼šè¯ä¸­ï¼š</strong> å¯¹äºåˆ†æç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œç‰¹å®šå‘½ä»¤å…è®¸æ‚¨ç›´æ¥è½¬æ¢ plist æ–‡ä»¶ï¼š</p>
<pre><code class="language-bash">ios plist cat /private/var/mobile/Containers/Data/Application/&lt;Application-UUID&gt;/Library/Preferences/com.some.package.app.plist
</code></pre>
<h3 id="core-data"><a class="header" href="#core-data">Core Data</a></h3>
<p><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/nsfetchedresultscontroller.html#//apple_ref/doc/uid/TP40001075-CH8-SW1"><code>Core Data</code></a> æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†åº”ç”¨ç¨‹åºä¸­å¯¹è±¡æ¨¡å‹å±‚çš„æ¡†æ¶ã€‚<a href="https://cocoacasts.com/what-is-the-difference-between-core-data-and-sqlite/">Core Data å¯ä»¥ä½¿ç”¨ SQLite ä½œä¸ºå…¶æŒä¹…å­˜å‚¨</a>ï¼Œä½†è¯¥æ¡†æ¶æœ¬èº«ä¸æ˜¯æ•°æ®åº“ã€‚<br />
CoreData é»˜è®¤æƒ…å†µä¸‹ä¸åŠ å¯†å…¶æ•°æ®ã€‚ç„¶è€Œï¼Œå¯ä»¥å‘ CoreData æ·»åŠ é¢å¤–çš„åŠ å¯†å±‚ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://github.com/project-imas/encrypted-core-data">GitHub Repo</a>ã€‚</p>
<p>æ‚¨å¯ä»¥åœ¨è·¯å¾„ <code>/private/var/mobile/Containers/Data/Application/{APPID}/Library/Application Support</code> ä¸­æ‰¾åˆ°åº”ç”¨ç¨‹åºçš„ SQLite Core Data ä¿¡æ¯ã€‚</p>
<p><strong>å¦‚æœæ‚¨å¯ä»¥æ‰“å¼€ SQLite å¹¶è®¿é—®æ•æ„Ÿä¿¡æ¯ï¼Œé‚£ä¹ˆæ‚¨å‘ç°äº†ä¸€ä¸ªé…ç½®é”™è¯¯ã€‚</strong></p>
<p>{% code title="Code from iGoat" %}</p>
<pre><code class="language-objectivec">-(void)storeDetails {
AppDelegate * appDelegate = (AppDelegate *)(UIApplication.sharedApplication.delegate);

NSManagedObjectContext *context =[appDelegate managedObjectContext];

User *user = [self fetchUser];
if (user) {
return;
}
user = [NSEntityDescription insertNewObjectForEntityForName:@"User"
inManagedObjectContext:context];
user.email = CoreDataEmail;
user.password = CoreDataPassword;
NSError *error;
if (![context save:&amp;error]) {
NSLog(@"Error in saving data: %@", [error localizedDescription]);

}else{
NSLog(@"data stored in core data");
}
}
</code></pre>
<p>{% endcode %}</p>
<h3 id="yapdatabase"><a class="header" href="#yapdatabase">YapDatabase</a></h3>
<p><a href="https://github.com/yapstudios/YapDatabase">YapDatabase</a> æ˜¯ä¸€ä¸ªåŸºäº SQLite çš„é”®å€¼å­˜å‚¨ã€‚<br />
ç”±äº Yap æ•°æ®åº“æ˜¯ sqlite æ•°æ®åº“ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å‰ä¸€èŠ‚ä¸­æä¾›çš„å‘½ä»¤æ‰¾åˆ°å®ƒä»¬ã€‚</p>
<h3 id="å…¶ä»–-sqlite-æ•°æ®åº“"><a class="header" href="#å…¶ä»–-sqlite-æ•°æ®åº“">å…¶ä»– SQLite æ•°æ®åº“</a></h3>
<p>åº”ç”¨ç¨‹åºé€šå¸¸ä¼šåˆ›å»ºè‡ªå·±çš„ sqlite æ•°æ®åº“ã€‚å®ƒä»¬å¯èƒ½åœ¨ä¸Šé¢<strong>å­˜å‚¨</strong> <strong>æ•æ„Ÿ</strong> <strong>æ•°æ®</strong>ï¼Œå¹¶ä¸”æœªåŠ å¯†ã€‚å› æ­¤ï¼Œæ£€æŸ¥åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„æ¯ä¸ªæ•°æ®åº“æ€»æ˜¯å¾ˆæœ‰è¶£ã€‚å› æ­¤ï¼Œè¯·è½¬åˆ°ä¿å­˜æ•°æ®çš„åº”ç”¨ç¨‹åºç›®å½• (<code>/private/var/mobile/Containers/Data/Application/{APPID}</code>)</p>
<pre><code class="language-bash">find ./ -name "*.sqlite" -or -name "*.db"
</code></pre>
<h3 id="firebase-å®æ—¶æ•°æ®åº“"><a class="header" href="#firebase-å®æ—¶æ•°æ®åº“">Firebase å®æ—¶æ•°æ®åº“</a></h3>
<p>å¼€å‘è€…å¯ä»¥é€šè¿‡ Firebase å®æ—¶æ•°æ®åº“åœ¨ <strong>NoSQL äº‘æ‰˜ç®¡æ•°æ®åº“</strong> ä¸­ <strong>å­˜å‚¨å’ŒåŒæ­¥æ•°æ®</strong>ã€‚æ•°æ®ä»¥ JSON æ ¼å¼å­˜å‚¨ï¼Œå¹¶å®æ—¶åŒæ­¥åˆ°æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ã€‚</p>
<p>æ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å¦‚ä½•æ£€æŸ¥é…ç½®é”™è¯¯çš„ Firebase æ•°æ®åº“ï¼š</p>
<p>{% content-ref url="../../network-services-pentesting/pentesting-web/buckets/firebase-database.md" %}
<a href="../../network-services-pentesting/pentesting-web/buckets/firebase-database.html">firebase-database.md</a>
{% endcontent-ref %}</p>
<h3 id="realm-æ•°æ®åº“"><a class="header" href="#realm-æ•°æ®åº“">Realm æ•°æ®åº“</a></h3>
<p><a href="https://realm.io/docs/objc/latest/">Realm Objective-C</a> å’Œ <a href="https://realm.io/docs/swift/latest/">Realm Swift</a> æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æ•°æ®å­˜å‚¨æ›¿ä»£æ–¹æ¡ˆï¼Œè¿™æ˜¯ Apple æœªæä¾›çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬ <strong>ä»¥æœªåŠ å¯†çš„æ–¹å¼å­˜å‚¨æ•°æ®</strong>ï¼Œå¯ä»¥é€šè¿‡ç‰¹å®šé…ç½®å¯ç”¨åŠ å¯†ã€‚</p>
<p>æ•°æ®åº“ä½äºï¼š<code>/private/var/mobile/Containers/Data/Application/{APPID}</code>ã€‚è¦æ¢ç´¢è¿™äº›æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">iPhone:/private/var/mobile/Containers/Data/Application/A079DF84-726C-4AEA-A194-805B97B3684A/Documents root# ls
default.realm  default.realm.lock  default.realm.management/  default.realm.note|

$ find ./ -name "*.realm*"
</code></pre>
<p>ä¸ºäº†æŸ¥çœ‹è¿™äº›æ•°æ®åº“æ–‡ä»¶ï¼Œæ¨èä½¿ç”¨ <a href="https://github.com/realm/realm-studio"><strong>Realm Studio</strong></a> å·¥å…·ã€‚</p>
<p>è¦åœ¨ Realm æ•°æ®åº“ä¸­å®ç°åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="language-swift">// Open the encrypted Realm file where getKey() is a method to obtain a key from the Keychain or a server
let config = Realm.Configuration(encryptionKey: getKey())
do {
let realm = try Realm(configuration: config)
// Use the Realm as normal
} catch let error as NSError {
// If the encryption key is wrong, `error` will say that it's an invalid database
fatalError("Error opening realm: \(error)")
}
</code></pre>
<h3 id="couchbase-lite-æ•°æ®åº“"><a class="header" href="#couchbase-lite-æ•°æ®åº“">Couchbase Lite æ•°æ®åº“</a></h3>
<p><a href="https://github.com/couchbase/couchbase-lite-ios">Couchbase Lite</a> è¢«æè¿°ä¸ºä¸€ä¸ª <strong>è½»é‡çº§</strong> å’Œ <strong>åµŒå…¥å¼</strong> æ•°æ®åº“å¼•æ“ï¼Œéµå¾ª <strong>æ–‡æ¡£å¯¼å‘</strong> (NoSQL) æ–¹æ³•ã€‚å®ƒæ—¨åœ¨åŸç”Ÿæ”¯æŒ <strong>iOS</strong> å’Œ <strong>macOS</strong>ï¼Œæä¾›æ— ç¼åŒæ­¥æ•°æ®çš„èƒ½åŠ›ã€‚</p>
<p>è¦è¯†åˆ«è®¾å¤‡ä¸Šæ½œåœ¨çš„ Couchbase æ•°æ®åº“ï¼Œåº”æ£€æŸ¥ä»¥ä¸‹ç›®å½•ï¼š</p>
<pre><code class="language-bash">ls /private/var/mobile/Containers/Data/Application/{APPID}/Library/Application Support/
</code></pre>
<h3 id="cookies"><a class="header" href="#cookies">Cookies</a></h3>
<p>iOS å°†åº”ç”¨çš„ cookies å­˜å‚¨åœ¨æ¯ä¸ªåº”ç”¨æ–‡ä»¶å¤¹å†…çš„ <strong><code>Library/Cookies/cookies.binarycookies</code></strong> ä¸­ã€‚ç„¶è€Œï¼Œå¼€å‘è€…æœ‰æ—¶å†³å®šå°†å®ƒä»¬ä¿å­˜åœ¨ <strong>keychain</strong> ä¸­ï¼Œå› ä¸ºæåˆ°çš„ <strong>cookie æ–‡ä»¶å¯ä»¥åœ¨å¤‡ä»½ä¸­è®¿é—®</strong>ã€‚</p>
<p>è¦æ£€æŸ¥ cookies æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <a href="https://github.com/mdegrazia/Safari-Binary-Cookie-Parser"><strong>è¿™ä¸ª python è„šæœ¬</strong></a> æˆ–ä½¿ç”¨ objection çš„ <strong><code>ios cookies get</code>ã€‚</strong><br />
<strong>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ objection å°†è¿™äº›æ–‡ä»¶è½¬æ¢ä¸º JSON æ ¼å¼å¹¶æ£€æŸ¥æ•°æ®ã€‚</strong></p>
<pre><code class="language-bash">...itudehacks.DVIAswiftv2.develop on (iPhone: 13.2.3) [usb] # ios cookies get --json
[
{
"domain": "highaltitudehacks.com",
"expiresDate": "2051-09-15 07:46:43 +0000",
"isHTTPOnly": "false",
"isSecure": "false",
"name": "username",
"path": "/",
"value": "admin123",
"version": "0"
}
]
</code></pre>
<h3 id="cache"><a class="header" href="#cache">Cache</a></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNSURLSessionå°†æ•°æ®ï¼ˆä¾‹å¦‚<strong>HTTPè¯·æ±‚å’Œå“åº”</strong>ï¼‰å­˜å‚¨åœ¨Cache.dbæ•°æ®åº“ä¸­ã€‚å¦‚æœç¼“å­˜äº†ä»¤ç‰Œã€ç”¨æˆ·åæˆ–ä»»ä½•å…¶ä»–æ•æ„Ÿä¿¡æ¯ï¼Œåˆ™è¯¥æ•°æ®åº“å¯èƒ½åŒ…å«<strong>æ•æ„Ÿæ•°æ®</strong>ã€‚è¦æŸ¥æ‰¾ç¼“å­˜çš„ä¿¡æ¯ï¼Œè¯·æ‰“å¼€åº”ç”¨çš„æ•°æ®ç›®å½•ï¼ˆ<code>/var/mobile/Containers/Data/Application/&lt;UUID&gt;</code>ï¼‰ï¼Œç„¶åè½¬åˆ°<code>/Library/Caches/&lt;Bundle Identifier&gt;</code>ã€‚<strong>WebKitç¼“å­˜ä¹Ÿå­˜å‚¨åœ¨Cache.db</strong>æ–‡ä»¶ä¸­ã€‚<strong>Objection</strong>å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>sqlite connect Cache.db</code>æ‰“å¼€å¹¶ä¸æ•°æ®åº“äº¤äº’ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ª<strong>æ™®é€šçš„SQLiteæ•°æ®åº“</strong>ã€‚</p>
<p><strong>å»ºè®®ç¦ç”¨ç¼“å­˜è¿™äº›æ•°æ®</strong>ï¼Œå› ä¸ºå®ƒå¯èƒ½åœ¨è¯·æ±‚æˆ–å“åº”ä¸­åŒ…å«æ•æ„Ÿä¿¡æ¯ã€‚ä»¥ä¸‹åˆ—è¡¨æ˜¾ç¤ºäº†å®ç°æ­¤ç›®çš„çš„ä¸åŒæ–¹æ³•ï¼š</p>
<ol>
<li>å»ºè®®åœ¨æ³¨é”€ååˆ é™¤ç¼“å­˜çš„å“åº”ã€‚è¿™å¯ä»¥é€šè¿‡Appleæä¾›çš„æ–¹æ³•<a href="https://developer.apple.com/documentation/foundation/urlcache/1417802-removeallcachedresponses"><code>removeAllCachedResponses</code></a>æ¥å®Œæˆã€‚æ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è°ƒç”¨æ­¤æ–¹æ³•ï¼š</li>
</ol>
<p><code>URLCache.shared.removeAllCachedResponses()</code></p>
<p>æ­¤æ–¹æ³•å°†ä»Cache.dbæ–‡ä»¶ä¸­åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„è¯·æ±‚å’Œå“åº”ã€‚
2. å¦‚æœæ‚¨ä¸éœ€è¦ä½¿ç”¨cookieçš„ä¼˜åŠ¿ï¼Œå»ºè®®ä»…ä½¿ç”¨URLSessionçš„<a href="https://developer.apple.com/documentation/foundation/urlsessionconfiguration/1410529-ephemeral">.ephemeral</a>é…ç½®å±æ€§ï¼Œè¿™å°†ç¦ç”¨ä¿å­˜cookieå’Œç¼“å­˜ã€‚</p>
<p><a href="https://developer.apple.com/documentation/foundation/urlsessionconfiguration/1410529-ephemeral">Appleæ–‡æ¡£</a>:</p>
<p><code>ä¸€ä¸ªçŸ­æš‚çš„ä¼šè¯é…ç½®å¯¹è±¡ç±»ä¼¼äºé»˜è®¤çš„ä¼šè¯é…ç½®ï¼ˆè§é»˜è®¤ï¼‰ï¼Œä¸åŒä¹‹å¤„åœ¨äºç›¸åº”çš„ä¼šè¯å¯¹è±¡ä¸ä¼šå°†ç¼“å­˜ã€å‡­è¯å­˜å‚¨æˆ–ä»»ä½•ä¸ä¼šè¯ç›¸å…³çš„æ•°æ®å­˜å‚¨åˆ°ç£ç›˜ä¸Šã€‚ç›¸åï¼Œä¸ä¼šè¯ç›¸å…³çš„æ•°æ®å­˜å‚¨åœ¨RAMä¸­ã€‚çŸ­æš‚ä¼šè¯å†™å…¥ç£ç›˜çš„å”¯ä¸€æ—¶é—´æ˜¯å½“æ‚¨å‘Šè¯‰å®ƒå°†URLçš„å†…å®¹å†™å…¥æ–‡ä»¶æ—¶ã€‚</code>
3. é€šè¿‡å°†ç¼“å­˜ç­–ç•¥è®¾ç½®ä¸º<a href="https://developer.apple.com/documentation/foundation/urlcache/storagepolicy/notallowed">.notAllowed</a>ä¹Ÿå¯ä»¥ç¦ç”¨ç¼“å­˜ã€‚è¿™å°†ç¦ç”¨ä»¥ä»»ä½•æ–¹å¼å­˜å‚¨ç¼“å­˜ï¼Œæ— è®ºæ˜¯åœ¨å†…å­˜ä¸­è¿˜æ˜¯åœ¨ç£ç›˜ä¸Šã€‚</p>
<h3 id="snapshots"><a class="header" href="#snapshots">Snapshots</a></h3>
<p>æ¯å½“æ‚¨æŒ‰ä¸‹ä¸»å±å¹•æŒ‰é’®æ—¶ï¼ŒiOS <strong>ä¼šæ‹æ‘„å½“å‰å±å¹•çš„å¿«ç…§</strong>ï¼Œä»¥ä¾¿èƒ½å¤Ÿä»¥æ›´å¹³æ»‘çš„æ–¹å¼è¿‡æ¸¡åˆ°åº”ç”¨ç¨‹åºã€‚ç„¶è€Œï¼Œå¦‚æœå½“å‰å±å¹•ä¸Šå­˜åœ¨<strong>æ•æ„Ÿ</strong> <strong>æ•°æ®</strong>ï¼Œå®ƒå°†è¢«<strong>ä¿å­˜</strong>åœ¨<strong>å›¾åƒ</strong>ä¸­ï¼ˆè¯¥å›¾åƒ<strong>åœ¨é‡å¯åä»ç„¶å­˜åœ¨</strong>ï¼‰ã€‚è¿™äº›å¿«ç…§æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡åŒå‡»ä¸»å±å¹•åœ¨åº”ç”¨ä¹‹é—´åˆ‡æ¢è®¿é—®ã€‚</p>
<p>é™¤éiPhoneè¶Šç‹±ï¼Œå¦åˆ™<strong>æ”»å‡»è€…</strong>éœ€è¦<strong>è®¿é—®</strong>æœªè§£é”çš„<strong>è®¾å¤‡</strong>æ‰èƒ½æŸ¥çœ‹è¿™äº›å±å¹•æˆªå›¾ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€åä¸€ä¸ªå¿«ç…§å­˜å‚¨åœ¨åº”ç”¨çš„æ²™ç›’ä¸­ï¼Œä½äº<code>Library/Caches/Snapshots/</code>æˆ–<code>Library/SplashBoard/Snapshots</code>æ–‡ä»¶å¤¹ä¸­ï¼ˆå—ä¿¡ä»»çš„è®¡ç®—æœºæ— æ³•ä»iOS 7.0è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚</p>
<p>é˜²æ­¢è¿™ç§ä¸è‰¯è¡Œä¸ºçš„ä¸€ç§æ–¹æ³•æ˜¯åœ¨ä½¿ç”¨<code>ApplicationDidEnterBackground()</code>å‡½æ•°æ‹æ‘„å¿«ç…§ä¹‹å‰ï¼Œæ”¾ç½®ä¸€ä¸ªç©ºç™½å±å¹•æˆ–åˆ é™¤æ•æ„Ÿæ•°æ®ã€‚</p>
<p>ä»¥ä¸‹æ˜¯è®¾ç½®é»˜è®¤å±å¹•æˆªå›¾çš„ç¤ºä¾‹ä¿®å¤æ–¹æ³•ã€‚</p>
<p>Swift:</p>
<pre><code class="language-swift">private var backgroundImage: UIImageView?

func applicationDidEnterBackground(_ application: UIApplication) {
let myBanner = UIImageView(image: #imageLiteral(resourceName: "overlayImage"))
myBanner.frame = UIScreen.main.bounds
backgroundImage = myBanner
window?.addSubview(myBanner)
}

func applicationWillEnterForeground(_ application: UIApplication) {
backgroundImage?.removeFromSuperview()
}
</code></pre>
<p>Objective-C:</p>
<pre><code>@property (UIImageView *)backgroundImage;

- (void)applicationDidEnterBackground:(UIApplication *)application {
UIImageView *myBanner = [[UIImageView alloc] initWithImage:@"overlayImage.png"];
self.backgroundImage = myBanner;
self.backgroundImage.bounds = UIScreen.mainScreen.bounds;
[self.window addSubview:myBanner];
}

- (void)applicationWillEnterForeground:(UIApplication *)application {
[self.backgroundImage removeFromSuperview];
}
</code></pre>
<p>è¿™ä¼šåœ¨åº”ç”¨ç¨‹åºè¿›å…¥åå°æ—¶å°†èƒŒæ™¯å›¾åƒè®¾ç½®ä¸º <code>overlayImage.png</code>ã€‚å®ƒé˜²æ­¢æ•æ„Ÿæ•°æ®æ³„æ¼ï¼Œå› ä¸º <code>overlayImage.png</code> å°†å§‹ç»ˆè¦†ç›–å½“å‰è§†å›¾ã€‚</p>
<h3 id="keychain"><a class="header" href="#keychain">Keychain</a></h3>
<p>è¦è®¿é—®å’Œç®¡ç† iOS å¯†é’¥é“¾ï¼Œå¯ä»¥ä½¿ç”¨åƒ <a href="https://github.com/ptoomey3/Keychain-Dumper"><strong>Keychain-Dumper</strong></a> è¿™æ ·çš„å·¥å…·ï¼Œé€‚ç”¨äºè¶Šç‹±è®¾å¤‡ã€‚æ­¤å¤–ï¼Œ<a href="https://github.com/sensepost/objection"><strong>Objection</strong></a> æä¾›äº†å‘½ä»¤ <code>ios keychain dump</code> ç”¨äºç±»ä¼¼ç›®çš„ã€‚</p>
<h4 id="å­˜å‚¨å‡­æ®"><a class="header" href="#å­˜å‚¨å‡­æ®"><strong>å­˜å‚¨å‡­æ®</strong></a></h4>
<p><strong>NSURLCredential</strong> ç±»éå¸¸é€‚åˆç›´æ¥åœ¨å¯†é’¥é“¾ä¸­ä¿å­˜æ•æ„Ÿä¿¡æ¯ï¼Œç»•è¿‡ NSUserDefaults æˆ–å…¶ä»–åŒ…è£…å™¨çš„éœ€è¦ã€‚è¦åœ¨ç™»å½•åå­˜å‚¨å‡­æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ Swift ä»£ç ï¼š</p>
<pre><code class="language-swift">NSURLCredential *credential;
credential = [NSURLCredential credentialWithUser:username password:password persistence:NSURLCredentialPersistencePermanent];
[[NSURLCredentialStorage sharedCredentialStorage] setCredential:credential forProtectionSpace:self.loginProtectionSpace];
</code></pre>
<p>è¦æå–è¿™äº›å­˜å‚¨çš„å‡­æ®ï¼Œå¯ä»¥ä½¿ç”¨ Objection çš„å‘½ä»¤ <code>ios nsurlcredentialstorage dump</code>ã€‚</p>
<h2 id="è‡ªå®šä¹‰é”®ç›˜å’Œé”®ç›˜ç¼“å­˜"><a class="header" href="#è‡ªå®šä¹‰é”®ç›˜å’Œé”®ç›˜ç¼“å­˜"><strong>è‡ªå®šä¹‰é”®ç›˜å’Œé”®ç›˜ç¼“å­˜</strong></a></h2>
<p>ä» iOS 8.0 å¼€å§‹ï¼Œç”¨æˆ·å¯ä»¥å®‰è£…è‡ªå®šä¹‰é”®ç›˜æ‰©å±•ï¼Œè¿™äº›æ‰©å±•å¯ä»¥åœ¨ <strong>è®¾ç½® &gt; é€šç”¨ &gt; é”®ç›˜ &gt; é”®ç›˜</strong> ä¸‹ç®¡ç†ã€‚è™½ç„¶è¿™äº›é”®ç›˜æä¾›äº†æ‰©å±•åŠŸèƒ½ï¼Œä½†å®ƒä»¬å­˜åœ¨è®°å½•æŒ‰é”®å’Œå°†æ•°æ®ä¼ è¾“åˆ°å¤–éƒ¨æœåŠ¡å™¨çš„é£é™©ï¼Œå°½ç®¡ç”¨æˆ·ä¼šè¢«é€šçŸ¥éœ€è¦ç½‘ç»œè®¿é—®çš„é”®ç›˜ã€‚åº”ç”¨ç¨‹åºå¯ä»¥å¹¶ä¸”åº”è¯¥é™åˆ¶åœ¨æ•æ„Ÿä¿¡æ¯è¾“å…¥æ—¶ä½¿ç”¨è‡ªå®šä¹‰é”®ç›˜ã€‚</p>
<p><strong>å®‰å…¨å»ºè®®ï¼š</strong></p>
<ul>
<li>å»ºè®®ç¦ç”¨ç¬¬ä¸‰æ–¹é”®ç›˜ä»¥å¢å¼ºå®‰å…¨æ€§ã€‚</li>
<li>æ³¨æ„é»˜è®¤ iOS é”®ç›˜çš„è‡ªåŠ¨æ›´æ­£å’Œè‡ªåŠ¨å»ºè®®åŠŸèƒ½ï¼Œè¿™å¯èƒ½ä¼šåœ¨ä½äº <code>Library/Keyboard/{locale}-dynamic-text.dat</code> æˆ– <code>/private/var/mobile/Library/Keyboard/dynamic-text.dat</code> çš„ç¼“å­˜æ–‡ä»¶ä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚è¿™äº›ç¼“å­˜æ–‡ä»¶åº”å®šæœŸæ£€æŸ¥ä»¥æŸ¥æ‰¾æ•æ„Ÿæ•°æ®ã€‚å»ºè®®é€šè¿‡ <strong>è®¾ç½® &gt; é€šç”¨ &gt; é‡ç½® &gt; é‡ç½®é”®ç›˜å­—å…¸</strong> æ¥é‡ç½®é”®ç›˜å­—å…¸ï¼Œä»¥æ¸…é™¤ç¼“å­˜æ•°æ®ã€‚</li>
<li>æ‹¦æˆªç½‘ç»œæµé‡å¯ä»¥æ­ç¤ºè‡ªå®šä¹‰é”®ç›˜æ˜¯å¦æ­£åœ¨è¿œç¨‹ä¼ è¾“æŒ‰é”®ã€‚</li>
</ul>
<h3 id="é˜²æ­¢æ–‡æœ¬å­—æ®µç¼“å­˜"><a class="header" href="#é˜²æ­¢æ–‡æœ¬å­—æ®µç¼“å­˜"><strong>é˜²æ­¢æ–‡æœ¬å­—æ®µç¼“å­˜</strong></a></h3>
<p><a href="https://developer.apple.com/reference/uikit/uitextinputtraits">UITextInputTraits åè®®</a> æä¾›äº†ç®¡ç†è‡ªåŠ¨æ›´æ­£å’Œå®‰å…¨æ–‡æœ¬è¾“å…¥çš„å±æ€§ï¼Œè¿™å¯¹äºé˜²æ­¢æ•æ„Ÿä¿¡æ¯ç¼“å­˜è‡³å…³é‡è¦ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡ç¦ç”¨è‡ªåŠ¨æ›´æ­£å’Œå¯ç”¨å®‰å…¨æ–‡æœ¬è¾“å…¥æ¥å®ç°ï¼š</p>
<pre><code class="language-objectivec">textObject.autocorrectionType = UITextAutocorrectionTypeNo;
textObject.secureTextEntry = YES;
</code></pre>
<p>æ­¤å¤–ï¼Œå¼€å‘äººå‘˜åº”ç¡®ä¿æ–‡æœ¬å­—æ®µï¼Œç‰¹åˆ«æ˜¯ç”¨äºè¾“å…¥æ•æ„Ÿä¿¡æ¯å¦‚å¯†ç å’Œ PIN çš„å­—æ®µï¼Œé€šè¿‡å°† <code>autocorrectionType</code> è®¾ç½®ä¸º <code>UITextAutocorrectionTypeNo</code> å’Œ <code>secureTextEntry</code> è®¾ç½®ä¸º <code>YES</code> æ¥ç¦ç”¨ç¼“å­˜ã€‚</p>
<pre><code class="language-objectivec">UITextField *textField = [[UITextField alloc] initWithFrame:frame];
textField.autocorrectionType = UITextAutocorrectionTypeNo;
</code></pre>
<h2 id="æ—¥å¿—"><a class="header" href="#æ—¥å¿—"><strong>æ—¥å¿—</strong></a></h2>
<p>è°ƒè¯•ä»£ç é€šå¸¸æ¶‰åŠä½¿ç”¨<strong>æ—¥å¿—è®°å½•</strong>ã€‚è¿™å­˜åœ¨é£é™©ï¼Œå› ä¸º<strong>æ—¥å¿—å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯</strong>ã€‚åœ¨ iOS 6 åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œæ—¥å¿—å¯¹æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½æ˜¯å¯è®¿é—®çš„ï¼Œè¿™å¸¦æ¥äº†æ•æ„Ÿæ•°æ®æ³„éœ²çš„é£é™©ã€‚<strong>ç°åœ¨ï¼Œåº”ç”¨ç¨‹åºåªèƒ½è®¿é—®è‡ªå·±çš„æ—¥å¿—</strong>ã€‚</p>
<p>å°½ç®¡æœ‰è¿™äº›é™åˆ¶ï¼Œ<strong>å…·æœ‰ç‰©ç†è®¿é—®æƒé™</strong>çš„æ”»å‡»è€…ä»ç„¶å¯ä»¥é€šè¿‡å°†è®¾å¤‡è¿æ¥åˆ°è®¡ç®—æœºå¹¶<strong>è¯»å–æ—¥å¿—</strong>æ¥åˆ©ç”¨è¿™ä¸€ç‚¹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ—¥å¿—åœ¨åº”ç”¨ç¨‹åºå¸è½½åä»ç„¶ä¿ç•™åœ¨ç£ç›˜ä¸Šã€‚</p>
<p>ä¸ºäº†é™ä½é£é™©ï¼Œå»ºè®®<strong>å½»åº•ä¸åº”ç”¨ç¨‹åºäº’åŠ¨</strong>ï¼Œæ¢ç´¢å…¶æ‰€æœ‰åŠŸèƒ½å’Œè¾“å…¥ï¼Œä»¥ç¡®ä¿æ²¡æœ‰æ•æ„Ÿä¿¡æ¯è¢«æ„å¤–è®°å½•ã€‚</p>
<p>åœ¨å®¡æŸ¥åº”ç”¨ç¨‹åºæºä»£ç ä»¥æŸ¥æ‰¾æ½œåœ¨æ³„éœ²æ—¶ï¼ŒæŸ¥æ‰¾ä½¿ç”¨å…³é”®å­— <code>NSLog</code>ã€<code>NSAssert</code>ã€<code>NSCAssert</code>ã€<code>fprintf</code> çš„<strong>é¢„å®šä¹‰</strong>å’Œ<strong>è‡ªå®šä¹‰æ—¥å¿—è®°å½•è¯­å¥</strong>ï¼Œä»¥åŠä»»ä½•æåˆ° <code>Logging</code> æˆ– <code>Logfile</code> çš„è‡ªå®šä¹‰å®ç°ã€‚</p>
<h3 id="ç›‘æ§ç³»ç»Ÿæ—¥å¿—"><a class="header" href="#ç›‘æ§ç³»ç»Ÿæ—¥å¿—"><strong>ç›‘æ§ç³»ç»Ÿæ—¥å¿—</strong></a></h3>
<p>åº”ç”¨ç¨‹åºè®°å½•å„ç§ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½æ˜¯æ•æ„Ÿçš„ã€‚è¦ç›‘æ§è¿™äº›æ—¥å¿—ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·å’Œå‘½ä»¤ï¼š</p>
<pre><code class="language-bash">idevice_id --list   # To find the device ID
idevicesyslog -u &lt;id&gt; (| grep &lt;app&gt;)   # To capture the device logs
</code></pre>
<p>æ˜¯æœ‰ç”¨çš„ã€‚æ­¤å¤–ï¼Œ<strong>Xcode</strong> æä¾›äº†ä¸€ç§æ”¶é›†æ§åˆ¶å°æ—¥å¿—çš„æ–¹æ³•ï¼š</p>
<ol>
<li>æ‰“å¼€ Xcodeã€‚</li>
<li>è¿æ¥ iOS è®¾å¤‡ã€‚</li>
<li>å¯¼èˆªåˆ° <strong>Window</strong> -&gt; <strong>Devices and Simulators</strong>ã€‚</li>
<li>é€‰æ‹©æ‚¨çš„è®¾å¤‡ã€‚</li>
<li>è§¦å‘æ‚¨æ­£åœ¨è°ƒæŸ¥çš„é—®é¢˜ã€‚</li>
<li>ä½¿ç”¨ <strong>Open Console</strong> æŒ‰é’®åœ¨æ–°çª—å£ä¸­æŸ¥çœ‹æ—¥å¿—ã€‚</li>
</ol>
<p>å¯¹äºæ›´é«˜çº§çš„æ—¥å¿—è®°å½•ï¼Œè¿æ¥åˆ°è®¾å¤‡ shell å¹¶ä½¿ç”¨ <strong>socat</strong> å¯ä»¥æä¾›å®æ—¶æ—¥å¿—ç›‘æ§ï¼š</p>
<pre><code class="language-bash">iPhone:~ root# socat - UNIX-CONNECT:/var/run/lockdown/syslog.sock
</code></pre>
<p>è·Ÿéšè§‚å¯Ÿæ—¥å¿—æ´»åŠ¨çš„å‘½ä»¤ï¼Œè¿™å¯¹äºè¯Šæ–­é—®é¢˜æˆ–è¯†åˆ«æ—¥å¿—ä¸­çš„æ½œåœ¨æ•°æ®æ³„æ¼éå¸¸å®è´µã€‚</p>
<hr />
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>
<p><br />
ä½¿ç”¨ <a href="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=text&amp;utm_campaign=ppc&amp;utm_term=trickest&amp;utm_content=ios-pentesting"><strong>Trickest</strong></a> è½»æ¾æ„å»ºå’Œ <strong>è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹</strong>ï¼Œç”±ä¸–ç•Œä¸Š <strong>æœ€å…ˆè¿›</strong> çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚<br />
ä»Šå¤©è·å–è®¿é—®æƒé™ï¼š</p>
<p>{% embed url="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=banner&amp;utm_campaign=ppc&amp;utm_content=ios-pentesting" %}</p>
<h2 id="å¤‡ä»½"><a class="header" href="#å¤‡ä»½">å¤‡ä»½</a></h2>
<p><strong>è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½</strong> é›†æˆåœ¨ iOS ä¸­ï¼Œé€šè¿‡ iTunesï¼ˆæœ€å¤šæ”¯æŒ macOS Catalinaï¼‰ã€Finderï¼ˆä» macOS Catalina å¼€å§‹ï¼‰æˆ– iCloud æ–¹ä¾¿åœ°åˆ›å»ºè®¾å¤‡æ•°æ®å‰¯æœ¬ã€‚è¿™äº›å¤‡ä»½å‡ ä¹æ¶µç›–æ‰€æœ‰è®¾å¤‡æ•°æ®ï¼Œæ’é™¤é«˜åº¦æ•æ„Ÿçš„å…ƒç´ ï¼Œå¦‚ Apple Pay è¯¦ç»†ä¿¡æ¯å’Œ Touch ID é…ç½®ã€‚</p>
<h3 id="å®‰å…¨é£é™©"><a class="header" href="#å®‰å…¨é£é™©">å®‰å…¨é£é™©</a></h3>
<p><strong>å·²å®‰è£…åº”ç”¨åŠå…¶æ•°æ®</strong> åŒ…å«åœ¨å¤‡ä»½ä¸­ï¼Œæå‡ºäº†æ½œåœ¨ <strong>æ•°æ®æ³„æ¼</strong> çš„é—®é¢˜ï¼Œä»¥åŠ <strong>å¤‡ä»½ä¿®æ”¹å¯èƒ½æ”¹å˜åº”ç”¨åŠŸèƒ½</strong> çš„é£é™©ã€‚å»ºè®® <strong>ä¸è¦åœ¨ä»»ä½•åº”ç”¨çš„ç›®å½•æˆ–å…¶å­ç›®å½•ä¸­ä»¥æ˜æ–‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯</strong> ä»¥é™ä½è¿™äº›é£é™©ã€‚</p>
<h3 id="ä»å¤‡ä»½ä¸­æ’é™¤æ–‡ä»¶"><a class="header" href="#ä»å¤‡ä»½ä¸­æ’é™¤æ–‡ä»¶">ä»å¤‡ä»½ä¸­æ’é™¤æ–‡ä»¶</a></h3>
<p><code>Documents/</code> å’Œ <code>Library/Application Support/</code> ä¸­çš„æ–‡ä»¶é»˜è®¤ä¼šè¢«å¤‡ä»½ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨ <code>NSURL setResourceValue:forKey:error:</code> å’Œ <code>NSURLIsExcludedFromBackupKey</code> æ¥æ’é™¤ç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•ã€‚è¿™ä¸€åšæ³•å¯¹äºä¿æŠ¤æ•æ„Ÿæ•°æ®ä¸è¢«åŒ…å«åœ¨å¤‡ä»½ä¸­è‡³å…³é‡è¦ã€‚</p>
<h3 id="æµ‹è¯•æ¼æ´"><a class="header" href="#æµ‹è¯•æ¼æ´">æµ‹è¯•æ¼æ´</a></h3>
<p>è¦è¯„ä¼°åº”ç”¨çš„å¤‡ä»½å®‰å…¨æ€§ï¼Œé¦–å…ˆä½¿ç”¨ Finder <strong>åˆ›å»ºå¤‡ä»½</strong>ï¼Œç„¶åæ ¹æ® <a href="https://support.apple.com/en-us/HT204215">Apple çš„å®˜æ–¹æ–‡æ¡£</a> æ‰¾åˆ°å®ƒã€‚åˆ†æå¤‡ä»½ä¸­å¯èƒ½å½±å“åº”ç”¨è¡Œä¸ºçš„æ•æ„Ÿæ•°æ®æˆ–é…ç½®ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·æˆ–åƒ <a href="https://imazing.com">iMazing</a> è¿™æ ·çš„åº”ç”¨ç¨‹åºå¯»æ‰¾æ•æ„Ÿä¿¡æ¯ã€‚å¯¹äºåŠ å¯†å¤‡ä»½ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥å¤‡ä»½æ ¹ç›®å½•ä¸­çš„ "Manifest.plist" æ–‡ä»¶ä¸­çš„ "IsEncrypted" é”®æ¥ç¡®è®¤åŠ å¯†çš„å­˜åœ¨ã€‚</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
...
&lt;key&gt;Date&lt;/key&gt;
&lt;date&gt;2021-03-12T17:43:33Z&lt;/date&gt;
&lt;key&gt;IsEncrypted&lt;/key&gt;
&lt;true/&gt;
...
&lt;/plist&gt;
</code></pre>
<p>å¯¹äºå¤„ç†åŠ å¯†å¤‡ä»½ï¼ŒPython è„šæœ¬å¯åœ¨ <a href="https://github.com/dinosec/iphone-dataprotection/tree/master/python_scripts">DinoSec çš„ GitHub ä»“åº“</a> ä¸­æ‰¾åˆ°ï¼Œå¦‚ <strong>backup_tool.py</strong> å’Œ <strong>backup_passwd.py</strong>ï¼Œå¯èƒ½ä¼šæœ‰ç”¨ï¼Œä½†å¯èƒ½éœ€è¦è¿›è¡Œè°ƒæ•´ä»¥å…¼å®¹æœ€æ–°çš„ iTunes/Finder ç‰ˆæœ¬ã€‚<a href="https://pypi.org/project/iOSbackup/"><strong>iOSbackup</strong> å·¥å…·</a> æ˜¯è®¿é—®å¯†ç ä¿æŠ¤å¤‡ä»½ä¸­æ–‡ä»¶çš„å¦ä¸€ä¸ªé€‰é¡¹ã€‚</p>
<h3 id="ä¿®æ”¹åº”ç”¨è¡Œä¸º"><a class="header" href="#ä¿®æ”¹åº”ç”¨è¡Œä¸º">ä¿®æ”¹åº”ç”¨è¡Œä¸º</a></h3>
<p>é€šè¿‡å¤‡ä»½ä¿®æ”¹æ¥æ”¹å˜åº”ç”¨è¡Œä¸ºçš„ä¸€ä¸ªä¾‹å­æ˜¯åœ¨ <a href="https://github.com/bither/bither-ios">Bither æ¯”ç‰¹å¸é’±åŒ…åº”ç”¨</a> ä¸­æ¼”ç¤ºçš„ï¼Œå…¶ä¸­ UI é”å®š PIN å­˜å‚¨åœ¨ <code>net.bither.plist</code> çš„ <strong>pin_code</strong> é”®ä¸‹ã€‚å°†æ­¤é”®ä» plist ä¸­åˆ é™¤å¹¶æ¢å¤å¤‡ä»½å°†ç§»é™¤ PIN è¦æ±‚ï¼Œä»è€Œæä¾›æ— é™åˆ¶è®¿é—®ã€‚</p>
<h2 id="å…³äºæ•æ„Ÿæ•°æ®å†…å­˜æµ‹è¯•çš„æ€»ç»“"><a class="header" href="#å…³äºæ•æ„Ÿæ•°æ®å†…å­˜æµ‹è¯•çš„æ€»ç»“">å…³äºæ•æ„Ÿæ•°æ®å†…å­˜æµ‹è¯•çš„æ€»ç»“</a></h2>
<p>åœ¨å¤„ç†å­˜å‚¨åœ¨åº”ç”¨ç¨‹åºå†…å­˜ä¸­çš„æ•æ„Ÿä¿¡æ¯æ—¶ï¼Œé™åˆ¶è¿™äº›æ•°æ®çš„æš´éœ²æ—¶é—´è‡³å…³é‡è¦ã€‚è°ƒæŸ¥å†…å­˜å†…å®¹çš„ä¸¤ç§ä¸»è¦æ–¹æ³•æ˜¯ï¼š<strong>åˆ›å»ºå†…å­˜è½¬å‚¨</strong> å’Œ <strong>å®æ—¶åˆ†æå†…å­˜</strong>ã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰å…¶æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬åœ¨è½¬å‚¨è¿‡ç¨‹æˆ–åˆ†æè¿‡ç¨‹ä¸­å¯èƒ½é”™è¿‡å…³é”®æ•°æ®çš„é£é™©ã€‚</p>
<h2 id="æ£€ç´¢å’Œåˆ†æå†…å­˜è½¬å‚¨"><a class="header" href="#æ£€ç´¢å’Œåˆ†æå†…å­˜è½¬å‚¨"><strong>æ£€ç´¢å’Œåˆ†æå†…å­˜è½¬å‚¨</strong></a></h2>
<p>å¯¹äºè¶Šç‹±å’Œéè¶Šç‹±è®¾å¤‡ï¼Œå·¥å…·å¦‚ <a href="https://github.com/sensepost/objection">objection</a> å’Œ <a href="https://github.com/Nightbringer21/fridump">Fridump</a> å…è®¸è½¬å‚¨åº”ç”¨ç¨‹åºçš„è¿›ç¨‹å†…å­˜ã€‚ä¸€æ—¦è½¬å‚¨ï¼Œåˆ†æè¿™äº›æ•°æ®éœ€è¦å„ç§å·¥å…·ï¼Œå…·ä½“å–å†³äºæ‚¨è¦æœç´¢çš„ä¿¡æ¯çš„æ€§è´¨ã€‚</p>
<p>è¦ä»å†…å­˜è½¬å‚¨ä¸­æå–å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ <code>strings</code> æˆ– <code>rabin2 -zz</code> ç­‰å‘½ä»¤ï¼š</p>
<pre><code class="language-bash"># Extracting strings using strings command
$ strings memory &gt; strings.txt

# Extracting strings using rabin2
$ rabin2 -ZZ memory &gt; strings.txt
</code></pre>
<p>å¯¹äºæ›´è¯¦ç»†çš„åˆ†æï¼ŒåŒ…æ‹¬æœç´¢ç‰¹å®šæ•°æ®ç±»å‹æˆ–æ¨¡å¼ï¼Œ<strong>radare2</strong> æä¾›äº†å¹¿æ³›çš„æœç´¢åŠŸèƒ½ï¼š</p>
<pre><code class="language-bash">$ r2 &lt;name_of_your_dump_file&gt;
[0x00000000]&gt; /?
...
</code></pre>
<h2 id="è¿è¡Œæ—¶å†…å­˜åˆ†æ"><a class="header" href="#è¿è¡Œæ—¶å†…å­˜åˆ†æ"><strong>è¿è¡Œæ—¶å†…å­˜åˆ†æ</strong></a></h2>
<p><strong>r2frida</strong> æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ›¿ä»£æ–¹æ¡ˆï¼Œç”¨äºå®æ—¶æ£€æŸ¥åº”ç”¨ç¨‹åºçš„å†…å­˜ï¼Œè€Œæ— éœ€å†…å­˜è½¬å‚¨ã€‚è¯¥å·¥å…·ä½¿å¾—å¯ä»¥ç›´æ¥åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºå†…å­˜ä¸Šæ‰§è¡Œæœç´¢å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">$ r2 frida://usb//&lt;name_of_your_app&gt;
[0x00000000]&gt; /\ &lt;search_command&gt;
</code></pre>
<h2 id="ç ´æŸçš„åŠ å¯†æŠ€æœ¯"><a class="header" href="#ç ´æŸçš„åŠ å¯†æŠ€æœ¯">ç ´æŸçš„åŠ å¯†æŠ€æœ¯</a></h2>
<h3 id="ä¸è‰¯çš„å¯†é’¥ç®¡ç†æµç¨‹"><a class="header" href="#ä¸è‰¯çš„å¯†é’¥ç®¡ç†æµç¨‹">ä¸è‰¯çš„å¯†é’¥ç®¡ç†æµç¨‹</a></h3>
<p>ä¸€äº›å¼€å‘è€…å°†æ•æ„Ÿæ•°æ®ä¿å­˜åœ¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œå¹¶ä½¿ç”¨åœ¨ä»£ç ä¸­ç¡¬ç¼–ç /å¯é¢„æµ‹çš„å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚è¿™æ˜¯ä¸åº”è¯¥è¿™æ ·åšçš„ï¼Œå› ä¸ºä¸€äº›åå‘å·¥ç¨‹å¯èƒ½å…è®¸æ”»å‡»è€…æå–æœºå¯†ä¿¡æ¯ã€‚</p>
<h3 id="ä½¿ç”¨ä¸å®‰å…¨å’Œæˆ–è¿‡æ—¶çš„ç®—æ³•"><a class="header" href="#ä½¿ç”¨ä¸å®‰å…¨å’Œæˆ–è¿‡æ—¶çš„ç®—æ³•">ä½¿ç”¨ä¸å®‰å…¨å’Œ/æˆ–è¿‡æ—¶çš„ç®—æ³•</a></h3>
<p>å¼€å‘è€…ä¸åº”è¯¥ä½¿ç”¨<strong>è¿‡æ—¶çš„ç®—æ³•</strong>æ¥æ‰§è¡Œæˆæƒ<strong>æ£€æŸ¥</strong>ã€<strong>å­˜å‚¨</strong>æˆ–<strong>å‘é€</strong>æ•°æ®ã€‚è¿™äº›ç®—æ³•åŒ…æ‹¬ï¼šRC4ã€MD4ã€MD5ã€SHA1â€¦â€¦å¦‚æœ<strong>å“ˆå¸Œ</strong>ç”¨äºå­˜å‚¨å¯†ç ï¼Œä¾‹å¦‚ï¼Œåº”è¯¥ä½¿ç”¨æŠ—æš´åŠ›ç ´è§£çš„å“ˆå¸Œï¼Œå¹¶åŠ ç›ã€‚</p>
<h3 id="æ£€æŸ¥"><a class="header" href="#æ£€æŸ¥">æ£€æŸ¥</a></h3>
<p>ä¸»è¦çš„æ£€æŸ¥æ˜¯æ‰¾å‡ºæ˜¯å¦å¯ä»¥åœ¨ä»£ç ä¸­æ‰¾åˆ°<strong>ç¡¬ç¼–ç </strong>çš„å¯†ç /ç§˜å¯†ï¼Œæˆ–è€…è¿™äº›æ˜¯å¦æ˜¯<strong>å¯é¢„æµ‹</strong>çš„ï¼Œä»¥åŠä»£ç æ˜¯å¦ä½¿ç”¨æŸç§<strong>å¼±</strong>çš„<strong>åŠ å¯†</strong>ç®—æ³•ã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨<strong>objection</strong>è‡ªåŠ¨<strong>ç›‘æ§</strong>ä¸€äº›<strong>åŠ å¯†****åº“</strong>ï¼š</p>
<pre><code class="language-swift">ios monitor crypt
</code></pre>
<p>å¯¹äº <strong>æ›´å¤šä¿¡æ¯</strong> å…³äº iOS åŠ å¯† API å’Œåº“ï¼Œè¯·è®¿é—® <a href="https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06e-testing-cryptography">https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06e-testing-cryptography</a></p>
<h2 id="æœ¬åœ°èº«ä»½éªŒè¯"><a class="header" href="#æœ¬åœ°èº«ä»½éªŒè¯">æœ¬åœ°èº«ä»½éªŒè¯</a></h2>
<p><strong>æœ¬åœ°èº«ä»½éªŒè¯</strong> åœ¨ä¿æŠ¤é€šè¿‡åŠ å¯†æ–¹æ³•è®¿é—®è¿œç¨‹ç«¯ç‚¹æ–¹é¢å‘æŒ¥ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å…³é”®åœ¨äºï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®çš„å®ç°ï¼Œæœ¬åœ°èº«ä»½éªŒè¯æœºåˆ¶å¯èƒ½ä¼šè¢«ç»•è¿‡ã€‚</p>
<p>è‹¹æœçš„ <a href="https://developer.apple.com/documentation/localauthentication"><strong>æœ¬åœ°èº«ä»½éªŒè¯æ¡†æ¶</strong></a> å’Œ <a href="https://developer.apple.com/library/content/documentation/Security/Conceptual/keychainServConcepts/01introduction/introduction.html"><strong>é’¥åŒ™ä¸²</strong></a> ä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„ APIï¼Œä»¥ä¾¿åˆ†åˆ«ä¿ƒè¿›ç”¨æˆ·èº«ä»½éªŒè¯å¯¹è¯æ¡†å’Œå®‰å…¨å¤„ç†ç§˜å¯†æ•°æ®ã€‚å®‰å…¨éš”ç¦»åŒºä¿æŠ¤ Touch ID çš„æŒ‡çº¹ IDï¼Œè€Œ Face ID åˆ™ä¾èµ–äºé¢éƒ¨è¯†åˆ«è€Œä¸å¦¥åç”Ÿç‰©è¯†åˆ«æ•°æ®ã€‚</p>
<p>è¦é›†æˆ Touch ID/Face IDï¼Œå¼€å‘è€…æœ‰ä¸¤ä¸ª API é€‰æ‹©ï¼š</p>
<ul>
<li><strong><code>LocalAuthentication.framework</code></strong> ç”¨äºé«˜å±‚æ¬¡çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œè€Œä¸è®¿é—®ç”Ÿç‰©è¯†åˆ«æ•°æ®ã€‚</li>
<li><strong><code>Security.framework</code></strong> ç”¨äºä½å±‚æ¬¡çš„é’¥åŒ™ä¸²æœåŠ¡è®¿é—®ï¼Œé€šè¿‡ç”Ÿç‰©è¯†åˆ«èº«ä»½éªŒè¯ä¿æŠ¤ç§˜å¯†æ•°æ®ã€‚å„ç§ <a href="https://www.raywenderlich.com/147308/secure-ios-user-data-keychain-touch-id">å¼€æºåŒ…è£…å™¨</a> ä½¿é’¥åŒ™ä¸²è®¿é—®æ›´ç®€å•ã€‚</li>
</ul>
<p>{% hint style="danger" %}
ç„¶è€Œï¼Œ<code>LocalAuthentication.framework</code> å’Œ <code>Security.framework</code> éƒ½å­˜åœ¨æ¼æ´ï¼Œå› ä¸ºå®ƒä»¬ä¸»è¦è¿”å›å¸ƒå°”å€¼è€Œä¸ä¼ è¾“ç”¨äºèº«ä»½éªŒè¯è¿‡ç¨‹çš„æ•°æ®ï¼Œä½¿å…¶å®¹æ˜“è¢«ç»•è¿‡ï¼ˆå‚è§ <a href="https://www.youtube.com/watch?v=XhXIHVGCFFM">Don't touch me that way, by David Lindner et al</a>ï¼‰ã€‚
{% endhint %}</p>
<h3 id="å®ç°æœ¬åœ°èº«ä»½éªŒè¯"><a class="header" href="#å®ç°æœ¬åœ°èº«ä»½éªŒè¯">å®ç°æœ¬åœ°èº«ä»½éªŒè¯</a></h3>
<p>ä¸ºäº†æç¤ºç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¼€å‘è€…åº”åˆ©ç”¨ <strong><code>LAContext</code></strong> ç±»ä¸­çš„ <strong><code>evaluatePolicy</code></strong> æ–¹æ³•ï¼Œé€‰æ‹©ï¼š</p>
<ul>
<li><strong><code>deviceOwnerAuthentication</code></strong>ï¼šæç¤ºè¾“å…¥ Touch ID æˆ–è®¾å¤‡å¯†ç ï¼Œå¦‚æœä¸¤è€…éƒ½æœªå¯ç”¨åˆ™å¤±è´¥ã€‚</li>
<li><strong><code>deviceOwnerAuthenticationWithBiometrics</code></strong>ï¼šä»…æç¤ºè¾“å…¥ Touch IDã€‚</li>
</ul>
<p>æˆåŠŸçš„èº«ä»½éªŒè¯é€šè¿‡ <strong><code>evaluatePolicy</code></strong> çš„å¸ƒå°”è¿”å›å€¼è¡¨ç¤ºï¼Œçªæ˜¾å‡ºæ½œåœ¨çš„å®‰å…¨ç¼ºé™·ã€‚</p>
<h3 id="ä½¿ç”¨é’¥åŒ™ä¸²è¿›è¡Œæœ¬åœ°èº«ä»½éªŒè¯"><a class="header" href="#ä½¿ç”¨é’¥åŒ™ä¸²è¿›è¡Œæœ¬åœ°èº«ä»½éªŒè¯">ä½¿ç”¨é’¥åŒ™ä¸²è¿›è¡Œæœ¬åœ°èº«ä»½éªŒè¯</a></h3>
<p>åœ¨ iOS åº”ç”¨ä¸­å®ç° <strong>æœ¬åœ°èº«ä»½éªŒè¯</strong> æ¶‰åŠä½¿ç”¨ <strong>é’¥åŒ™ä¸² API</strong> å®‰å…¨å­˜å‚¨ç§˜å¯†æ•°æ®ï¼Œå¦‚èº«ä»½éªŒè¯ä»¤ç‰Œã€‚æ­¤è¿‡ç¨‹ç¡®ä¿æ•°æ®åªèƒ½ç”±ç”¨æˆ·è®¿é—®ï¼Œä½¿ç”¨ä»–ä»¬çš„è®¾å¤‡å¯†ç æˆ–ç”Ÿç‰©è¯†åˆ«èº«ä»½éªŒè¯ï¼Œå¦‚ Touch IDã€‚</p>
<p>é’¥åŒ™ä¸²æä¾›äº†è®¾ç½®å¸¦æœ‰ <code>SecAccessControl</code> å±æ€§çš„é¡¹ç›®çš„èƒ½åŠ›ï¼Œè¯¥å±æ€§é™åˆ¶å¯¹è¯¥é¡¹ç›®çš„è®¿é—®ï¼Œç›´åˆ°ç”¨æˆ·é€šè¿‡ Touch ID æˆ–è®¾å¤‡å¯†ç æˆåŠŸèº«ä»½éªŒè¯ã€‚æ­¤åŠŸèƒ½å¯¹äºå¢å¼ºå®‰å…¨æ€§è‡³å…³é‡è¦ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ Swift å’Œ Objective-C ä¸­çš„ä»£ç ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•åˆ©ç”¨è¿™äº›å®‰å…¨åŠŸèƒ½å°†å­—ç¬¦ä¸²ä¿å­˜åˆ°é’¥åŒ™ä¸²å¹¶ä»ä¸­æ£€ç´¢ã€‚ç¤ºä¾‹ç‰¹åˆ«å±•ç¤ºäº†å¦‚ä½•è®¾ç½®è®¿é—®æ§åˆ¶ä»¥è¦æ±‚ Touch ID èº«ä»½éªŒè¯ï¼Œå¹¶ç¡®ä¿æ•°æ®ä»…åœ¨è®¾ç½®çš„è®¾å¤‡ä¸Šå¯è®¿é—®ï¼Œå‰ææ˜¯å·²é…ç½®è®¾å¤‡å¯†ç ã€‚</p>
<p>{% tabs %}
{% tab title="Swift" %}</p>
<pre><code class="language-swift">// From https://github.com/mufambisi/owasp-mstg/blob/master/Document/0x06f-Testing-Local-Authentication.md

// 1. create AccessControl object that will represent authentication settings

var error: Unmanaged&lt;CFError&gt;?

guard let accessControl = SecAccessControlCreateWithFlags(kCFAllocatorDefault,
kSecAttrAccessibleWhenPasscodeSetThisDeviceOnly,
SecAccessControlCreateFlags.biometryCurrentSet,
&amp;error) else {
// failed to create AccessControl object

return
}

// 2. define keychain services query. Pay attention that kSecAttrAccessControl is mutually exclusive with kSecAttrAccessible attribute

var query: [String: Any] = [:]

query[kSecClass as String] = kSecClassGenericPassword
query[kSecAttrLabel as String] = "com.me.myapp.password" as CFString
query[kSecAttrAccount as String] = "OWASP Account" as CFString
query[kSecValueData as String] = "test_strong_password".data(using: .utf8)! as CFData
query[kSecAttrAccessControl as String] = accessControl

// 3. save item

let status = SecItemAdd(query as CFDictionary, nil)

if status == noErr {
// successfully saved
} else {
// error while saving
}
</code></pre>
<p>{% endtab %}</p>
<p>{% tab title="Objective-C" %}ç›®æ ‡-C{% endtab %}</p>
<pre><code class="language-objectivec">// 1. create AccessControl object that will represent authentication settings
CFErrorRef *err = nil;

SecAccessControlRef sacRef = SecAccessControlCreateWithFlags(kCFAllocatorDefault,
kSecAttrAccessibleWhenPasscodeSetThisDeviceOnly,
kSecAccessControlUserPresence,
err);

// 2. define keychain services query. Pay attention that kSecAttrAccessControl is mutually exclusive with kSecAttrAccessible attribute
NSDictionary* query = @{
(_ _bridge id)kSecClass: (__bridge id)kSecClassGenericPassword,
(__bridge id)kSecAttrLabel: @"com.me.myapp.password",
(__bridge id)kSecAttrAccount: @"OWASP Account",
(__bridge id)kSecValueData: [@"test_strong_password" dataUsingEncoding:NSUTF8StringEncoding],
(__bridge id)kSecAttrAccessControl: (__bridge_transfer id)sacRef
};

// 3. save item
OSStatus status = SecItemAdd((__bridge CFDictionaryRef)query, nil);

if (status == noErr) {
// successfully saved
} else {
// error while saving
}
</code></pre>
<p>{% endtab %}
{% endtabs %}</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä»é’¥åŒ™ä¸²è¯·æ±‚ä¿å­˜çš„é¡¹ç›®ã€‚é’¥åŒ™ä¸²æœåŠ¡å°†å‘ç”¨æˆ·æ˜¾ç¤ºèº«ä»½éªŒè¯å¯¹è¯æ¡†ï¼Œå¹¶æ ¹æ®æ˜¯å¦æä¾›äº†åˆé€‚çš„æŒ‡çº¹è¿”å›æ•°æ®æˆ–nilã€‚</p>
<p>{% tabs %}
{% tab title="Swift" %}</p>
<pre><code class="language-swift">// 1. define query
var query = [String: Any]()
query[kSecClass as String] = kSecClassGenericPassword
query[kSecReturnData as String] = kCFBooleanTrue
query[kSecAttrAccount as String] = "My Name" as CFString
query[kSecAttrLabel as String] = "com.me.myapp.password" as CFString
query[kSecUseOperationPrompt as String] = "Please, pass authorisation to enter this area" as CFString

// 2. get item
var queryResult: AnyObject?
let status = withUnsafeMutablePointer(to: &amp;queryResult) {
SecItemCopyMatching(query as CFDictionary, UnsafeMutablePointer($0))
}

if status == noErr {
let password = String(data: queryResult as! Data, encoding: .utf8)!
// successfully received password
} else {
// authorization not passed
}
</code></pre>
<p>{% endtab %}</p>
<p>{% tab title="Objective-C" %}ç›®æ ‡-C{% endtab %}</p>
<pre><code class="language-objectivec">// 1. define query
NSDictionary *query = @{(__bridge id)kSecClass: (__bridge id)kSecClassGenericPassword,
(__bridge id)kSecReturnData: @YES,
(__bridge id)kSecAttrAccount: @"My Name1",
(__bridge id)kSecAttrLabel: @"com.me.myapp.password",
(__bridge id)kSecUseOperationPrompt: @"Please, pass authorisation to enter this area" };

// 2. get item
CFTypeRef queryResult = NULL;
OSStatus status = SecItemCopyMatching((__bridge CFDictionaryRef)query, &amp;queryResult);

if (status == noErr){
NSData* resultData = ( __bridge_transfer NSData* )queryResult;
NSString* password = [[NSString alloc] initWithData:resultData encoding:NSUTF8StringEncoding];
NSLog(@"%@", password);
} else {
NSLog(@"Something went wrong");
}
</code></pre>
<p>{% endtab %}
{% endtabs %}</p>
<h3 id="æ£€æµ‹"><a class="header" href="#æ£€æµ‹">æ£€æµ‹</a></h3>
<p>é€šè¿‡åˆ†æåº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶çš„å…±äº«åŠ¨æ€åº“åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥æ£€æµ‹åˆ°åº”ç”¨ç¨‹åºä¸­æ¡†æ¶çš„ä½¿ç”¨ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>otool</code> æ¥å®Œæˆï¼š</p>
<pre><code class="language-bash">$ otool -L &lt;AppName&gt;.app/&lt;AppName&gt;
</code></pre>
<p>å¦‚æœåœ¨åº”ç”¨ä¸­ä½¿ç”¨äº† <code>LocalAuthentication.framework</code>ï¼Œè¾“å‡ºå°†åŒ…å«ä»¥ä¸‹ä¸¤è¡Œï¼ˆè¯·è®°ä½ï¼Œ<code>LocalAuthentication.framework</code> åœ¨åº•å±‚ä½¿ç”¨ <code>Security.framework</code>ï¼‰ï¼š</p>
<pre><code class="language-bash">/System/Library/Frameworks/LocalAuthentication.framework/LocalAuthentication
/System/Library/Frameworks/Security.framework/Security
</code></pre>
<p>å¦‚æœä½¿ç”¨äº† <code>Security.framework</code>ï¼Œåˆ™åªä¼šæ˜¾ç¤ºç¬¬äºŒä¸ªã€‚</p>
<h3 id="æœ¬åœ°èº«ä»½éªŒè¯æ¡†æ¶ç»•è¿‡"><a class="header" href="#æœ¬åœ°èº«ä»½éªŒè¯æ¡†æ¶ç»•è¿‡">æœ¬åœ°èº«ä»½éªŒè¯æ¡†æ¶ç»•è¿‡</a></h3>
<h4 id="objection"><a class="header" href="#objection"><strong>Objection</strong></a></h4>
<p>é€šè¿‡ä½äº <a href="https://github.com/sensepost/objection/wiki/Understanding-the-iOS-Biometrics-Bypass">è¿™ä¸ª GitHub é¡µé¢</a> çš„ <strong>Objection Biometrics Bypass</strong>ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç§æŠ€æœ¯æ¥å…‹æœ <strong>LocalAuthentication</strong> æœºåˆ¶ã€‚è¯¥æ–¹æ³•çš„æ ¸å¿ƒåœ¨äºåˆ©ç”¨ <strong>Frida</strong> æ“ä½œ <code>evaluatePolicy</code> å‡½æ•°ï¼Œç¡®ä¿å…¶å§‹ç»ˆè¿”å› <code>True</code> ç»“æœï¼Œè€Œä¸ç®¡å®é™…çš„èº«ä»½éªŒè¯æ˜¯å¦æˆåŠŸã€‚è¿™å¯¹äºç»•è¿‡æœ‰ç¼ºé™·çš„ç”Ÿç‰©è¯†åˆ«èº«ä»½éªŒè¯è¿‡ç¨‹ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>è¦æ¿€æ´»æ­¤ç»•è¿‡ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">...itudehacks.DVIAswiftv2.develop on (iPhone: 13.2.3) [usb] # ios ui biometrics_bypass
(agent) Registering job 3mhtws9x47q. Type: ios-biometrics-disable
...itudehacks.DVIAswiftv2.develop on (iPhone: 13.2.3) [usb] # (agent) [3mhtws9x47q] Localized Reason for auth requirement: Please authenticate yourself
(agent) [3mhtws9x47q] OS authentication response: false
(agent) [3mhtws9x47q] Marking OS response as True instead
(agent) [3mhtws9x47q] Biometrics bypass hook complete
</code></pre>
<p>æ­¤å‘½ä»¤è§¦å‘ä¸€ä¸ªåºåˆ—ï¼Œå…¶ä¸­ Objection æ³¨å†Œä¸€ä¸ªä»»åŠ¡ï¼Œæœ‰æ•ˆåœ°å°† <code>evaluatePolicy</code> æ£€æŸ¥çš„ç»“æœæ›´æ”¹ä¸º <code>True</code>ã€‚</p>
<h4 id="frida"><a class="header" href="#frida">Frida</a></h4>
<p>æ¥è‡ª <a href="https://github.com/prateek147/DVIA-v2">DVIA-v2 åº”ç”¨ç¨‹åº</a> çš„ <strong><code>evaluatePolicy</code></strong> ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="language-swift">+(void)authenticateWithTouchID {
LAContext *myContext = [[LAContext alloc] init];
NSError *authError = nil;
NSString *myLocalizedReasonString = @"Please authenticate yourself";

if ([myContext canEvaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics error:&amp;authError]) {
[myContext evaluatePolicy:LAPolicyDeviceOwnerAuthenticationWithBiometrics
localizedReason:myLocalizedReasonString
reply:^(BOOL success, NSError *error) {
if (success) {
dispatch_async(dispatch_get_main_queue(), ^{
[TouchIDAuthentication showAlert:@"Authentication Successful" withTitle:@"Success"];
});
} else {
dispatch_async(dispatch_get_main_queue(), ^{
[TouchIDAuthentication showAlert:@"Authentication Failed !" withTitle:@"Error"];
});
}
}];
} else {
dispatch_async(dispatch_get_main_queue(), ^{
[TouchIDAuthentication showAlert:@"Your device doesn't support Touch ID or you haven't configured Touch ID authentication on your device" withTitle:@"Error"];
});
}
}
</code></pre>
<p>ä¸ºäº†å®ç°å¯¹æœ¬åœ°èº«ä»½éªŒè¯çš„<strong>bypass</strong>ï¼Œç¼–å†™äº†ä¸€ä¸ªFridaè„šæœ¬ã€‚è¯¥è„šæœ¬é’ˆå¯¹<strong>evaluatePolicy</strong>æ£€æŸ¥ï¼Œæ‹¦æˆªå…¶å›è°ƒä»¥ç¡®ä¿è¿”å›<strong>success=1</strong>ã€‚é€šè¿‡æ”¹å˜å›è°ƒçš„è¡Œä¸ºï¼Œèº«ä»½éªŒè¯æ£€æŸ¥è¢«æœ‰æ•ˆç»•è¿‡ã€‚</p>
<p>ä¸‹é¢çš„è„šæœ¬è¢«æ³¨å…¥ä»¥ä¿®æ”¹<strong>evaluatePolicy</strong>æ–¹æ³•çš„ç»“æœã€‚å®ƒå°†å›è°ƒçš„ç»“æœæ›´æ”¹ä¸ºå§‹ç»ˆæŒ‡ç¤ºæˆåŠŸã€‚</p>
<pre><code class="language-swift">// from https://securitycafe.ro/2022/09/05/mobile-pentesting-101-bypassing-biometric-authentication/
if(ObjC.available) {
console.log("Injecting...");
var hook = ObjC.classes.LAContext["- evaluatePolicy:localizedReason:reply:"];
Interceptor.attach(hook.implementation, {
onEnter: function(args) {
var block = new ObjC.Block(args[4]);
const callback = block.implementation;
block.implementation = function (error, value)  {

console.log("Changing the result value to true")
const result = callback(1, null);
return result;
};
},
});
} else {
console.log("Objective-C Runtime is not available!");
}
</code></pre>
<p>è¦æ³¨å…¥Fridaè„šæœ¬å¹¶ç»•è¿‡ç”Ÿç‰©è¯†åˆ«è®¤è¯ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">frida -U -f com.highaltitudehacks.DVIAswiftv2 --no-pause -l fingerprint-bypass-ios.js
</code></pre>
<h2 id="æ•æ„ŸåŠŸèƒ½é€šè¿‡-ipc-æš´éœ²"><a class="header" href="#æ•æ„ŸåŠŸèƒ½é€šè¿‡-ipc-æš´éœ²">æ•æ„ŸåŠŸèƒ½é€šè¿‡ IPC æš´éœ²</a></h2>
<h3 id="è‡ªå®šä¹‰-uri-å¤„ç†ç¨‹åº--æ·±åº¦é“¾æ¥--è‡ªå®šä¹‰æ–¹æ¡ˆ"><a class="header" href="#è‡ªå®šä¹‰-uri-å¤„ç†ç¨‹åº--æ·±åº¦é“¾æ¥--è‡ªå®šä¹‰æ–¹æ¡ˆ">è‡ªå®šä¹‰ URI å¤„ç†ç¨‹åº / æ·±åº¦é“¾æ¥ / è‡ªå®šä¹‰æ–¹æ¡ˆ</a></h3>
<p>{% content-ref url="ios-custom-uri-handlers-deeplinks-custom-schemes.md" %}
<a href="ios-custom-uri-handlers-deeplinks-custom-schemes.html">ios-custom-uri-handlers-deeplinks-custom-schemes.md</a>
{% endcontent-ref %}</p>
<h3 id="é€šç”¨é“¾æ¥"><a class="header" href="#é€šç”¨é“¾æ¥">é€šç”¨é“¾æ¥</a></h3>
<p>{% content-ref url="ios-universal-links.md" %}
<a href="ios-universal-links.html">ios-universal-links.md</a>
{% endcontent-ref %}</p>
<h3 id="uiactivity-å…±äº«"><a class="header" href="#uiactivity-å…±äº«">UIActivity å…±äº«</a></h3>
<p>{% content-ref url="ios-uiactivity-sharing.md" %}
<a href="ios-uiactivity-sharing.html">ios-uiactivity-sharing.md</a>
{% endcontent-ref %}</p>
<h3 id="uipasteboard"><a class="header" href="#uipasteboard">UIPasteboard</a></h3>
<p>{% content-ref url="ios-uipasteboard.md" %}
<a href="ios-uipasteboard.html">ios-uipasteboard.md</a>
{% endcontent-ref %}</p>
<h3 id="åº”ç”¨æ‰©å±•"><a class="header" href="#åº”ç”¨æ‰©å±•">åº”ç”¨æ‰©å±•</a></h3>
<p>{% content-ref url="ios-app-extensions.md" %}
<a href="ios-app-extensions.html">ios-app-extensions.md</a>
{% endcontent-ref %}</p>
<h3 id="webviews"><a class="header" href="#webviews">WebViews</a></h3>
<p>{% content-ref url="ios-webviews.md" %}
<a href="ios-webviews.html">ios-webviews.md</a>
{% endcontent-ref %}</p>
<h3 id="åºåˆ—åŒ–å’Œç¼–ç "><a class="header" href="#åºåˆ—åŒ–å’Œç¼–ç ">åºåˆ—åŒ–å’Œç¼–ç </a></h3>
<p>{% content-ref url="ios-serialisation-and-encoding.md" %}
<a href="ios-serialisation-and-encoding.html">ios-serialisation-and-encoding.md</a>
{% endcontent-ref %}</p>
<h2 id="ç½‘ç»œé€šä¿¡"><a class="header" href="#ç½‘ç»œé€šä¿¡">ç½‘ç»œé€šä¿¡</a></h2>
<p>é‡è¦çš„æ˜¯æ£€æŸ¥æ˜¯å¦æœ‰é€šä¿¡å‘ç”Ÿ <strong>æœªåŠ å¯†</strong>ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºæ˜¯å¦æ­£ç¡® <strong>éªŒè¯æœåŠ¡å™¨çš„ TLS è¯ä¹¦</strong>ã€‚<br />
è¦æ£€æŸ¥è¿™äº›é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨åƒ <strong>Burp</strong> è¿™æ ·çš„ä»£ç†ï¼š</p>
<p>{% content-ref url="burp-configuration-for-ios.md" %}
<a href="burp-configuration-for-ios.html">burp-configuration-for-ios.md</a>
{% endcontent-ref %}</p>
<h3 id="ä¸»æœºåæ£€æŸ¥"><a class="header" href="#ä¸»æœºåæ£€æŸ¥">ä¸»æœºåæ£€æŸ¥</a></h3>
<p>éªŒè¯ TLS è¯ä¹¦çš„ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯æ£€æŸ¥è¯ä¹¦æ˜¯å¦ç”± <strong>å—ä¿¡ä»»çš„</strong> <strong>CA</strong> ç­¾åï¼Œä½† <strong>ä¸æ£€æŸ¥</strong> <strong>è¯ä¹¦çš„ä¸»æœºå</strong> æ˜¯å¦æ˜¯æ­£åœ¨è®¿é—®çš„ä¸»æœºåã€‚<br />
ä¸ºäº†ä½¿ç”¨ Burp æ£€æŸ¥æ­¤é—®é¢˜ï¼Œåœ¨ iPhone ä¸­ä¿¡ä»» Burp CA åï¼Œå¯ä»¥ <strong>ä¸ºä¸åŒçš„ä¸»æœºåä½¿ç”¨ Burp åˆ›å»ºæ–°è¯ä¹¦</strong> å¹¶ä½¿ç”¨å®ƒã€‚å¦‚æœåº”ç”¨ç¨‹åºä»ç„¶å¯ä»¥å·¥ä½œï¼Œé‚£ä¹ˆæŸäº›åœ°æ–¹æ˜¯è„†å¼±çš„ã€‚</p>
<h3 id="è¯ä¹¦é’‰æ‰"><a class="header" href="#è¯ä¹¦é’‰æ‰">è¯ä¹¦é’‰æ‰</a></h3>
<p>å¦‚æœåº”ç”¨ç¨‹åºæ­£ç¡®ä½¿ç”¨ SSL é’‰æ‰ï¼Œåˆ™åº”ç”¨ç¨‹åºä»…åœ¨è¯ä¹¦æ˜¯é¢„æœŸçš„è¯ä¹¦æ—¶æ‰èƒ½å·¥ä½œã€‚åœ¨æµ‹è¯•åº”ç”¨ç¨‹åºæ—¶ <strong>è¿™å¯èƒ½æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸º Burp å°†æä¾›è‡ªå·±çš„è¯ä¹¦ã€‚</strong><br />
ä¸ºäº†ç»•è¿‡è¿™ç§ä¿æŠ¤ï¼Œå¯ä»¥åœ¨è¶Šç‹±è®¾å¤‡ä¸Šå®‰è£… <a href="https://github.com/nabla-c0d3/ssl-kill-switch2"><strong>SSL Kill Switch</strong></a> æˆ–å®‰è£… <a href="https://portswigger.net/burp/documentation/desktop/mobile/config-ios-device"><strong>Burp Mobile Assistant</strong></a></p>
<p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ <strong>objection's</strong> <code>ios sslpinning disable</code></p>
<h2 id="æ‚é¡¹"><a class="header" href="#æ‚é¡¹">æ‚é¡¹</a></h2>
<ul>
<li>åœ¨ <strong><code>/System/Library</code></strong> ä¸­å¯ä»¥æ‰¾åˆ°ç³»ç»Ÿåº”ç”¨ä½¿ç”¨çš„æ¡†æ¶</li>
<li>ç”¨æˆ·ä» App Store å®‰è£…çš„åº”ç”¨ä½äº <strong><code>/User/Applications</code></strong></li>
<li><strong><code>/User/Library</code></strong> åŒ…å«ç”¨æˆ·çº§åº”ç”¨ä¿å­˜çš„æ•°æ®</li>
<li>æ‚¨å¯ä»¥è®¿é—® <strong><code>/User/Library/Notes/notes.sqlite</code></strong> ä»¥è¯»å–åº”ç”¨ç¨‹åºä¸­ä¿å­˜çš„ç¬”è®°ã€‚</li>
<li>åœ¨å·²å®‰è£…åº”ç”¨ç¨‹åºçš„æ–‡ä»¶å¤¹ä¸­ (<strong><code>/User/Applications/&lt;APP ID&gt;/</code></strong>) æ‚¨å¯ä»¥æ‰¾åˆ°ä¸€äº›æœ‰è¶£çš„æ–‡ä»¶ï¼š</li>
<li><strong><code>iTunesArtwork</code></strong>ï¼šåº”ç”¨ç¨‹åºä½¿ç”¨çš„å›¾æ ‡</li>
<li><strong><code>iTunesMetadata.plist</code></strong>ï¼šåœ¨ App Store ä¸­ä½¿ç”¨çš„åº”ç”¨ä¿¡æ¯</li>
<li><strong><code>/Library/*</code></strong>ï¼šåŒ…å«é¦–é€‰é¡¹å’Œç¼“å­˜ã€‚åœ¨ <strong><code>/Library/Cache/Snapshots/*</code></strong> ä¸­å¯ä»¥æ‰¾åˆ°åœ¨å°†åº”ç”¨ç¨‹åºå‘é€åˆ°åå°ä¹‹å‰å¯¹å…¶è¿›è¡Œçš„å¿«ç…§ã€‚</li>
</ul>
<h3 id="çƒ­è¡¥ä¸å¼ºåˆ¶æ›´æ–°"><a class="header" href="#çƒ­è¡¥ä¸å¼ºåˆ¶æ›´æ–°">çƒ­è¡¥ä¸/å¼ºåˆ¶æ›´æ–°</a></h3>
<p>å¼€å‘äººå‘˜å¯ä»¥è¿œç¨‹ <strong>å³æ—¶ä¿®è¡¥å…¶åº”ç”¨çš„æ‰€æœ‰å®‰è£…</strong>ï¼Œè€Œæ— éœ€é‡æ–°æäº¤åº”ç”¨ç¨‹åºåˆ° App Store å¹¶ç­‰å¾…æ‰¹å‡†ã€‚<br />
ä¸ºæ­¤ï¼Œé€šå¸¸ä½¿ç”¨ <a href="https://github.com/bang590/JSPatch"><strong>JSPatch</strong></a><strong>.</strong> ä½†è¿˜æœ‰å…¶ä»–é€‰é¡¹ï¼Œå¦‚ <a href="https://github.com/ArtSabintsev/Siren">Siren</a> å’Œ <a href="https://www.npmjs.com/package/react-native-appstore-version-checker">react-native-appstore-version-checker</a>ã€‚<br />
<strong>è¿™æ˜¯ä¸€ç§å±é™©çš„æœºåˆ¶ï¼Œå¯èƒ½è¢«æ¶æ„ç¬¬ä¸‰æ–¹ SDK æ»¥ç”¨ï¼Œå› æ­¤å»ºè®®æ£€æŸ¥ç”¨äºè‡ªåŠ¨æ›´æ–°çš„æ–¹æ³•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å¹¶è¿›è¡Œæµ‹è¯•ã€‚</strong> æ‚¨å¯ä»¥å°è¯•ä¸‹è½½è¯¥åº”ç”¨ç¨‹åºçš„å…ˆå‰ç‰ˆæœ¬ä»¥æ­¤ç›®çš„ã€‚</p>
<h3 id="ç¬¬ä¸‰æ–¹"><a class="header" href="#ç¬¬ä¸‰æ–¹">ç¬¬ä¸‰æ–¹</a></h3>
<p><strong>ç¬¬ä¸‰æ–¹ SDK</strong> çš„ä¸€ä¸ªé‡å¤§æŒ‘æˆ˜æ˜¯ <strong>ç¼ºä¹å¯¹å…¶åŠŸèƒ½çš„ç»†ç²’åº¦æ§åˆ¶</strong>ã€‚å¼€å‘äººå‘˜é¢ä¸´é€‰æ‹©ï¼šè¦ä¹ˆé›†æˆ SDK å¹¶æ¥å—å…¶æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ½œåœ¨çš„å®‰å…¨æ¼æ´å’Œéšç§é—®é¢˜ï¼Œè¦ä¹ˆå®Œå…¨æ”¾å¼ƒå…¶å¥½å¤„ã€‚é€šå¸¸ï¼Œå¼€å‘äººå‘˜æ— æ³•è‡ªè¡Œä¿®è¡¥è¿™äº› SDK ä¸­çš„æ¼æ´ã€‚æ­¤å¤–ï¼Œéšç€ SDK åœ¨ç¤¾åŒºä¸­è·å¾—ä¿¡ä»»ï¼Œæœ‰äº›å¯èƒ½å¼€å§‹åŒ…å«æ¶æ„è½¯ä»¶ã€‚</p>
<p>ç¬¬ä¸‰æ–¹ SDK æä¾›çš„æœåŠ¡å¯èƒ½åŒ…æ‹¬ç”¨æˆ·è¡Œä¸ºè·Ÿè¸ªã€å¹¿å‘Šå±•ç¤ºæˆ–ç”¨æˆ·ä½“éªŒå¢å¼ºã€‚ç„¶è€Œï¼Œè¿™å¸¦æ¥äº†é£é™©ï¼Œå› ä¸ºå¼€å‘äººå‘˜å¯èƒ½å¹¶ä¸å®Œå…¨äº†è§£è¿™äº›åº“æ‰§è¡Œçš„ä»£ç ï¼Œä»è€Œå¯¼è‡´æ½œåœ¨çš„éšç§å’Œå®‰å…¨é£é™©ã€‚é™åˆ¶ä¸ç¬¬ä¸‰æ–¹æœåŠ¡å…±äº«çš„ä¿¡æ¯ä»…é™äºå¿…è¦çš„ä¿¡æ¯ï¼Œå¹¶ç¡®ä¿æ²¡æœ‰æ•æ„Ÿæ•°æ®è¢«æš´éœ²è‡³å…³é‡è¦ã€‚</p>
<p>ç¬¬ä¸‰æ–¹æœåŠ¡çš„å®ç°é€šå¸¸æœ‰ä¸¤ç§å½¢å¼ï¼šç‹¬ç«‹åº“æˆ–å®Œæ•´ SDKã€‚ä¸ºäº†ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œä¸è¿™äº›æœåŠ¡å…±äº«çš„ä»»ä½•æ•°æ®éƒ½åº” <strong>åŒ¿ååŒ–</strong> ä»¥é˜²æ­¢æ³„éœ²ä¸ªäººå¯è¯†åˆ«ä¿¡æ¯ï¼ˆPIIï¼‰ã€‚</p>
<p>è¦è¯†åˆ«åº”ç”¨ç¨‹åºä½¿ç”¨çš„åº“ï¼Œå¯ä»¥ä½¿ç”¨ <strong><code>otool</code></strong> å‘½ä»¤ã€‚æ­¤å·¥å…·åº”é’ˆå¯¹åº”ç”¨ç¨‹åºåŠå…¶ä½¿ç”¨çš„æ¯ä¸ªå…±äº«åº“è¿è¡Œï¼Œä»¥å‘ç°å…¶ä»–åº“ã€‚</p>
<pre><code class="language-bash">otool -L &lt;application_path&gt;
</code></pre>
<h2 id="å‚è€ƒèµ„æ–™ä¸æ›´å¤šèµ„æº"><a class="header" href="#å‚è€ƒèµ„æ–™ä¸æ›´å¤šèµ„æº"><strong>å‚è€ƒèµ„æ–™ä¸æ›´å¤šèµ„æº</strong></a></h2>
<ul>
<li><a href="https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06b-basic-security-testing#information-gathering">https://mobile-security.gitbook.io/mobile-security-testing-guide/ios-testing-guide/0x06b-basic-security-testing#information-gathering</a></li>
<li><a href="https://my.ine.com/CyberSecurity/courses/089d060b/ios-mobile-app-pentesting">iOS &amp; ç§»åŠ¨åº”ç”¨ Pentesting - INE</a></li>
<li><a href="https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0057/">https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0057/</a></li>
<li><a href="https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0058/">https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0058/</a></li>
<li><a href="https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0059/">https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0059/</a></li>
<li><a href="https://mas.owasp.org/MASTG/iOS/0x06d-Testing-Data-Storage">https://mas.owasp.org/MASTG/iOS/0x06d-Testing-Data-Storage</a></li>
<li><a href="https://coderwall.com/p/kjb3lw/storing-password-in-keychain-the-smart-way">https://coderwall.com/p/kjb3lw/storing-password-in-keychain-the-smart-way</a></li>
<li><a href="https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0055/">https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0055/</a></li>
<li><a href="https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0053">https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0053</a></li>
<li><a href="https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0060/">https://mas.owasp.org/MASTG/techniques/ios/MASTG-TECH-0060/</a></li>
<li><a href="https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0058">https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0058</a></li>
<li><a href="https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0060">https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0060</a></li>
<li><a href="https://mas.owasp.org/MASTG/Android/0x05f-Testing-Local-Authentication/">https://mas.owasp.org/MASTG/Android/0x05f-Testing-Local-Authentication/</a></li>
<li><a href="https://mas.owasp.org/MASTG/tests/ios/MASVS-AUTH/MASTG-TEST-0064">https://mas.owasp.org/MASTG/tests/ios/MASVS-AUTH/MASTG-TEST-0064</a></li>
<li><a href="https://medium.com/securing/bypassing-your-apps-biometric-checks-on-ios-c2555c81a2dc">https://medium.com/securing/bypassing-your-apps-biometric-checks-on-ios-c2555c81a2dc</a></li>
<li><a href="https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0054">https://mas.owasp.org/MASTG/tests/ios/MASVS-STORAGE/MASTG-TEST-0054</a></li>
<li><a href="https://github.com/ivRodriguezCA/RE-iOS-Apps/">https://github.com/ivRodriguezCA/RE-iOS-Apps/</a> iOS å…è´¹è¯¾ç¨‹(<a href="https://syrion.me/blog/ios-swift-antijailbreak-bypass-frida/">https://syrion.me/blog/ios-swift-antijailbreak-bypass-frida/</a>)</li>
<li><a href="https://www.sans.org/reading-room/whitepapers/testing/ipwn-apps-pentesting-ios-applications-34577">https://www.sans.org/reading-room/whitepapers/testing/ipwn-apps-pentesting-ios-applications-34577</a></li>
<li><a href="https://www.slideshare.net/RyanISI/ios-appsecurityminicourse">https://www.slideshare.net/RyanISI/ios-appsecurityminicourse</a></li>
<li><a href="https://github.com/prateek147/DVIA">https://github.com/prateek147/DVIA</a></li>
<li><a href="https://github.com/prateek147/DVIA-v2">https://github.com/prateek147/DVIA-v2</a></li>
<li><a href="https://github.com/OWASP/MSTG-Hacking-Playground">https://github.com/OWASP/MSTG-Hacking-Playground%20</a></li>
<li>OWASP iGoat <a href="https://github.com/OWASP/igoat"><em>https://github.com/OWASP/igoat</em></a> &lt;&lt;&lt; Objective-C ç‰ˆæœ¬ <a href="https://github.com/OWASP/iGoat-Swift"><em>https://github.com/OWASP/iGoat-Swift</em></a> &lt;&lt;&lt; Swift ç‰ˆæœ¬</li>
<li><a href="https://github.com/authenticationfailure/WheresMyBrowser.iOS">https://github.com/authenticationfailure/WheresMyBrowser.iOS</a></li>
<li><a href="https://github.com/nabla-c0d3/ssl-kill-switch2">https://github.com/nabla-c0d3/ssl-kill-switch2</a></li>
</ul>
<figure><img src="../../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>
<p><br />
ä½¿ç”¨ <a href="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=text&amp;utm_campaign=ppc&amp;utm_term=trickest&amp;utm_content=ios-pentesting"><strong>Trickest</strong></a> è½»æ¾æ„å»ºå’Œ <strong>è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹</strong>ï¼Œç”±ä¸–ç•Œä¸Š <strong>æœ€å…ˆè¿›</strong> çš„ç¤¾åŒºå·¥å…·æä¾›æ”¯æŒã€‚<br />
ä»Šå¤©å°±è·å–è®¿é—®æƒé™ï¼š</p>
<p>{% embed url="https://trickest.com/?utm_source=hacktricks&amp;utm_medium=banner&amp;utm_campaign=ppc&amp;utm_content=ios-pentesting" %}
{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
å­¦ä¹ ä¸å®è·µ GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>æ”¯æŒ HackTricks</summary>
<ul>
<li>æŸ¥çœ‹ <a href="https://github.com/sponsors/carlospolop"><strong>è®¢é˜…è®¡åˆ’</strong></a>!</li>
<li><strong>åŠ å…¥</strong> ğŸ’¬ <a href="https://discord.gg/hRep4RUj7f"><strong>Discord ç¾¤ç»„</strong></a> æˆ– <a href="https://t.me/peass"><strong>ç”µæŠ¥ç¾¤ç»„</strong></a> æˆ– <strong>å…³æ³¨</strong> æˆ‘ä»¬çš„ <strong>Twitter</strong> ğŸ¦ <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>é€šè¿‡å‘</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> å’Œ <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> github ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚</li>
</ul>
</details>
{% endhint %}
</details>
{% endhint %}

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../mobile-pentesting/ios-pentesting-checklist.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../mobile-pentesting/ios-pentesting/ios-app-extensions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../mobile-pentesting/ios-pentesting-checklist.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../mobile-pentesting/ios-pentesting/ios-app-extensions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
