<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>11211 - Pentesting Memcache</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="11211---pentesting-memcache"><a class="header" href="#11211---pentesting-memcache">11211 - Pentesting Memcache</a></h1>
<p>{% hint style="success" %}
å­¦ä¹ ä¸å®è·µ AWS é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks åŸ¹è®­ AWS çº¢é˜Ÿä¸“å®¶ (ARTE)</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
å­¦ä¹ ä¸å®è·µ GCP é»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks åŸ¹è®­ GCP çº¢é˜Ÿä¸“å®¶ (GRTE)</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>æ”¯æŒ HackTricks</summary>
<ul>
<li>æŸ¥çœ‹ <a href="https://github.com/sponsors/carlospolop"><strong>è®¢é˜…è®¡åˆ’</strong></a>!</li>
<li><strong>åŠ å…¥</strong> ğŸ’¬ <a href="https://discord.gg/hRep4RUj7f"><strong>Discord ç¾¤ç»„</strong></a> æˆ– <a href="https://t.me/peass"><strong>Telegram ç¾¤ç»„</strong></a> æˆ– <strong>å…³æ³¨</strong> æˆ‘ä»¬çš„ <strong>Twitter</strong> ğŸ¦ <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>é€šè¿‡å‘</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> å’Œ <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> GitHub ä»“åº“æäº¤ PR åˆ†äº«é»‘å®¢æŠ€å·§ã€‚</li>
</ul>
</details>
{% endhint %}
<h2 id="åè®®ä¿¡æ¯"><a class="header" href="#åè®®ä¿¡æ¯">åè®®ä¿¡æ¯</a></h2>
<p>æ¥è‡ª <a href="https://en.wikipedia.org/wiki/Memcached">wikipedia</a>:</p>
<blockquote>
<p><strong>Memcached</strong>ï¼ˆå‘éŸ³ï¼šmem-cashed, mem-cash-deeï¼‰æ˜¯ä¸€ä¸ªé€šç”¨çš„åˆ†å¸ƒå¼ <a href="https://en.wikipedia.org/wiki/Memory_caching">å†…å­˜ç¼“å­˜</a> ç³»ç»Ÿã€‚å®ƒé€šå¸¸ç”¨äºé€šè¿‡åœ¨ RAM ä¸­ç¼“å­˜æ•°æ®å’Œå¯¹è±¡æ¥åŠ é€ŸåŠ¨æ€æ•°æ®åº“é©±åŠ¨çš„ç½‘ç«™ï¼Œä»¥å‡å°‘è¯»å–å¤–éƒ¨æ•°æ®æºï¼ˆå¦‚æ•°æ®åº“æˆ– APIï¼‰çš„æ¬¡æ•°ã€‚</p>
</blockquote>
<p>å°½ç®¡ Memcached æ”¯æŒ SASLï¼Œä½†å¤§å¤šæ•°å®ä¾‹æ˜¯ <strong>æœªç»è¿‡èº«ä»½éªŒè¯</strong> çš„ã€‚</p>
<p><strong>é»˜è®¤ç«¯å£ï¼š</strong> 11211</p>
<pre><code>PORT      STATE SERVICE
11211/tcp open  unknown
</code></pre>
<h2 id="enumeration"><a class="header" href="#enumeration">Enumeration</a></h2>
<h3 id="manual"><a class="header" href="#manual">Manual</a></h3>
<p>è¦æå– memcache å®ä¾‹ä¸­ä¿å­˜çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ‚¨éœ€è¦ï¼š</p>
<ol>
<li>æ‰¾åˆ° <strong>slabs</strong> ä¸­çš„ <strong>æ´»åŠ¨é¡¹</strong></li>
<li>è·å–ä¹‹å‰æ£€æµ‹åˆ°çš„ slabs çš„ <strong>é”®å</strong></li>
<li>é€šè¿‡ <strong>è·å–é”®å</strong> æ¥æå– <strong>ä¿å­˜çš„æ•°æ®</strong></li>
</ol>
<p>è¯·è®°ä½ï¼Œè¿™é¡¹æœåŠ¡åªæ˜¯ä¸€ä¸ª <strong>ç¼“å­˜</strong>ï¼Œå› æ­¤ <strong>æ•°æ®å¯èƒ½ä¼šå‡ºç°å’Œæ¶ˆå¤±</strong>ã€‚</p>
<pre><code class="language-bash">echo "version" | nc -vn -w 1 &lt;IP&gt; 11211      #Get version
echo "stats" | nc -vn -w 1 &lt;IP&gt; 11211        #Get status
echo "stats slabs" | nc -vn -w 1 &lt;IP&gt; 11211  #Get slabs
echo "stats items" | nc -vn -w 1 &lt;IP&gt; 11211  #Get items of slabs with info
echo "stats cachedump &lt;number&gt; 0" | nc -vn -w 1 &lt;IP&gt; 11211  #Get key names (the 0 is for unlimited output size)
echo "get &lt;item_name&gt;" | nc -vn -w 1 &lt;IP&gt; 11211  #Get saved info

#This php will just dump the keys, you need to use "get &lt;item_name&gt; later"
sudo apt-get install php-memcached
php -r '$c = new Memcached(); $c-&gt;addServer("localhost", 11211); var_dump( $c-&gt;getAllKeys() );'
</code></pre>
<h3 id="æ‰‹åŠ¨2"><a class="header" href="#æ‰‹åŠ¨2">æ‰‹åŠ¨2</a></h3>
<pre><code class="language-bash">sudo apt install libmemcached-tools
memcstat --servers=127.0.0.1 #Get stats
memcdump --servers=127.0.0.1 #Get all items
memccat  --servers=127.0.0.1 &lt;item1&gt; &lt;item2&gt; &lt;item3&gt; #Get info inside the item(s)
</code></pre>
<h3 id="è‡ªåŠ¨"><a class="header" href="#è‡ªåŠ¨">è‡ªåŠ¨</a></h3>
<pre><code class="language-bash">nmap -n -sV --script memcached-info -p 11211 &lt;IP&gt;   #Just gather info
msf &gt; use auxiliary/gather/memcached_extractor      #Extracts saved data
msf &gt; use auxiliary/scanner/memcached/memcached_amp #Check is UDP DDoS amplification attack is possible
</code></pre>
<h2 id="dumping-memcache-keys"><a class="header" href="#dumping-memcache-keys"><strong>Dumping Memcache Keys</strong></a></h2>
<p>åœ¨memcacheé¢†åŸŸï¼Œä¸€ä¸ªå¸®åŠ©ç»„ç»‡æ•°æ®çš„åè®®ï¼Œé€šè¿‡slabsï¼Œå­˜åœ¨ç‰¹å®šçš„å‘½ä»¤ç”¨äºæ£€æŸ¥å­˜å‚¨çš„æ•°æ®ï¼Œå°½ç®¡æœ‰æ˜¾è‘—çš„é™åˆ¶ï¼š</p>
<ol>
<li>åªèƒ½æŒ‰slabç±»è½¬å‚¨é”®ï¼Œå°†ç›¸ä¼¼å†…å®¹å¤§å°çš„é”®åˆ†ç»„ã€‚</li>
<li>æ¯ä¸ªslabç±»çš„é™åˆ¶ä¸ºä¸€é¡µï¼Œç›¸å½“äº1MBçš„æ•°æ®ã€‚</li>
<li>æ­¤åŠŸèƒ½æ˜¯éå®˜æ–¹çš„ï¼Œå¯èƒ½éšæ—¶è¢«å–æ¶ˆï¼Œå¦‚åœ¨<a href="https://groups.google.com/forum/?fromgroups=#!topic/memcached/1-T8I-RVGKM">ç¤¾åŒºè®ºå›</a>ä¸­è®¨è®ºçš„é‚£æ ·ã€‚</li>
</ol>
<p>åªèƒ½ä»æ½œåœ¨çš„åƒå…†å­—èŠ‚æ•°æ®ä¸­è½¬å‚¨1MBçš„é™åˆ¶å°¤å…¶æ˜¾è‘—ã€‚ç„¶è€Œï¼Œè¿™ä¸€åŠŸèƒ½ä»ç„¶å¯ä»¥æ ¹æ®ç‰¹å®šéœ€æ±‚æä¾›å¯¹é”®ä½¿ç”¨æ¨¡å¼çš„æ´å¯Ÿã€‚å¯¹äºé‚£äº›å¯¹æœºåˆ¶ä¸å¤ªæ„Ÿå…´è¶£çš„äººï¼Œå¯ä»¥è®¿é—®<a href="https://lzone.de/cheat-sheet/memcached#tools">å·¥å…·éƒ¨åˆ†</a>ï¼ŒæŸ¥çœ‹å…¨é¢è½¬å‚¨çš„å®ç”¨å·¥å…·ã€‚æˆ–è€…ï¼Œä¸‹é¢æ¦‚è¿°äº†ä½¿ç”¨telnetä¸memcachedè®¾ç½®ç›´æ¥äº¤äº’çš„è¿‡ç¨‹ã€‚</p>
<h3 id="how-it-works"><a class="header" href="#how-it-works"><strong>How it Works</strong></a></h3>
<p>Memcacheçš„å†…å­˜ç»„ç»‡è‡³å…³é‡è¦ã€‚ä½¿ç”¨"-vv"é€‰é¡¹å¯åŠ¨memcacheå¯ä»¥æ˜¾ç¤ºå®ƒç”Ÿæˆçš„slabç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-bash">$ memcached -vv
slab class   1: chunk size        96 perslab   10922
[...]
</code></pre>
<p>è¦æ˜¾ç¤ºæ‰€æœ‰å½“å‰å­˜åœ¨çš„ slabsï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">stats slabs
</code></pre>
<p>å°†å•ä¸ªé”®æ·»åŠ åˆ° memcached 1.4.13 æ¼”ç¤ºäº†å¦‚ä½•å¡«å……å’Œç®¡ç† slab ç±»ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-bash">set mykey 0 60 1
1
STORED
</code></pre>
<p>æ‰§è¡Œâ€œstats slabsâ€å‘½ä»¤åæ·»åŠ é”®ä¼šäº§ç”Ÿå…³äº slab åˆ©ç”¨ç‡çš„è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ï¼š</p>
<pre><code class="language-bash">stats slabs
[...]
</code></pre>
<p>æ­¤è¾“å‡ºæ˜¾ç¤ºäº†æ´»åŠ¨çš„ slab ç±»å‹ã€ä½¿ç”¨çš„å—å’Œæ“ä½œç»Ÿè®¡ä¿¡æ¯ï¼Œæä¾›äº†æœ‰å…³è¯»å†™æ“ä½œæ•ˆç‡çš„è§è§£ã€‚</p>
<p>å¦ä¸€ä¸ªæœ‰ç”¨çš„å‘½ä»¤ "stats items" æä¾›äº†å…³äºé©±é€ã€å†…å­˜é™åˆ¶å’Œé¡¹ç›®ç”Ÿå‘½å‘¨æœŸçš„æ•°æ®ï¼š</p>
<pre><code class="language-bash">stats items
[...]
</code></pre>
<p>è¿™äº›ç»Ÿè®¡æ•°æ®å…è®¸å¯¹åº”ç”¨ç¨‹åºç¼“å­˜è¡Œä¸ºè¿›è¡Œæœ‰æ ¹æ®çš„å‡è®¾ï¼ŒåŒ…æ‹¬ä¸åŒå†…å®¹å¤§å°çš„ç¼“å­˜æ•ˆç‡ã€å†…å­˜åˆ†é…å’Œç¼“å­˜å¤§å¯¹è±¡çš„èƒ½åŠ›ã€‚</p>
<h3 id="è½¬å‚¨é”®"><a class="header" href="#è½¬å‚¨é”®"><strong>è½¬å‚¨é”®</strong></a></h3>
<p>å¯¹äº1.4.31ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œé”®æ˜¯é€šè¿‡ slab ç±»è½¬å‚¨çš„ï¼Œä½¿ç”¨ï¼š</p>
<pre><code class="language-bash">stats cachedump &lt;slab class&gt; &lt;number of items to dump&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œè¦è½¬å‚¨ç±» #1 ä¸­çš„ä¸€ä¸ªé”®ï¼š</p>
<pre><code class="language-bash">stats cachedump 1 1000
ITEM mykey [1 b; 1350677968 s]
END
</code></pre>
<p>æ­¤æ–¹æ³•éå† slab ç±»ï¼Œæå–å¹¶å¯é€‰åœ°è½¬å‚¨é”®å€¼ã€‚</p>
<h3 id="è½¬å‚¨-memcache-é”®-ver-1431"><a class="header" href="#è½¬å‚¨-memcache-é”®-ver-1431"><strong>è½¬å‚¨ MEMCACHE é”® (VER 1.4.31+)</strong></a></h3>
<p>åœ¨ memcache ç‰ˆæœ¬ 1.4.31 åŠä»¥ä¸Šï¼Œå¼•å…¥äº†ä¸€ç§æ–°çš„ã€æ›´å®‰å…¨çš„æ–¹æ³•æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è½¬å‚¨é”®ï¼Œåˆ©ç”¨éé˜»å¡æ¨¡å¼ï¼Œå¦‚ <a href="https://github.com/memcached/memcached/wiki/ReleaseNotes1431">å‘å¸ƒè¯´æ˜</a> ä¸­è¯¦ç»†è¯´æ˜ã€‚è¿™ç§æ–¹æ³•ç”Ÿæˆå¤§é‡è¾“å‡ºï¼Œå› æ­¤å»ºè®®ä½¿ç”¨ 'nc' å‘½ä»¤ä»¥æé«˜æ•ˆç‡ã€‚ç¤ºä¾‹åŒ…æ‹¬ï¼š</p>
<pre><code class="language-bash">echo 'lru_crawler metadump all' | nc 127.0.0.1 11211 | head -1
echo 'lru_crawler metadump all' | nc 127.0.0.1 11211 | grep ee6ba58566e234ccbbce13f9a24f9a28
</code></pre>
<h3 id="dumping-tools"><a class="header" href="#dumping-tools"><strong>DUMPING TOOLS</strong></a></h3>
<p>Table <a href="https://lzone.de/blog">from here</a>.</p>
<div class="table-wrapper"><table><thead><tr><th>Programming Languages</th><th>Tools</th><th>Functionality</th><th></th><th></th></tr></thead><tbody>
<tr><td>PHP</td><td><a href="http://snipt.org/xtP">simple script</a></td><td>æ‰“å°é”®åã€‚</td><td></td><td></td></tr>
<tr><td>Perl</td><td><a href="https://wiki.jasig.org/download/attachments/13572172/memcached-clean.pl?version=1&amp;modificationDate=1229693957401">simple script</a></td><td>æ‰“å°é”®å’Œå€¼</td><td></td><td></td></tr>
<tr><td>Ruby</td><td><a href="https://gist.github.com/1365005">simple script</a></td><td>æ‰“å°é”®åã€‚</td><td></td><td></td></tr>
<tr><td>Perl</td><td><a href="https://search.cpan.org/~dmaki/Memcached-libmemcached-0.4202/src/libmemcached/docs/memdump.pod">memdump</a></td><td>CPANæ¨¡å—ä¸­çš„å·¥å…·</td><td><a href="https://search.cpan.org/~dmaki/Memcached-libmemc">Memcached-libmemcached</a></td><td>ached/)</td></tr>
<tr><td>PHP</td><td><a href="http://livebookmark.net/journal/2008/05/21/memcachephp-stats-like-apcphp/">memcache.php</a></td><td>Memcacheç›‘æ§GUIï¼Œä¹Ÿå…è®¸è½¬å‚¨é”®</td><td></td><td></td></tr>
<tr><td>libmemcached</td><td><a href="http://blog.evanweaver.com/2009/04/20/peeping-into-memcached/">peep</a></td><td><strong>ä¼šå†»ç»“ä½ çš„memcachedè¿›ç¨‹!!!</strong> ä½¿ç”¨æ—¶è¯·å°å¿ƒã€‚å¦‚æœä»ç„¶ä½¿ç”¨å®ƒï¼Œä½ å¯ä»¥ç»•è¿‡1MBé™åˆ¶ï¼ŒçœŸæ­£è½¬å‚¨<strong>æ‰€æœ‰</strong>é”®ã€‚</td><td></td><td></td></tr>
</tbody></table>
</div>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting <a href="#troubleshooting" id="troubleshooting"></a></a></h2>
<h3 id="1mb-data-limit"><a class="header" href="#1mb-data-limit">1MB Data Limit <a href="#1mb-data-limit" id="1mb-data-limit"></a></a></h3>
<p>è¯·æ³¨æ„ï¼Œåœ¨memcached 1.4ä¹‹å‰ï¼Œæ‚¨æ— æ³•å­˜å‚¨å¤§äº1MBçš„å¯¹è±¡ï¼Œå› ä¸ºé»˜è®¤çš„æœ€å¤§å—å¤§å°ã€‚</p>
<h3 id="never-set-a-timeout--30-days"><a class="header" href="#never-set-a-timeout--30-days">Never Set a Timeout &gt; 30 Days! <a href="#never-set-a-timeout--30-days" id="never-set-a-timeout--30-days"></a></a></h3>
<p>å¦‚æœæ‚¨å°è¯•â€œè®¾ç½®â€æˆ–â€œæ·»åŠ â€ä¸€ä¸ªè¶…æ—¶å¤§äºå…è®¸çš„æœ€å¤§å€¼çš„é”®ï¼Œæ‚¨å¯èƒ½ä¸ä¼šå¾—åˆ°é¢„æœŸçš„ç»“æœï¼Œå› ä¸ºmemcachedä¼šå°†è¯¥å€¼è§†ä¸ºUnixæ—¶é—´æˆ³ã€‚å¦‚æœæ—¶é—´æˆ³åœ¨è¿‡å»ï¼Œå®ƒå°†å®Œå…¨ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚æ‚¨çš„å‘½ä»¤å°†é»˜é»˜å¤±è´¥ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœæ‚¨æƒ³ä½¿ç”¨æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼Œè¯·æŒ‡å®š2592000ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code>set my_key 0 2592000 1
1
</code></pre>
<h3 id="æ¶ˆå¤±çš„é”®åœ¨æº¢å‡ºæ—¶"><a class="header" href="#æ¶ˆå¤±çš„é”®åœ¨æº¢å‡ºæ—¶">æ¶ˆå¤±çš„é”®åœ¨æº¢å‡ºæ—¶ <a href="#disappearing-keys-on-overflow" id="disappearing-keys-on-overflow"></a></a></h3>
<p>å°½ç®¡æ–‡æ¡£æåˆ°ä½¿ç”¨â€œincrâ€å¯¼è‡´64ä½æº¢å‡ºå€¼çš„æƒ…å†µä¼šä½¿å€¼æ¶ˆå¤±ï¼Œä½†éœ€è¦ä½¿ç”¨â€œaddâ€/â€œsetâ€é‡æ–°åˆ›å»ºã€‚</p>
<h3 id="å¤åˆ¶"><a class="header" href="#å¤åˆ¶">å¤åˆ¶ <a href="#replication" id="replication"></a></a></h3>
<p>memcachedæœ¬èº«ä¸æ”¯æŒå¤åˆ¶ã€‚å¦‚æœä½ çœŸçš„éœ€è¦å®ƒï¼Œä½ éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><a href="http://repcached.lab.klab.org/">repcached</a>: å¤šä¸»å¼‚æ­¥å¤åˆ¶ï¼ˆmemcached 1.2è¡¥ä¸é›†ï¼‰</li>
<li><a href="http://www.couchbase.com/memcached">Couchbase memcachedæ¥å£</a>: ä½¿ç”¨CouchBaseä½œä¸ºmemcachedçš„æ›¿ä»£</li>
<li><a href="https://cybozu.github.io/yrmcds/">yrmcds</a>: ä¸memcachedå…¼å®¹çš„ä¸»ä»é”®å€¼å­˜å‚¨</li>
<li><a href="https://github.com/twitter/twemproxy">twemproxy</a>ï¼ˆåˆånutcrackerï¼‰ï¼šæ”¯æŒmemcachedçš„ä»£ç†</li>
</ul>
<h3 id="å‘½ä»¤å¤‡å¿˜å•"><a class="header" href="#å‘½ä»¤å¤‡å¿˜å•">å‘½ä»¤å¤‡å¿˜å•</a></h3>
<p>{% content-ref url="memcache-commands.md" %}
<a href="memcache-commands.html">memcache-commands.md</a>
{% endcontent-ref %}</p>
<h3 id="shodan"><a class="header" href="#shodan"><strong>Shodan</strong></a></h3>
<ul>
<li><code>port:11211 "STAT pid"</code></li>
<li><code>"STAT pid"</code></li>
</ul>
<h2 id="å‚è€ƒæ–‡çŒ®"><a class="header" href="#å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</a></h2>
<ul>
<li><a href="https://lzone.de/cheat-sheet/memcached">https://lzone.de/cheat-sheet/memcached</a></li>
</ul>
<p>{% hint style="success" %}
å­¦ä¹ å’Œå®è·µAWSé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricksåŸ¹è®­AWSçº¢é˜Ÿä¸“å®¶ï¼ˆARTEï¼‰</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
å­¦ä¹ å’Œå®è·µGCPé»‘å®¢æŠ€æœ¯ï¼š<img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricksåŸ¹è®­GCPçº¢é˜Ÿä¸“å®¶ï¼ˆGRTEï¼‰</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>æ”¯æŒHackTricks</summary>
<ul>
<li>æŸ¥çœ‹<a href="https://github.com/sponsors/carlospolop"><strong>è®¢é˜…è®¡åˆ’</strong></a>!</li>
<li><strong>åŠ å…¥</strong> ğŸ’¬ <a href="https://discord.gg/hRep4RUj7f"><strong>Discordç¾¤ç»„</strong></a>æˆ–<a href="https://t.me/peass"><strong>ç”µæŠ¥ç¾¤ç»„</strong></a>æˆ–<strong>åœ¨</strong> <strong>Twitter</strong> ğŸ¦ <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚</strong></li>
<li><strong>é€šè¿‡å‘</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a>å’Œ<a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> GitHubåº“æäº¤PRåˆ†äº«é»‘å®¢æŠ€å·§ã€‚</li>
</ul>
</details>
{% endhint %}

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../network-services-pentesting/10000-network-data-management-protocol-ndmp.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../network-services-pentesting/11211-memcache/memcache-commands.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../network-services-pentesting/10000-network-data-management-protocol-ndmp.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../network-services-pentesting/11211-memcache/memcache-commands.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
