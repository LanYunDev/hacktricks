<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>161,162,10161,10162/udp - Pentesting SNMP</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="1611621016110162udp---pentesting-snmp"><a class="header" href="#1611621016110162udp---pentesting-snmp">161,162,10161,10162/udp - Pentesting SNMP</a></h1>
<p>{% hint style="success" %}
学习与实践 AWS 黑客技术：<img src="../../.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks 培训 AWS 红队专家 (ARTE)</strong></a><img src="../../.gitbook/assets/arte.png" alt="" data-size="line"><br />
学习与实践 GCP 黑客技术：<img src="../../.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks 培训 GCP 红队专家 (GRTE)</strong><img src="../../.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>支持 HackTricks</summary>
<ul>
<li>查看 <a href="https://github.com/sponsors/carlospolop"><strong>订阅计划</strong></a>!</li>
<li><strong>加入</strong> 💬 <a href="https://discord.gg/hRep4RUj7f"><strong>Discord 群组</strong></a> 或 <a href="https://t.me/peass"><strong>Telegram 群组</strong></a> 或 <strong>关注</strong> 我们的 <strong>Twitter</strong> 🐦 <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>通过向</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> 和 <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> GitHub 仓库提交 PR 分享黑客技巧。</li>
</ul>
</details>
{% endhint %}
<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>
<p>如果你对 <strong>黑客职业</strong> 感兴趣并想要攻克不可攻克的目标 - <strong>我们正在招聘！</strong> (<em>要求流利的波兰语书写和口语能力</em>).</p>
<p>{% embed url="https://www.stmcyber.com/careers" %}</p>
<h2 id="基本信息"><a class="header" href="#基本信息">基本信息</a></h2>
<p><strong>SNMP - 简单网络管理协议</strong> 是一种用于监控网络中不同设备（如路由器、交换机、打印机、物联网设备等）的协议。</p>
<pre><code>PORT    STATE SERVICE REASON                 VERSION
161/udp open  snmp    udp-response ttl 244   ciscoSystems SNMPv3 server (public)
</code></pre>
<p>{% hint style="info" %}
SNMP 还使用端口 <strong>162/UDP</strong> 进行 <strong>traps</strong>。这些是 <strong>从 SNMP 服务器发送到客户端的数据包，而无需明确请求</strong>。
{% endhint %}</p>
<h3 id="mib"><a class="header" href="#mib">MIB</a></h3>
<p>为了确保 SNMP 访问在不同制造商和不同客户端-服务器组合之间正常工作，创建了 <strong>管理信息库 (MIB)</strong>。MIB 是 <strong>存储设备信息的独立格式</strong>。MIB 是一个 <strong>文本</strong> 文件，其中列出了设备的所有可查询 <strong>SNMP 对象</strong>，以 <strong>标准化</strong> 的树形层次结构呈现。它至少包含一个 <code>对象标识符</code> (<code>OID</code>)，该标识符除了必要的 <strong>唯一地址</strong> 和 <strong>名称</strong> 外，还提供有关类型、访问权限和相应对象描述的信息。<br />
MIB 文件采用 <code>抽象语法标记一</code> (<code>ASN.1</code>) 基于 ASCII 文本格式编写。<strong>MIB 不包含数据</strong>，但它们解释了 <strong>在哪里找到哪些信息</strong> 以及它们的外观，返回特定 OID 的值，或使用了哪种数据类型。</p>
<h3 id="oids"><a class="header" href="#oids">OIDs</a></h3>
<p><strong>对象标识符 (OIDs)</strong> 起着至关重要的作用。这些唯一标识符旨在管理 <strong>管理信息库 (MIB)</strong> 中的对象。</p>
<p>MIB 对象 ID 或 OID 的最高级别分配给不同的标准制定组织。在这些顶级中，建立了全球管理实践和标准的框架。</p>
<p>此外，供应商被授予建立私有分支的自由。在这些分支中，他们有 <strong>自主权来包含与其自身产品线相关的管理对象</strong>。该系统确保在不同供应商和标准之间有一个结构化和有组织的方法来识别和管理各种对象。</p>
<p><img src="../../.gitbook/assets/SNMP_OID_MIB_Tree%20(1).png" alt="" /></p>
<p>您可以通过网络 <strong>浏览</strong> OID 树： <a href="http://www.oid-info.com/cgi-bin/display?tree=#focus">http://www.oid-info.com/cgi-bin/display?tree=#focus</a> 或 <strong>查看 OID 的含义</strong>（如 <code>1.3.6.1.2.1.1</code>）访问 <a href="http://oid-info.com/get/1.3.6.1.2.1.1">http://oid-info.com/get/1.3.6.1.2.1.1</a>。<br />
有一些 <strong>知名的 OID</strong>，例如 <a href="http://oid-info.com/get/1.3.6.1.2.1">1.3.6.1.2.1</a> 中的 OID，引用了 MIB-2 定义的简单网络管理协议 (SNMP) 变量。从 <strong>此 OID 的待处理 OID</strong> 中，您可以获取一些有趣的主机数据（系统数据、网络数据、进程数据...）</p>
<h3 id="oid-示例"><a class="header" href="#oid-示例"><strong>OID 示例</strong></a></h3>
<p><a href="https://www.netadmintools.com/snmp-mib-and-oids/"><strong>来自这里的示例</strong></a>：</p>
<p><strong><code>1 . 3 . 6 . 1 . 4 . 1 . 1452 . 1 . 2 . 5 . 1 . 3. 21 . 1 . 4 . 7</code></strong></p>
<p>以下是该地址的分解。</p>
<ul>
<li>1 – 这称为 ISO，表明这是一个 OID。这就是所有 OID 以“1”开头的原因。</li>
<li>3 – 这称为 ORG，用于指定构建设备的组织。</li>
<li>6 – 这是 dod 或国防部，它是最早建立互联网的组织。</li>
<li>1 – 这是互联网的值，表示所有通信将通过互联网进行。</li>
<li>4 – 该值确定该设备是由私营组织制造的，而不是政府组织。</li>
<li>1 – 该值表示该设备是由企业或商业实体制造的。</li>
</ul>
<p>这前六个值对于所有设备来说往往是相同的，它们提供了关于设备的基本信息。这个数字序列对于所有 OID 来说都是相同的，除非设备是由政府制造的。</p>
<p>接下来是下一组数字。</p>
<ul>
<li>1452 – 给出制造该设备的组织名称。</li>
<li>1 – 解释设备的类型。在这种情况下，它是一个闹钟。</li>
<li>2 – 确定该设备是一个远程终端单元。</li>
</ul>
<p>其余的值提供有关设备的具体信息。</p>
<ul>
<li>5 – 表示一个离散的报警点。</li>
<li>1 – 设备中的特定点</li>
<li>3 – 端口</li>
<li>21 – 端口的地址</li>
<li>1 – 端口的显示</li>
<li>4 – 点编号</li>
<li>7 – 点的状态</li>
</ul>
<h3 id="snmp-版本"><a class="header" href="#snmp-版本">SNMP 版本</a></h3>
<p>有 2 个重要的 SNMP 版本：</p>
<ul>
<li><strong>SNMPv1</strong>：主要版本，仍然是最常见的，<strong>身份验证基于字符串</strong>（社区字符串），以 <strong>明文</strong> 形式传输（所有信息以明文形式传输）。<strong>版本 2 和 2c</strong> 也以 <strong>明文</strong> 发送 <strong>流量</strong>，并使用 <strong>社区字符串作为身份验证</strong>。</li>
<li><strong>SNMPv3</strong>：使用更好的 <strong>身份验证</strong> 形式，信息以 <strong>加密</strong> 形式传输（可以进行 <strong>字典攻击</strong>，但找到正确的凭据比在 SNMPv1 和 v2 中要困难得多）。</li>
</ul>
<h3 id="社区字符串"><a class="header" href="#社区字符串">社区字符串</a></h3>
<p>如前所述，<strong>要访问保存在 MIB 上的信息，您需要知道版本 1 和 2/2c 的社区字符串，以及版本 3 的凭据。</strong><br />
有 <strong>2 种类型的社区字符串</strong>：</p>
<ul>
<li><strong><code>public</code></strong> 主要是 <strong>只读</strong> 功能</li>
<li><strong><code>private</code></strong> <strong>读/写</strong> 一般</li>
</ul>
<p>请注意，<strong>OID 的可写性取决于使用的社区字符串</strong>，因此 <strong>即使</strong> 您发现使用了“<strong>public</strong>”，您也可能能够 <strong>写入某些值</strong>。此外，可能存在 <strong>始终为“只读”</strong> 的对象。<br />
如果您尝试 <strong>写入</strong> 一个对象，将收到 <strong><code>noSuchName</code> 或 <code>readOnly</code> 错误</strong>**.**</p>
<p>在版本 1 和 2/2c 中，如果您使用 <strong>错误</strong> 的社区字符串，服务器将不会 <strong>响应</strong>。因此，如果它响应，则使用了 <strong>有效的社区字符串</strong>。</p>
<h2 id="端口"><a class="header" href="#端口">端口</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol">来自维基百科</a>：</p>
<ul>
<li>SNMP 代理在 UDP 端口 <strong>161</strong> 上接收请求。</li>
<li>管理器在端口 <strong>162</strong> 上接收通知（<a href="https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol#Trap">Traps</a> 和 <a href="https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol#InformRequest">InformRequests</a>）。</li>
<li>当与 <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">传输层安全性</a> 或 <a href="https://en.wikipedia.org/wiki/Datagram_Transport_Layer_Security">数据报传输层安全性</a> 一起使用时，请求在端口 <strong>10161</strong> 上接收，通知发送到端口 <strong>10162</strong>。</li>
</ul>
<h2 id="暴力破解社区字符串-v1-和-v2c"><a class="header" href="#暴力破解社区字符串-v1-和-v2c">暴力破解社区字符串 (v1 和 v2c)</a></h2>
<p>要 <strong>猜测社区字符串</strong>，您可以执行字典攻击。查看 <a href="../../generic-hacking/brute-force.html#snmp">这里不同的方法以对 SNMP 执行暴力攻击</a>。一个常用的社区字符串是 <code>public</code>。</p>
<h2 id="枚举-snmp"><a class="header" href="#枚举-snmp">枚举 SNMP</a></h2>
<p>建议安装以下内容，以查看从设备收集的 <strong>每个 OID 的含义</strong>：</p>
<pre><code class="language-bash">apt-get install snmp-mibs-downloader
download-mibs
# Finally comment the line saying "mibs :" in /etc/snmp/snmp.conf
sudo vi /etc/snmp/snmp.conf
</code></pre>
<p>如果您知道有效的社区字符串，您可以使用 <strong>SNMPWalk</strong> 或 <strong>SNMP-Check</strong> 访问数据：</p>
<pre><code class="language-bash">snmpbulkwalk -c [COMM_STRING] -v [VERSION] [IP] . #Don't forget the final dot
snmpbulkwalk -c public -v2c 10.10.11.136 .

snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP]
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] 1.3.6.1.2.1.4.34.1.3 #Get IPv6, needed dec2hex
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] NET-SNMP-EXTEND-MIB::nsExtendObjects #get extended
snmpwalk -v [VERSION_SNMP] -c [COMM_STRING] [DIR_IP] .1 #Enum all

snmp-check [DIR_IP] -p [PORT] -c [COMM_STRING]

nmap --script "snmp* and not snmp-brute" &lt;target&gt;

braa &lt;community string&gt;@&lt;IP&gt;:.1.3.6.* #Bruteforce specific OID
</code></pre>
<p>感谢扩展查询（download-mibs），可以使用以下命令枚举更多关于系统的信息：</p>
<pre><code class="language-bash">snmpwalk -v X -c public &lt;IP&gt; NET-SNMP-EXTEND-MIB::nsExtendOutputFull
</code></pre>
<p><strong>SNMP</strong> 有很多关于主机的信息，您可能会发现有趣的内容包括：<strong>网络接口</strong>（IPv4 和 <strong>IPv6</strong> 地址）、用户名、正常运行时间、服务器/操作系统版本，以及 <strong>进程</strong></p>
<p><strong>运行中</strong>（可能包含密码）....</p>
<h3 id="危险设置"><a class="header" href="#危险设置"><strong>危险设置</strong></a></h3>
<p>在网络管理领域，某些配置和参数是确保全面监控和控制的关键。</p>
<h3 id="访问设置"><a class="header" href="#访问设置">访问设置</a></h3>
<p>两个主要设置使访问 <strong>完整的 OID 树</strong> 成为可能，这是网络管理中的一个关键组成部分：</p>
<ol>
<li><strong><code>rwuser noauth</code></strong> 被设置为允许在不需要身份验证的情况下完全访问 OID 树。此设置简单明了，允许无限制访问。</li>
<li>为了更具体的控制，可以使用以下方式授予访问权限：</li>
</ol>
<ul>
<li><strong><code>rwcommunity</code></strong> 用于 <strong>IPv4</strong> 地址，和</li>
<li><strong><code>rwcommunity6</code></strong> 用于 <strong>IPv6</strong> 地址。</li>
</ul>
<p>这两个命令都需要一个 <strong>社区字符串</strong> 和相关的 IP 地址，无论请求的来源如何，都提供完全访问权限。</p>
<h3 id="snmp-参数用于-microsoft-windows"><a class="header" href="#snmp-参数用于-microsoft-windows">SNMP 参数用于 Microsoft Windows</a></h3>
<p>一系列 <strong>管理信息库 (MIB) 值</strong> 被用于通过 SNMP 监控 Windows 系统的各个方面：</p>
<ul>
<li><strong>系统进程</strong>：通过 <code>1.3.6.1.2.1.25.1.6.0</code> 访问，此参数允许监控系统内的活动进程。</li>
<li><strong>运行程序</strong>：<code>1.3.6.1.2.1.25.4.2.1.2</code> 值用于跟踪当前运行的程序。</li>
<li><strong>进程路径</strong>：要确定进程的运行位置，使用 <code>1.3.6.1.2.1.25.4.2.1.4</code> MIB 值。</li>
<li><strong>存储单元</strong>：存储单元的监控通过 <code>1.3.6.1.2.1.25.2.3.1.4</code> 实现。</li>
<li><strong>软件名称</strong>：要识别系统上安装的软件，使用 <code>1.3.6.1.2.1.25.6.3.1.2</code>。</li>
<li><strong>用户账户</strong>：<code>1.3.6.1.4.1.77.1.2.25</code> 值允许跟踪用户账户。</li>
<li><strong>TCP 本地端口</strong>：最后，<code>1.3.6.1.2.1.6.13.1.3</code> 被指定用于监控 TCP 本地端口，提供对活动网络连接的洞察。</li>
</ul>
<h3 id="cisco"><a class="header" href="#cisco">Cisco</a></h3>
<p>如果您使用 Cisco 设备，请查看此页面：</p>
<p>{% content-ref url="cisco-snmp.md" %}
<a href="cisco-snmp.html">cisco-snmp.md</a>
{% endcontent-ref %}</p>
<h2 id="从-snmp-到-rce"><a class="header" href="#从-snmp-到-rce">从 SNMP 到 RCE</a></h2>
<p>如果您拥有允许您 <strong>写入值</strong> 的 <strong>字符串</strong>，您可能能够利用它来 <strong>执行命令</strong>：</p>
<p>{% content-ref url="snmp-rce.md" %}
<a href="snmp-rce.html">snmp-rce.md</a>
{% endcontent-ref %}</p>
<h2 id="大规模-snmp"><a class="header" href="#大规模-snmp"><strong>大规模 SNMP</strong></a></h2>
<p><a href="https://github.com/mteg/braa">Braa</a> 是一个大规模 SNMP 扫描器。此类工具的预期用途当然是进行 SNMP 查询——但与来自 net-snmp 的 snmpwalk 不同，它能够同时查询数十或数百个主机，并在一个进程中完成。因此，它消耗的系统资源非常少，并且扫描速度非常快。</p>
<p>Braa 实现了自己的 SNMP 栈，因此不需要任何 SNMP 库，如 net-snmp。</p>
<p><strong>语法：</strong> braa [社区字符串]@[[SNMP 服务器的 IP]:[iso id]</p>
<pre><code class="language-bash">braa ignite123@192.168.1.125:.1.3.6.*
</code></pre>
<p>这可以提取大量 MB 的信息，您无法手动处理。</p>
<p>所以，让我们寻找最有趣的信息（来自 <a href="https://blog.rapid7.com/2016/05/05/snmp-data-harvesting-during-penetration-testing/">https://blog.rapid7.com/2016/05/05/snmp-data-harvesting-during-penetration-testing/</a>）：</p>
<h3 id="设备"><a class="header" href="#设备"><strong>设备</strong></a></h3>
<p>该过程从每个文件中提取 <strong>sysDesc MIB 数据</strong> (1.3.6.1.2.1.1.1.0) 开始，以识别设备。这是通过使用 <strong>grep 命令</strong> 完成的：</p>
<pre><code class="language-bash">grep ".1.3.6.1.2.1.1.1.0" *.snmp
</code></pre>
<h3 id="识别私有字符串"><a class="header" href="#识别私有字符串"><strong>识别私有字符串</strong></a></h3>
<p>一个关键步骤是识别组织使用的 <strong>私有社区字符串</strong>，特别是在 Cisco IOS 路由器上。这个字符串使得从路由器中提取 <strong>运行配置</strong> 成为可能。识别通常依赖于分析 SNMP Trap 数据中包含 "trap" 的内容，使用 <strong>grep 命令</strong>：</p>
<pre><code class="language-bash">grep -i "trap" *.snmp
</code></pre>
<h3 id="用户名密码"><a class="header" href="#用户名密码"><strong>用户名/密码</strong></a></h3>
<p>存储在 MIB 表中的日志会被检查以查找 <strong>失败的登录尝试</strong>，这可能意外地包括作为用户名输入的密码。搜索关键词如 <em>fail</em>、<em>failed</em> 或 <em>login</em> 以找到有价值的数据：</p>
<pre><code class="language-bash">grep -i "login\|fail" *.snmp
</code></pre>
<h3 id="emails"><a class="header" href="#emails"><strong>Emails</strong></a></h3>
<p>最后，为了从数据中提取<strong>电子邮件地址</strong>，使用带有正则表达式的<strong>grep命令</strong>，重点关注与电子邮件格式匹配的模式：</p>
<pre><code class="language-bash">grep -E -o "\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}\b" *.snmp
</code></pre>
<h2 id="修改-snmp-值"><a class="header" href="#修改-snmp-值">修改 SNMP 值</a></h2>
<p>您可以使用 <em><strong>NetScanTools</strong></em> 来 <strong>修改值</strong>。您需要知道 <strong>私有字符串</strong> 才能做到这一点。</p>
<h2 id="欺骗"><a class="header" href="#欺骗">欺骗</a></h2>
<p>如果有一个 ACL 只允许某些 IP 查询 SMNP 服务，您可以在 UDP 数据包中伪造其中一个地址并嗅探流量。</p>
<h2 id="检查-snmp-配置文件"><a class="header" href="#检查-snmp-配置文件">检查 SNMP 配置文件</a></h2>
<ul>
<li>snmp.conf</li>
<li>snmpd.conf</li>
<li>snmp-config.xml</li>
</ul>
<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>
<p>如果您对 <strong>黑客职业</strong> 感兴趣并想要破解不可破解的 - <strong>我们正在招聘！</strong> (<em>要求流利的波兰语书写和口语能力</em>)。</p>
<p>{% embed url="https://www.stmcyber.com/careers" %}</p>
<h2 id="hacktricks-自动命令"><a class="header" href="#hacktricks-自动命令">HackTricks 自动命令</a></h2>
<pre><code>Protocol_Name: SNMP    #Protocol Abbreviation if there is one.
Port_Number:  161     #Comma separated if there is more than one.
Protocol_Description: Simple Network Managment Protocol         #Protocol Abbreviation Spelled out

Entry_1:
Name: Notes
Description: Notes for SNMP
Note: |
SNMP - Simple Network Management Protocol is a protocol used to monitor different devices in the network (like routers, switches, printers, IoTs...).

https://book.hacktricks.xyz/pentesting/pentesting-snmp

Entry_2:
Name: SNMP Check
Description: Enumerate SNMP
Command: snmp-check {IP}

Entry_3:
Name: OneSixtyOne
Description: Crack SNMP passwords
Command: onesixtyone -c /usr/share/seclists/Discovery/SNMP/common-snmp-community-strings-onesixtyone.txt {IP} -w 100

Entry_4:
Name: Nmap
Description: Nmap snmp (no brute)
Command: nmap --script "snmp* and not snmp-brute" {IP}

Entry_5:
Name: Hydra Brute Force
Description: Need Nothing
Command: hydra -P {Big_Passwordlist} -v {IP} snmp


</code></pre>
<p>{% hint style="success" %}
学习与实践 AWS 黑客技术：<img src="../../.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks 培训 AWS 红队专家 (ARTE)</strong></a><img src="../../.gitbook/assets/arte.png" alt="" data-size="line"><br />
学习与实践 GCP 黑客技术：<img src="../../.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks 培训 GCP 红队专家 (GRTE)</strong><img src="../../.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>支持 HackTricks</summary>
<ul>
<li>查看 <a href="https://github.com/sponsors/carlospolop"><strong>订阅计划</strong></a>!</li>
<li><strong>加入</strong> 💬 <a href="https://discord.gg/hRep4RUj7f"><strong>Discord 群组</strong></a> 或 <a href="https://t.me/peass"><strong>Telegram 群组</strong></a> 或 <strong>在</strong> <strong>Twitter</strong> 🐦 <strong>上关注我们</strong> <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>通过向</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> 和 <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> GitHub 仓库提交 PR 来分享黑客技巧。</li>
</ul>
</details>
{% endhint %}

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../network-services-pentesting/pentesting-imap.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../network-services-pentesting/pentesting-snmp/cisco-snmp.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../network-services-pentesting/pentesting-imap.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../network-services-pentesting/pentesting-snmp/cisco-snmp.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
